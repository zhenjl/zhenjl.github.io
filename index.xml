<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Zen 3.1</title>
    <link>http://zhen.org/</link>
    <description>Recent content on Zen 3.1</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>Jian Zhen. All Rights Reserved.</copyright>
    <lastBuildDate>Fri, 29 Jul 2016 21:07:12 +0000</lastBuildDate>
    <atom:link href="http://zhen.org/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>12 Days in Iceland, the Land of Ice, Water, and Fire</title>
      <link>http://zhen.org/iceland2016/</link>
      <pubDate>Fri, 29 Jul 2016 21:07:12 +0000</pubDate>
      
      <guid>http://zhen.org/iceland2016/</guid>
      <description>

&lt;p&gt;First thing first, 12 days is not nearly enough to visit this beautiful country. We probably visited less than half of the places we wanted to visit. If you truly want to enjoy Iceland and get the maximum out of a single trip, plan for a at least a full two weeks. And then plan to go back for another two weeks at some other point to see the rest.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: If you have only a week, stick to an area rather than spending time driving on the entire Ring Road. If I had one week, I would spend it in the Westfjords.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;After spending 12 days and driving 3338 kilometers (2074 miles) in Iceland, we (L or me, B or wife, A1 Jianson - ~10, A2 Jiand√≥ttir - ~8) all agreed that it&amp;rsquo;s definitely worth the trip.&lt;/p&gt;

&lt;iframe src=&#34;https://www.google.com/maps/d/embed?mid=1mGT0p5Te9q0711uOzJSU6R3vg5I&amp;hl=en&#34; width=&#34;800&#34; height=&#34;600&#34;&gt;&lt;/iframe&gt;

&lt;h2 id=&#34;tips-and-stuff:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Tips and Stuff&lt;/h2&gt;

&lt;h3 id=&#34;planning-for-the-trip:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Planning for the Trip&lt;/h3&gt;

&lt;p&gt;Truth be told, we were procrastinators when it came to preparing for the trip. Aside from booking our tickets on WOW Air 2+ months before the trip, we waited until the weekend before the trip to actually plan for it. We basically planned our itinerary in a single day, after reading a bunch of blogs and articles online. A1 and A2 also helped by watching a bunch of Youtube videos (and learning a few words along the way).&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: And don&amp;rsquo;t be shy to ask once you are there where you should go/buy/eat/see&amp;hellip;the locals/fellow travellers can provide valuable tips that will help your journey.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;I found &lt;a href=&#34;http://guidetoiceland.is&#34;&gt;guidetoiceland.is&lt;/a&gt; to be the most helpful. In fact, we found most of the places we want to visit by reading their suggestions. Check out their articles on:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://guidetoiceland.is/best-of-iceland/best-attractions-by-the-ring-road-of-iceland&#34;&gt;Best Attractions by the Ring Road of Iceland&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://guidetoiceland.is/best-of-iceland/the-5-best-hot-springs-in-iceland&#34;&gt;The 5 Best Hot Springs in Iceland&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;Though we recommend skipping the Blue Lagoon (yes, contrary to popular belief) as the locals told us that the Blue Lagoon is man made and it supposedly doesn&amp;rsquo;t drain!! With thousands of people visiting each day, imagine the state of the water at the end of each day. And imagine people actually putting that white stuff on their face!!&lt;/li&gt;
&lt;li&gt;We didn&amp;rsquo;t fact check this so take this with a grain of salt.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://guidetoiceland.is/travel-info/driving-in-iceland&#34;&gt;The Ultimate Guide to Driving in Iceland&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://guidetoiceland.is/book-holiday-trips/around-the-country-in-14-days-self-drive-tour&#34;&gt;14 Day Self Drive Tour | Circle of Iceland &amp;amp; The Westfjords&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://guidetoiceland.is/book-holiday-trips/12-day-self-drive-tour-circle-of-iceland&#34;&gt;12 Day Self Drive Tour | Circle Of Iceland | National Parks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Other articles include:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.theroadlesstravelled.eu/blog/2015/11/12/iceland&#34;&gt;Iceland: the land of fire and ice&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.alexcornell.com/iceland-travel-guide/&#34;&gt;Iceland Travel Guide: Tips and Road Trip Itinerary&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;We also found the &lt;a href=&#34;https://www.tripadvisor.com/ShowForum-g189952-i223-o40-Iceland.html&#34;&gt;Trip Advisor Iceland Forum&lt;/a&gt; to be a tremendous resource when it came to ratings of various attractions. Highly recommended.&lt;/p&gt;

&lt;p&gt;Guide to Iceland offered self-guided tours where they will book everything for you, including cars and hotels. However, we found the pricing to be fairly expensive. We ended up building our own itinerary based on the suggestions from these self-guided tours. The downside is we had to book all the lodging ourselves.&lt;/p&gt;

&lt;p&gt;The worst thing about being procrastinators and doing late planning is the extra headache and cost on lodging. I think between lack of lodging options, higher cost for lodging and farther out lodging options, it cost us USD$200-300 more than we would have liked.&lt;/p&gt;

&lt;h3 id=&#34;mobile-coverage-and-navigation:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Mobile Coverage and Navigation&lt;/h3&gt;

&lt;p&gt;Moile data is an important factor as I wanted to use Google Maps to navigate around Iceland, and didn&amp;rsquo;t want to rent a GPS unit. We also wanted to use Google Hangouts for phone calls and didn&amp;rsquo;t want to get a local SIM.&lt;/p&gt;

&lt;p&gt;We did some &lt;a href=&#34;http://prepaid-data-sim-card.wikia.com/wiki/Iceland&#34;&gt;preliminary research on SIM cards in Iceland&lt;/a&gt; but ended up using Google Fi instead. It turned out to be one of the better decisions we made for this trip.&lt;/p&gt;

&lt;p&gt;Iceland in general has pretty good coverage. If you stay on the ring road, you should be able to get at least 3G coverage 70-80% of the time. In many cases, especially when you are near major cities/towns such as Reykjavik or Akureyri, you will get LTE coverage as well. Google Fi just announced their service upgrade to support the best service (e.g., LTE) right before our trip, so we were definitely happy about that.&lt;/p&gt;

&lt;p&gt;However, if you go to areas such as Westfjords, or if you are in the mountains on the ring road, then coverage becomes very spotty. In some cases you can get 2G service, but in many cases in these remote areas the only thing you get is voice service. In Westfjords, we had &amp;ldquo;No Service&amp;rdquo; on our phone majority of the time.&lt;/p&gt;

&lt;p&gt;We had Google FI data-only SIM cards for both of our iPhones. My iPhone 6 got pretty good signals most of the time when there&amp;rsquo;s coverage. For some reason, maybe it has a better antenna, B&amp;rsquo;s iphone 6S+ was able to get even better signals and sometimes LTE service when my iPhone 6 was only able to get 3G.&lt;/p&gt;

&lt;p&gt;Between the wifi that&amp;rsquo;s available at most of the places we stayed and the Google Fi service, we had all the coverage we needed. Google Hangouts worked out beautifully over the wifi and data networks. I was able to keep my US Google phone number, and call any US number for free. To call Iceland, Google Hangouts charged $0.02/min for landlines and $0.15/min for mobile lines. Overall I spent $2.65 for 0.265GB of internaltion data usage on Google Fi for the 12 days we were there. For Google Hangouts, I spent $2.75 for the trip calling a few Iceland places. So altogether it&amp;rsquo;s about $5.40.&lt;/p&gt;

&lt;p&gt;Google Maps worked out beautifully as well. In most cases, I set the navigation routes using the lodging wifi before heading out, and Google Maps stores an offline copy of the route so even when I lose mobile service, my navigation is not affected. The only thing I wish Google would make easier is managing multiple destinations on the iOS app, which I just saw the news that they are rolling out this specific change gradually.&lt;/p&gt;

&lt;p&gt;So thanks to Google for these wonderful services.&lt;/p&gt;

&lt;h3 id=&#34;pass-time-for-the-long-drives:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Pass Time for the Long Drives&lt;/h3&gt;

&lt;p&gt;We were in the car quite a bit as we drove 3338 kilometers. With two young kids (10 and 8), we have learned from experience that the best way to keep them from fighting with each other, or  asking &amp;ldquo;are we there yet?&amp;rdquo; every 5 minutes is to let them listen to lots of audio books. We loaded a 3rd iPhone (no SIM, so basically iPod) with a bunch of audio books like Harry Potter, Judy Blume and others, and the whole time we were driving they were listening to these. Certainly helped keep us sane.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: All and all, I am grateful for that our fellow travellers in the back seats were cooperatives and came with us on this incredible adventure. Never underestimate the value of books on tape, crackers and chocolates! :-)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Amazon Prime Music also proved to be very useful as well. I downloaded a bunch of prime music onto my phone before the trip, and listened to them during part of our trip. Though in most cases we were enjoying the view on the road and forgot to turn on the music.&lt;/p&gt;

&lt;p&gt;Assuming data coverage is available, TurnIn radio also proved to be useful for catching up on US news. We didn&amp;rsquo;t mind using up a bit of data to keep up with the news.&lt;/p&gt;

&lt;h3 id=&#34;other-electronic-app-stuff:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Other Electronic/App Stuff&lt;/h3&gt;

&lt;p&gt;Here are some other electronic stuff you might want to consider bringing.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.com/gp/product/B00RBFK57A&#34;&gt;BESTEK Grounded Universal Travel Plug Adapter for France, Germany or similar&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;This is a 3 pack, but if you don&amp;rsquo;t have a lot of electronics, one is sufficient. For us, we didn&amp;rsquo;t bring any computers.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.com/gp/product/B00OQ19QYA&#34;&gt;USB Charger RAVPower 50W 10A 6-Port USB Charger or similar&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;Well worth bringing this. We had 3 iPhones (1 technically is an iPod), an action camera battery charger, and a couple other electronic items that all needed charging.&lt;/li&gt;
&lt;li&gt;This charger can do all of them at the same time and we didn&amp;rsquo;t have to go hunt for a bunch of outlets and use a bunch of plug adapters.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Apps

&lt;ul&gt;
&lt;li&gt;As desribed above &amp;ndash; Google Maps, Google Hangouts, Amazon Prime Music, TuneIn&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://itunes.apple.com/us/app/google-translate/id414706506?mt=8&#34;&gt;Google Translate&lt;/a&gt; is a great app for translating labels on food packaging. We used it quite a bit since A1 is allergic to nuts.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://itunes.apple.com/us/app/reykjavik-map-and-walks/id369667712?mt=8&#34;&gt;Reykjavik Map and Walks&lt;/a&gt; is a great little app that gives you most of the attractions you should visit in Reykjavik. I used the free version with a combination of Google Maps to walk around the city.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://itunes.apple.com/us/app/tripadvisor-hotels-flights/id284876795?mt=8&#34;&gt;TripAdvisor Hotels Flights Restaurants&lt;/a&gt; for reading reviews and recommendations.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://itunes.apple.com/us/app/commander-compass-lite/id340268949?mt=8&#34;&gt;Commander Compass Lite&lt;/a&gt; to get GPS location and many other interesting location tidbits. Technically you can use the Apple Compass app to get GPS location but this one provides more info.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;For the first time in my life I didn&amp;rsquo;t bring a computer with me for a trip. It&amp;rsquo;s by far the longest period of time that I don&amp;rsquo;t have a computer since laptops become portable enough to carry. It was fine at the end. I just had to make sure that we &lt;a href=&#34;http://lifehacker.com/use-image-capture-to-quickly-clear-out-your-iphones-cam-1630524834&#34;&gt;mass delete a bunch of photos from both of our iPhones&lt;/a&gt; before the trip to ensure there&amp;rsquo;s enough space for videos and photos.&lt;/p&gt;

&lt;h3 id=&#34;clothes-shoes:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Clothes, Shoes&lt;/h3&gt;

&lt;p&gt;Dress in layers is the best advice we have read, and it&amp;rsquo;s absolutely true. Even in July, the weather can be somewhat unpredictable. We started with a few days with really nice weather, then as we moved to the northwest (Westfjords) and the north, the weather became cooler, windier and overcast.&lt;/p&gt;

&lt;p&gt;Our typical layers include a short sleeve, a long sleeve, and a warm jacket. Since we were going to visit the glaciers and waterfalls, we also brought rain jackets (or waterproof outer jacket) and gloves. The rain jackets proved to be extremely useful!&lt;/p&gt;

&lt;p&gt;We have read that waterproof pants would be needed, but that didn&amp;rsquo;t turn out to be the case. In most cases quick dry pants (like &lt;a href=&#34;https://www.amazon.com/gp/product/B006QYGOQ8&#34;&gt;these&lt;/a&gt;) are more than sufficient.&lt;/p&gt;

&lt;p&gt;We also brought good waterproof hiking shoes (like &lt;a href=&#34;https://www.rei.com/product/836529/merrell-moab-waterproof-hiking-shoes-mens&#34;&gt;these&lt;/a&gt;, or &lt;a href=&#34;http://www.llbean.com/llb/shop/86201&#34;&gt;these&lt;/a&gt; for kids), which turned out to be a MUST for this trip. With the rugged terrain for many of the places we visited, shoes with good traction will make it much easier. We saw some tourists with fairly flat footwear, or sometimes even with heels. Honestly I have no idea how they survived some of the more rugged areas.&lt;/p&gt;

&lt;p&gt;The waterproof shoes also proved to be extremely useful when going INTO the glacier. Given it&amp;rsquo;s July, the top layer of snow is melting and the water goes through the ice and drips into the glacier tunnel we visited, so sometimes there&amp;rsquo;s a layer of water &lt;sup&gt;1&lt;/sup&gt;&amp;frasl;&lt;sub&gt;4&lt;/sub&gt; - &lt;sup&gt;1&lt;/sup&gt;&amp;frasl;&lt;sub&gt;2&lt;/sub&gt; inch deep that we need to walk through.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: We also each brought a pair of sandals/flip flops. Most Airbnb/Guest House have a mud room which you will need to take of your shoes. It also help with all the swimming pools we visited. Lastly, if you accidentally fell in the river, you would have have something to wear while you try to dry your hiking boots and socks on the dashboard.&lt;/em&gt; :-)&lt;/p&gt;

&lt;h3 id=&#34;car-rental:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Car Rental&lt;/h3&gt;

&lt;p&gt;To start, we looked into the option of renting a 4-person campervan. It seemed like a great (and probably more economical) option to travel in Iceland as you can set your own schedule. Unfortunately we didn&amp;rsquo;t realize this was an option until too late (note we procrastinated until the very last minute to plan). Also, most campervans seem to be manual and neither myself or B know how to drive that. So that option is out regardless. If we go back, I would definitely look at this option again.&lt;/p&gt;

&lt;p&gt;Given it&amp;rsquo;s July (no snow!) and we weren&amp;rsquo;t planning on going on any F roads (and off-roading is illegal), we decided to rent a small 2WD. We rented a cool little blue Honda Jazz via &lt;a href=&#34;http://guidetoiceland.is&#34;&gt;Guide to Iceland&lt;/a&gt;. Guide to Iceland is actually a broker, and the final car rental company is &lt;a href=&#34;http://www.icerentalcars.is&#34;&gt;IceRentalCars&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;After reading through multiple forum posts on Trip Advisor, we learned that most car rentals include basic insurance service called Collision Damage Waiver (CDW). This is automatically included and cannot be taken off (in most cases). Because of this inclusion, you cannot use your credit card rental insurance to cover the car as most credit card companies require that you waive ALL insurance provided by the rental company.&lt;/p&gt;

&lt;p&gt;We have read enough of not-so-great stories about car rental companies that we decided to accept the basic CDW and additionally purchase the Super CDW (SCDW), which in effect lowers our liability even more. In addition, given that we are traveling to Westfjords and having read that most roads there are gravel roads, we purchased Gravel Protection (GP) as well. While it&amp;rsquo;s a bit more expensive, we wanted the peace of mind of not having to deal with international insurance issues when something bad happens. Note that no insurance cover water damage or damage to the frame of the car.&lt;/p&gt;

&lt;p&gt;Overall we had a pretty good experience with both Guide to Iceland and IceRentalCars. When we arrived at the airport, we were picked up by a driver that drove us to the car lot (extra cost). We did some quick paper work and were handed the keys. We did see another couple who had to go through the insurance struggle while there (trying to not get insurance and use the credit card insurance coverage) and glad we did the research before hand.&lt;/p&gt;

&lt;p&gt;Learning from the forum posts, we also took A LOT of detailed pictures of the car to make sure all the scratches and dents are identified. We had the rental person mark every little scratch we found. There weren&amp;rsquo;t many since the car looked fairly new. We did miss one scratch but luckily the picture we took had it.&lt;/p&gt;

&lt;p&gt;At the end though I don&amp;rsquo;t think it would have mattered, since the person who received the car only did a cursory look to ensure there&amp;rsquo;s no water or frame damage. Maybe he did that because we bought both GP and SCDW insurance.&lt;/p&gt;

&lt;h3 id=&#34;driving-in-iceland:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Driving in Iceland&lt;/h3&gt;

&lt;p&gt;Driving in Iceland is fairly straightforward if you are an experienced driver from the US. The driver is on the left side and you drive on the right side of the road, just like home! However, it is still best to &lt;a href=&#34;http://abcarrental.is/en/page/traffic-signs&#34;&gt;familiarize yourself with the road signs&lt;/a&gt;. This is something I did after I started driving there and wondered what some of the signs meant. Worth spending a few minutes before hand. This is also a &lt;a href=&#34;https://www.worldnomads.com/travel-safety/northern-europe/iceland/tips-for-driving-in-iceland&#34;&gt;good article&lt;/a&gt; on driving in Iceland.&lt;/p&gt;

&lt;p&gt;Typical driving speed is 90 kmh on the paved ring road, 80 on the well-maintained gravel roads (part of the ring road on the east is gravel), 60-70 on some of the turns, 50 inside cities and 30 in the residential areas. On some really bad gravel roads like in the Westfjords or the &lt;a href=&#34;https://www.tripadvisor.ca/ShowTopic-g189952-i223-k7857808-Any_Scary_or_Dangerous_portions_of_the_Ring_Road-Iceland.html&#34;&gt;√ñxi pass&lt;/a&gt;, you may need to slow down even further.&lt;/p&gt;

&lt;p&gt;In general we found there were 4 types of roads in Iceland:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Paved roads

&lt;ul&gt;
&lt;li&gt;Most of the ring road is paved and well maintained. Drivers should have no problem.&lt;/li&gt;
&lt;li&gt;Many drivers drive about ~10-15 kmh over the speed limit of 90. I would recommend staying under 10 kmh over.&lt;/li&gt;
&lt;li&gt;Passing slower drivers, RVs and trucks are fairly common on paved roads.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Good gravel roads

&lt;ul&gt;
&lt;li&gt;More like packed dirt road with no rocks or potholes. Fairly well maintained and drivers should have no problems.&lt;/li&gt;
&lt;li&gt;A good part of the road going into Westfjords and some of the roads IN Westfjords are like this.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;OK Gravel roads

&lt;ul&gt;
&lt;li&gt;Definitely gravel and rocks but still manageable.&lt;/li&gt;
&lt;li&gt;Some parts of the road going into Westfjords, and a good part of the roads IN Westfjords are like this.&lt;/li&gt;
&lt;li&gt;The √ñxi pass is in this category, though some people may put this in the BAD category. I found it to be ok, and I drove through heavy fog.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;BAD gravel roads

&lt;ul&gt;
&lt;li&gt;The road going to L√°trabjarg (bird cliff, west-most point of Europe) is BAD. Good size rocks and deep potholes everywhere.&lt;/li&gt;
&lt;li&gt;The worst gravel road I drove is the 4-5 kilometers I drove to the edge of the glacier. It was 100% gravel and rocks and I think I drove ~20 kmh the whole time on our little Honda Jazz.&lt;/li&gt;
&lt;li&gt;We didn&amp;rsquo;t rent a 4WD but driving these roads made me wish we did.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Almost none of the roads, regardless of the types above, have shoulders where you can stop. Most of the roads are fairly narrow. Sometimes there&amp;rsquo;s a bit of gravel space you can do a quick stop and take a few pictures but the car is still have on the road. And believe me, there are many places you want to stop and take pictures. So just be very careful and don&amp;rsquo;t stop at a location where other cars can&amp;rsquo;t see you (like at a turn).&lt;/p&gt;

&lt;p&gt;There&amp;rsquo;s also very few guard rails on any of the roads, so sometimes you might be driving next to a steep cliff. There are some, just not many. For remote moutainous areas, I  recommend using the middle of the road (yes, cross the line if there&amp;rsquo;s one) as that&amp;rsquo;s a bit safer and give you more space to maneuver. I&amp;rsquo;ve seen quite a few locals do that. Just make sure you watch out for curves or section of the roads where you have no clear visibility.&lt;/p&gt;

&lt;p&gt;Most of the bridges in Iceland are single lane bridges. This means one side has to wait for the other side to cross first. Most of the time you should have no problem spotting cars on the other side. Between Vik and Reykjavik, however, most of the bridges seem to be two lanes. We did drive through one long-ish one-lane bridge that had expanded areas in some sections in the middle for cars to stop. I think it was between H√∂fn and Vik.&lt;/p&gt;

&lt;p&gt;Keep your headlight on ALL THE TIME. This allows cars passing others to spot you from farther away. Also sometimes you will drive through pretty heavy fog, especially in the moutainous areas. We drove through a section on the East with heavy fog that lasted probably 30 minutes, and it was very difficult to see the car in front and behind us without their lights.&lt;/p&gt;

&lt;p&gt;On passing, typically the slower car will turn on the right turn signal to let the car behind know that it&amp;rsquo;s ok to pass since the slower car typically has better visibility of what&amp;rsquo;s coming. Not sure if this is an official rule but it&amp;rsquo;s defintely practiced on the road by the locals.&lt;/p&gt;

&lt;p&gt;Some of the forum posts suggested that gas stations are fairly far apart and cars should never have less than &lt;sup&gt;1&lt;/sup&gt;&amp;frasl;&lt;sub&gt;4&lt;/sub&gt; tank of gas. While both statements are true, I never found that I would use &lt;sup&gt;1&lt;/sup&gt;&amp;frasl;&lt;sub&gt;4&lt;/sub&gt; tank of gas before seeing a gas station. Maybe some of the bigger SUVs will see that, but not the Honda Jazz at 32 avg MPG.&lt;/p&gt;

&lt;p&gt;Gas is EXPENSIVE. It was about $6.4/gallon when we were there. At 32 avg MPG, driving 2074 miles cost us over $400 in gas. I am sure we weren&amp;rsquo;t getting 32 MPG either since we went up and down a lot of mountains. So probably around $450 in gas.&lt;/p&gt;

&lt;p&gt;Most of the gas stations you will see on the road are N1 gas stations. If you don&amp;rsquo;t have a credit card with PIN, I would recommend getting prepaid N1 cards that you can use at N1 gas stations. You can get these cards at any manned N1 gas station. There&amp;rsquo;s also OB and Olis gas stations but they are typically closer to towns. Our car rental company gave us a card that we can use to get 10% discount at any OB and Olis gas stations, so we used them as often as we can find them.&lt;/p&gt;

&lt;p&gt;Last but not least, watch out for those tourists! They like to stop, sometimes in the middle of the road, to take pictures!&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: By proxy, each stretch of our drives couldn&amp;rsquo;t be longer than two hours because of the A1&amp;rsquo;s and A2&amp;rsquo;s liquid intake. Like one of the Iceland blog I read, you may find yourself in need of the loo but it may be 150 km away. Most of the time, you won&amp;rsquo;t find a good spot to be unseen for your business. That said, all the gas stations we stopped had clean restrooms. You can also refill your water bottles, buy a hot dogs or two and pay more for less junk food. Another thing you need to pay close attention to are cylists who are sharing the narrow road with you. My jaw dropped a few times when I saw a cylist trying to ride through an area which are FAR from the next town. What took us 20 minutes from one town to another could be HOURS. Another impressive sight was when we saw a couple pulling a small trailer with an infant on our way to Dynjandi. We were at high altitude!!!. Other than the trailer, I also noticed the bright green Ikea children porter potty strapped to the very back of the pack on the bike.&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&#34;lodging-and-accomodations:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Lodging and Accomodations&lt;/h3&gt;

&lt;p&gt;As we mentioned before, procrastinating probably cost us a good USD$200-300 more. So lessons learned here is to book lodging early. Also, you will have a lot more options.&lt;/p&gt;

&lt;p&gt;Of the 11 nights we were there, 6 were through Airbnb and 5 were in guest houses we emailed directly. For guest houses, you should be able to book them directly from bookings.com if you do it early. However, with us doing last minute booking, we had to email every guest house we can find on the websites. Took us a while but we were finally able to find lodging for the entire trip.&lt;/p&gt;

&lt;p&gt;So if you start your planning early, use Airbnb and Bookings.com. If you are procrastinators like us, I would recommend starting at visiticeland.com. From there, click through each of the regions you are visiting such as East, West, Westfjords, South, North, etc, and from there, you will click through to the regional sites such as south.is, east.is, northiceland.is. And from there, you will find the link for &amp;ldquo;where to stay&amp;rdquo; that will list all the guest houses or hotels in the areas. Almost of them will have emails or phone numbers you can use to contact them directly.&lt;/p&gt;

&lt;p&gt;Altogether, we spent 2 nights in Reykjavik (Airbnb), 3 nights in Bjarkarholt (Westfjords, direct email) and 3 nights in √ìlafsfj√∂r√∞ur (North, Airbnb), 1 night in H√∂fn (Southeast, direct email, the locals apparently doesn&amp;rsquo;t want to be categorized as South or East), 1 night in Vik (South via direct email) and 1 night in Reykjanesb√¶r (Airbnb).&lt;/p&gt;

&lt;p&gt;Two of the areas we stayed, Bjarkarholt in Westfjords and √ìlafsfj√∂r√∞ur in the North, we would have preferred to stay closer to the attractions, but beggers can&amp;rsquo;t be choosers so we settled.&lt;/p&gt;

&lt;p&gt;For the sharp-eyed readers, you will also notice that we skipped the West Iceland areas such as Sn√¶fellsnes. We originally booked a night in Grundarfj√∂r√∞ur via Airbnb, but due to some schedule change (adding the Into the Glacier tour), we had to skip the area. It is one of the regrets we have for this entire trip. If we had a couple more days (full 2 weeks), we would have spent the time there.&lt;/p&gt;

&lt;p&gt;Oh one thing to note is that not all guest houses or Airbnb places provide shampoo or soap. So I would recommend you have a small bottle just in case.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: In one of the guest houses we stayed, the owner told us that we could have the European contiential breakfast because &amp;ldquo;everyone who stays can come eat here&amp;rdquo;. When we checked out, he charged each of us 10 Euro for breakfast. I wish he would have been more upfront about the cost and I wish I asked before we ate my 5 Euro two pieces of jelly toasts! We could use the 80 Euro towards our food budget.&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&#34;cash-and-credit-cards:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Cash and Credit Cards&lt;/h3&gt;

&lt;p&gt;Every place, except one, that we went to, no matter how small or large, took credit cards. Even the paid WCs (toilets) took credit cards. So for the first time ever visiting a foreign country, I didn&amp;rsquo;t carry any local currency. The one place that didn&amp;rsquo;t take credit card is a guesthouse. But they do take USD for payment so I paid in USD cash.&lt;/p&gt;

&lt;p&gt;I highly recommend getting a credit card with no foreign transaction fees. Otherwise you end up paying 3% (pretty typical) on top of every charge. NerdWallet&amp;rsquo;s &lt;a href=&#34;https://www.nerdwallet.com/blog/top-credit-cards/no-foreign-transaction-fee-credit-card/&#34;&gt;Best No Foreign Transaction Fee Credit Cards of 2016&lt;/a&gt; article is one of the best I&amp;rsquo;ve read. After going through it in details, I got a BankAmerica Travel Rewards card which had no annual fee.&lt;/p&gt;

&lt;p&gt;If you plan to get a new card, I highly recommend getting one at least 3 months before your trip, so you can build up the credit and get the bank to increase the credit limit. Otherwise you are stuck at a couple of thousands of dollars in spending credit.&lt;/p&gt;

&lt;p&gt;I also highly recommend getting a PIN for your card. While most manned loations will have paper copies that you can sign, some of the unmanned gas stations will only accept credit card with PINs.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: If you don&amp;rsquo;t plan to use plastic like we do for your trip, some coins will come in handy for restrooms and some hot pools (some hot springs require payment).&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&#34;food-and-shopping-for-food:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Food and Shopping for Food&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;This section is written by B since her mastery of food and budget cooking really helped us keep within budget.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Most supermarkets in Iceland don‚Äôt open until 11 and usually closes by 6 or 8 pm (1800 or 2000). We mainly shopped at B√≥nus but have done some food purchasing at gas stations, neighborhood supermarket and specialty shops. In a pinch, you can get snacks and food at gas stations when they are opened. Obviously, the price will not be as good as a limited operating hours of B√≥nus or other supermarkets.&lt;/p&gt;

&lt;p&gt;Iceland supermarkets have walk in icebox where they keep all of perishable items. There, you can buy fruits (very limited as they are all imported), meat, and dairy products. Because of budget, I stayed close to pasta, potatoes and some meat (lamb loin was delicious). Since we didn‚Äôt have a cooler, I bought frozen vegetables as ice pack to keep our perishable items cold while we travelled from one destination to another.&lt;/p&gt;

&lt;p&gt;Given all the coastlines in Iceland, I was surprised that there aren‚Äôt great selections of fresh seafood at the stores. I never had enough time to find out why. You can find loads of frozen seafood. I found a bag of seafood mix from Norway (?!). Lox and fresh salmon are available though. During our first trip to the grocery store, I simply asked the clerk which lox she liked and what should go with it. The lox and dill spread she recommended were delicious!&lt;/p&gt;

&lt;p&gt;Perhaps we are spoiled from the fresh fruits in our area, I was disappointed at the fruit selections in the supermarket. During our trip, I only bought one orange (tasted good) and two golden delicious apples (:-&amp;lt; ). Like I mentioned above, I bought big bags of frozen cauliflowers and mixed vegetables to keep a balance diet for the family. Below is a sample shopping list. I try to stick to these items to create flexible menus for the family depends on the cooking appliances we have available for us at each location.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Pastas (1lb bag could feed four of us with a little left over for a hearty breakfast)&lt;/li&gt;
&lt;li&gt;Eggs (hard boiled eggs are king. They provided good source of protein during long drives)&lt;/li&gt;
&lt;li&gt;potatoes&lt;/li&gt;
&lt;li&gt;Fresh leeks (great favorite to add to pasta or potato stew)&lt;/li&gt;
&lt;li&gt;Butter (sometimes they don‚Äôt have oil in place we stay; anything tastes better w/butter)&lt;/li&gt;
&lt;li&gt;Bread loafs (sliced bread may be better; a good butter/jelly sandwiches also help keep the kids quiet during long drives) J&lt;/li&gt;
&lt;li&gt;Canned diced tomatoes (didn‚Äôt work out in one of the places because there was no can opener)&lt;/li&gt;
&lt;li&gt;Rtiz cracker (not something I would buy in the US but easy snacks for young children)&lt;/li&gt;
&lt;li&gt;Yogurt/Yogurt drinks (you will find skyr; a taste Icelandic yogurt; some brands tastes better than others for us)&lt;/li&gt;
&lt;li&gt;Icelandic chocolate&lt;/li&gt;
&lt;li&gt;Maltsers&lt;/li&gt;
&lt;li&gt;Bacon&lt;/li&gt;
&lt;li&gt;Lamb loins (expensive but worth the money; I made a lamb, potato and leek stew that turned out well)&lt;/li&gt;
&lt;li&gt;Bacon&lt;/li&gt;
&lt;li&gt;Ham&lt;/li&gt;
&lt;li&gt;Hotdogs at gas stations (Sidenote of the hotdogs: each region put their sauce differently. Some put ketchup, mustard and mayo on the bun first before the hot dog. Also, their ketchup is a dark brown sauce rather than the bright red one in the US. You can add fresh onions or deep fried ones. The deep fried ones added a special crunch and flavor to the hotdog! Yumm!)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;L Notes: If time works out, I would recommend stocking up at the &lt;a href=&#34;https://www.google.ca/maps/place/B√≥nus+Supermarket/@63.9727773,-22.545712,17z/data=!4m8!1m2!3m1!2sB√≥nus+Supermarket!3m4!1s0x0:0x4a5c37fef0a87eb9!8m2!3d63.9726439!4d-22.5435289&#34;&gt;B√≥nus Discount Store&lt;/a&gt; after getting your rental car.&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&#34;swimming-pools:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Swimming Pools&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;This section is written by A1 and A2 since this is their favorite activity for the whole trip.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Nearly every town in Iceland has a swimming pool. Most of them have water slides. The swimming pool on the westman islands was a awesome experience, you first need to shower without a swimsuit and then enter the pool. When I first glimpsed the inside of the pool they had a basketball hoop in the water. When I hurryed outside I saw a 2 waterslides 1 with what seemed to be a trampoline after the tube, the other was just a regular waterslide with 3 connected together. There were 4 hot tubs 3 round and 1 big rectangular one. The other swimming pool is connected to a baby pool, another attraction is the rock climbing wall it has 2 faces 1 face is quite easier the other is has very small rocks/stones to climb on. The inside pool can get much deeper you should not take a child who can‚Äôt swim into the deep end. There is also a very shallow end that has the basketball hoop me and my father had great time playing with that.&lt;/p&gt;

&lt;p&gt;√ìlafsfj√∂r√∞ur swimming pool me my mom and my sister and me went to this swimming pool again you had to shower without your swimming suit, the waterslide is superb it is mostly dark but here and there, there are strips of colored lights. There is a swimming pool with a shallow and deep end. A baby pool and 3 hot tubs. It is recommended if your kids like waterslides to get there early because if you arrive late it will be very crowded.&lt;/p&gt;

&lt;h2 id=&#34;itinerary:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Itinerary&lt;/h2&gt;

&lt;p&gt;With 2 kids at 10 and 8 and needing a lot of sleep (10-12 hours or we will suffer the consequences later), our schedule is not at all rigorous. I am probably the more aggressive one in the family in having more activities, and probably would have preferred to see a couple more attractions, but at the end it all worked out.&lt;/p&gt;

&lt;p&gt;Also, most people driving the ring road will do so counterclock-wise, we did it clock-wise. Looking back, I don&amp;rsquo;t think it would have made much difference. Either direction will work if you plan your itinerary right.&lt;/p&gt;

&lt;h3 id=&#34;day-1-arrival-reykjavik-swimming-pool:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Day 1 - Arrival, Reykjavik, Swimming Pool&lt;/h3&gt;

&lt;p&gt;Our plane landed at ~4AM in the morning. We didn&amp;rsquo;t sleep much on the plane so we were all pretty tired. IceRentalCars had someone pick us up at the arrival hall and took us directly to the car rental office. After some quick paper work, we were handed the keys to a nice little blue Honda Jazz (aka Honda Fit in the US) and were on our way to Reykjavik.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/hondajazz.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;We drove ~45 minutes to Reykjavik and found our Airbnb apartment, which wasn&amp;rsquo;t ready yet since it was early in the morning. However, A1 and A2 were extremely happy that they found a couple playgrounds. One of the playgrounds (64.141723, -21.922235) had an awesome zipline where A1 and A2 spent quite a bit of time.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/zipline.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;We then visited the magnificent Hallgrimskirkja church, which is considered the most beautiful church in Reykjavik. Going to the top (about 400 or 500 ISK per person) gives you a awesome view of Reykjavik in all directions.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: In my humble opinion, the view on top was not impressive. I didn&amp;rsquo;t think it was worth the cost or hike. Inside the church, however, was wonderfully calm. When were there, an organist was playing the organ. I could spend more time there listening and taking in the impressive interior.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/hallgrimskirkja.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;While we were there, we also stopped by Reykjavik Roasters for a quick cup of java and some pastry. In general we found the food to be pretty expensive there.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: The pastries at Reykjavik Roasters were delicious. We had crossiants and scone. The jam and butter were wonderfully fresh.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/roaster.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;From Hallgrimskirkja, we walked to the Kolaporti√∞ flea market. Unfortunately it was not the best use of our time. Unless you are really into old stuff from flea markets, I would recommend avoiding this.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: Kolaporti√∞ flea market would have been a Goodwill not a flea market. I was hoping to see Icelandic antiques but what I saw were old crocs and new cheap plastic things from China.&lt;/em&gt; :-/&lt;/p&gt;

&lt;p&gt;However, during our walk to the flea market we were able to see the city a bit and reminds me of  Copenhagen. One thing we did notice is that there&amp;rsquo;s a lot of graffitis around.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: The graffitis added more colour and textures to the city. I wish I wasn&amp;rsquo;t as jet legged in order to enjoy them more.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/graffiti.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;After checking into the apartment and taking a nap, the kids wanted to go to a swimming pool. They have been wanting to go ever since they learned that every town has a public swimming pool. The Sundh√∂ll swimming pool which is only a block from our apartment is the oldest swimming pool in the center of Reykjavik. Apparently lots of locals like to come to the pool early in the morning before starting their day. Unfortunately the two closest to us (including Sundh√∂ll) are both closed for rennovation. So we ended up in Vesturb√¶jarlaug which is about 10 minutes drive away.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: Swimming pool and tramperlines seem to big part of Icelandic culture. After you paid at the pool, you can take off your shoes and socks. Icelanders seem to have a protocol of when to take of shoes and put them on in the pool. I can&amp;rsquo;t say I haven&amp;rsquo;t grasped the routine yet. Like A1 and A2 said, you are required to bath without swim suits on. There are diagram in the ladies locker room to show you which area of your body that you need to soap up. I have seen tourist being sent back to the shower if they come out of the locker dry at Myvatn Nature Baths. Of all the pools we have been, each has high chairs for mums to place their little wiggle bugs in while getting clean/dress. They also have little bath tubs which you could fill with water for your little nes to entertain themselves while getting clean/dress. What a thought!! Soaps are provide at all swimming pool. But if you want your fancy bath products, bring your own. Obiviously bring your own towels. One last thing, you are not allowed to bring cameras/mobile phones into the swimming area. So you can check them at the front desk or put them in the locker. Lifeguards are on the pool premise. But they don&amp;rsquo;t patrol the pool like the US. There seems to be a good understanding that parents will keep an eye on their children (as they should) while soaking in the shallow warm pools. I see parents who either take turn in playing with their infants in the shallow pools or sometimes slips a couple of floaties on their toddlers&amp;rsquo; arms as soon as they get to the pool. Arm floaties are free and abundant at all the pools we have been. Sidenote: Iceland is an incredibly safe coountry. We have enjoyed all the days we speant there. The only mishap we had was at Westman Island. Upon fulfilling their dreams of playing at the &amp;ldquo;BEST&amp;rdquo; swimming pool in Iceland, A1 came out of the locker room without his long sleeve shirt, underwear (!!!) and his half of his REI pants (we unzipped the lower part of the pant legs to dry from our earlier beach outting). The pool front desk told us that it was the second incident that day. Once the staffs found out that A1 had no change of clothes, they went into the closet of all the abandoned clothes and gave him a smashing outfit. In the track pants he received, there was 1000 IKS. A1 did the right thing and returned the 1000 to the pool staffs. This is one incident that left all of us slightly puzzled, grossed out and tickeled.&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&#34;day-2-golden-circle-√æingvellir-strokkur-gullfoss-keri√∞:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Day 2 - Golden Circle (√ûingvellir, Strokkur, Gullfoss, Keri√∞)&lt;/h3&gt;

&lt;p&gt;The second day of the trip was all about the Golden Circle. If you have just a short time (say 2-3 days) in Iceland, it&amp;rsquo;s definitely spending a day here. There&amp;rsquo;s plenty of tour companies that will take you around if you don&amp;rsquo;t have a car. We pretty much did the standard tour of √ûingvellir, Strokkur, Gullfoss, and Keri√∞.&lt;/p&gt;

&lt;p&gt;√ûingvellir is our first real taste of the stunning scenery of Iceland. Even the bathroom had a really good view, though you had to pay for that privilege.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/thingvellir.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;The kids also had a ton of fun playing by the river. The only thing is there are a TON of flies which I couldn&amp;rsquo;t stand. That&amp;rsquo;s one thing you will notice in most of the places &amp;ndash; there are a TON of flies!&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/thingvellir2.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;Strokkur Geysir is another standard stop on the Golden Circle. It supposedly was the first geyser described in a printed source and the first known to modern Europeans. The English word geyser derives from Geysir. We were told the geysir erupts every 10 minutes or so, which seems about right. We saw quite a few eruptions when we were there.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/geysir.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;It&amp;rsquo;s also worth doing the little hike up to the top of the &amp;ldquo;hill&amp;rdquo; to see the beautiful view of the whole valley.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/geysir2.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;The third stop of Golden Circle is Gullfoss waterfall. This is the first waterfall we saw in Iceland and was definitely worth seeing. It is also one of the waterfalls you need to have waterproof jacket on if you want to get close to it.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/gullfoss.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;The final stop for the Golden Circle was Keri√∞, which is a volcanic crater lake created as the land moved over a localized hotspot (according to Wikipedia). Keri√∞‚Äôs caldera is one of the three most recognizable volcanic craters because at approximately 3,000 years old, it is only half the age of most of the surrounding volcanic features.&lt;/p&gt;

&lt;p&gt;A2 the explorer had a ton of fun walking around the lake (twice!). One thing to remember is the walk down to the lake is pretty steep sand surface. A2 had quite a scare as she RAN down hill by mistake and I couldn&amp;rsquo;t reach her fast enough. She was smart enough to grab onto the back of a bench, otherwise she would have been swimming in the lake.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: This is another reasons to wear good grip shoes!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/kerio.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;As we were driving back from the Golden Circle, we also found a few unexpected places. One of them is an abandoned (and creepy looking) hotel (64.019916,-21.397170) that has a geothermal pool next to it. B and the kids thought that was a great discovery as the only way we saw the pool is after we hiked up a uncharted steep hill.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: Although it was spooky to find an abandon hotel and desserted geothermal pool. I wish we could spend more time to take this special find in. There were no other tourist in sight except us.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/rundown.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;day-3-into-the-glacier-driving-to-westfjords:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Day 3 - Into the Glacier, Driving to Westfjords&lt;/h3&gt;

&lt;p&gt;On day 3, we departed our Reykjavik apartment and ready to head up to Westfjords. We first stopped by B√≥nus as the Westfjords guesthouse owner told us to make sure we stock up on food before going there because the closest supermarket is like 140 kilometers away.&lt;/p&gt;

&lt;p&gt;Before Westfjords, we went to our our &lt;a href=&#34;https://intotheglacier.is/tour/your-into-the-glacier-adventure-the-classic-tour/&#34;&gt;Into the Glacier Adventure Tour&lt;/a&gt;. Into the Glacier offers various tours to Iceland‚Äòs most significant new attraction, the man ‚Äì made ice cave. The ice tunnel and the caves are located high on Europe‚Äòs second largest glacier, &lt;a href=&#34;https://intotheglacier.is/about/&#34;&gt;Langj√∂kull&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;After driving a couple hours to H√∫safell, we took the tour bus to the Klaki base camp (~30-40 minutes).
The road from H√∫safell to Klaki is a F road, which means 2WD cars cannot drive there. However, if you had your own 4WD, you can drive to the base camp yourself. And then from there, we took another ~30 minute ride on a glacier truck to get to the entrance of the glacier tunnel (64.627748, -20.486248). The glacier UN truck apparently is from Germany and was used to transport missiles.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/glacier_entrance.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;Here are some interesting facts about the glacier tunnel:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;It took 4 years to prepare for the project and 14 months for the excavation.&lt;/li&gt;
&lt;li&gt;5,500 m^3 of ice were exacavated for the tunnel and that only makes up 0.00275% of the overall glacier.&lt;/li&gt;
&lt;li&gt;The tunnel is 500 meters long and the largest of its kind in the world.&lt;/li&gt;
&lt;li&gt;We were 40 meters below the surface of the glacier, with 200 meters of solid ice still benneath us.&lt;/li&gt;
&lt;li&gt;One of the crevasse we walked by is 40 meters deep and a few hundred meters long.&lt;/li&gt;
&lt;li&gt;Sadly, the overall surface of the Langj√∂kull glacier is receding at 2 meters per year due to global warming.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/intoglacier2.jpg&#34; width=&#34;800&#34;&gt;
&lt;img src=&#34;http://zhen.org/images/iceland2016/intoglacier3.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;The kids had a lot of fun checking out the tunnels and tasting the glacier water. In fact, they said this is one of the best attractions in Iceland.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: Glacier water is delicious!! The Iceland often claims that we are drinking 1000 year old water! Glacier fuilfills 80% of Iceland&amp;rsquo;s water supplies.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/intoglacier1.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;After the glacier tour, we started our long drive to √ìlafsfj√∂r√∞ur, Westfjords where our guest house awaits. The road into Westfjords was mostly paved until we hit the fjords. From there, we were driving mostly on gravel roads. We didn&amp;rsquo;t know it at the time, but those roads were actually pretty good compared to what was to come.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/gravelroad.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;The drive took us longer than expected partly because of the gravel road, but also partly because of the beautiful sceneries of the fjords. We stopped countless times to try to capture the stunning views. It was around 9:30PM when we noticed the sunset and it lasted until almost midnight.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/westfjords1.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;day-4-dynjandi-swimming-pool-l√°trabjarg:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Day 4 - Dynjandi, Swimming Pool, L√°trabjarg&lt;/h3&gt;

&lt;p&gt;Our schedule on day 4 was a bit tough as I had a work call that I needed to take mid-afternoon. Thanks to the long days (~22 hours of day light), we were able to break our day into 2 halves and went to Dynjandi waterfall in the morning and went to L√°trabjarg in the evening.&lt;/p&gt;

&lt;p&gt;After a quick breakfast, we started driving to the waterfall. Again, it was gravel roads the whole time, and this time a bit worse than the gravel roads on the way into Westfjords. We also stopped at many places to take pictures. There was lakes and streams like this picture (65.646911,-23.265231) everywhere.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/westfjords2.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;We also saw beautiful cloud-covered valleys. And all these were before we even got to our destination.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/westfjords3.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;Finally we arrived at Dynjandi waterfall, which is actually a series of waterfalls with a cumulative height of 100 metres (330 ft). It is by far one of the most beautiful waterfalls we saw in Iceland. I think all of us rated it the highest amongst all of the waterfalls we visited.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: If you are there early, there may still be fog covering the top of the waterfall. Like A2 said&amp;hellip;&amp;ldquo;it looked like it was pouring out of the sky.&amp;rdquo; A sight to be treasured for a long time to come&amp;hellip;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/dynjandi1.jpg&#34; width=&#34;800&#34;&gt;
&lt;img src=&#34;http://zhen.org/images/iceland2016/dynjandi2.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;Later in the evening, after my call and some swimming time for the kids, we headed out to L√°trabjarg. It is &lt;a href=&#34;http://www.westfjords.is/en/other/place/latrabjarg&#34;&gt;described as&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The cliffs of all cliffs, L√°trabjarg, are home to birds in unfathomable numbers. This westernmost point of Iceland (and Europe if Greenland and the Azores are not counted) is really a line of several cliffs, 14 kilometres long and up to 441 m high. And it&amp;rsquo;s as steep as it gets, dizzyingly so.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/birdcliff.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;Also, according to &lt;a href=&#34;https://en.wikipedia.org/wiki/L√°trabjarg&#34;&gt;Wikipedia&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The cliffs are home to millions of birds, including puffins, northern gannets, guillemots and razorbills. It is vital for their survival as it hosts up to 40% of the world population for some species e.g. the Razorbill. It is Europe&amp;rsquo;s largest bird cliff, 14km long and up to 440m high.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/puffins.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;The drive to L√°trabjarg is by far one of the worst. The gravel road going there is full of potholes and sharp rocks. We even saw a big SUV had one of its tires blow out. I don&amp;rsquo;t think I drove more than 40 kmh most of the time. But at the end we think it&amp;rsquo;s well worth it.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: If you plan to go see the puffins, please go in the evening. You will likely to catch more (with your camera) because they are home for a much needed rest after a day out at sea for food. This is a spot I could stay long to take more pictures&amp;hellip;or in hope to get better pictures.&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&#34;day-5-reykjafjardarlaug-hot-pool-melanesrif:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Day 5 - Reykjafjardarlaug Hot Pool, Melanesrif&lt;/h3&gt;

&lt;p&gt;The guest house owner recommended the Reykjafjardarlaug Hot Pool (65.623331, -23.468465) to us. It is next to an abandoned swimming pool. There&amp;rsquo;s a shack where one can change. It turned out to be a great little spot where some visitors will stop and take a dip in this naturally heated pool. The hot pool has three sections with each having a different temperature. B really wanted to go so we went and spent sometime bathing in it.&lt;/p&gt;

&lt;p&gt;Melanesrif is another recommendation from the owner. Westfjords is known for its miles-and-miles of golden sand beach and this is one of them.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/melanesrif1.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;We got there during tide change, and was able to watch the tide come in (actually got chased by the tide a bit). You can see from the following picture of the before and after of the beach. The tide also made these really interesting patterns.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: Be aware of the tide schedule. I can imagine it could get dicey if you have little ones in tow and are not careful.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/melanesrif2.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;day-6-erpsstadir-cottage-driving-to-√≥lafsfj√∂r√∞ur:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Day 6 - Erpsstadir Cottage, Driving to √ìlafsfj√∂r√∞ur&lt;/h3&gt;

&lt;p&gt;Day 6 - time for us to say goodbye to Westfjords. We had a long drive to √ìlafsfj√∂r√∞ur in the North. I originally planned to stop by a couple of places but ended up abandoning the plan as it will make the drive too long. We did however stop at Erpsstadir Cottage (65.000469, -21.625192) which has a &lt;a href=&#34;http://grapevine.is/culture/food/2015/07/02/a-visit-to-the-erpsstadir-ice-cream-valley/&#34;&gt;solid reputation&lt;/a&gt; for artisan ice cream and a range of other small-batch dairy products.&lt;/p&gt;

&lt;p&gt;We met the raven, which supposedly is a famous bird for some reason, that the owner kept as pet, saw the cows (and pigs) and bought some ice cream and white chocolate they produced. I would say this is a place worth stopping if it&amp;rsquo;s on your way (which for most people driving the ring road it should be), but no need to make a special out-of-way trip for it.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/erpsstadir.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;The North in general is flatter and more green.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/north.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;Maybe we were spoiled by the beautiful sceneries in Westfjords, we didn&amp;rsquo;t find the drive to the North as pretty. Well, until we saw the snow covered mountains surrounded by clouds, over the ocean. From there, we made multiple stops trying to capture the view, but ultimately failed.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/north2.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;day-7-√≥lafsfj√∂r√∞ur-swimming-pool-tvistur-horseback-riding:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Day 7 - √ìlafsfj√∂r√∞ur Swimming Pool, Tvistur Horseback Riding&lt;/h3&gt;

&lt;p&gt;Day 7 is a slow day. I originally planned for us to go whale watching, but B insisted that we let the kids sleep in and take it easy, given they had a long day stuck in the car. After the kids woke up, they went down to the public swimming pool (see the yellow spiral tube in the picture below) and spent a couple of hours there. One thing I will say is the Icelanders sure knows how to build public pools that are fun for the kids.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/olafsfjordur.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;In the afternoon, we went for a nice horseback riding tour at Tvistur Horse Rental. We rode along a river and enjoyed the sceneries there.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: It was great fun for the whole family to ride together. Althought none of us are horse connoisseurs to fully appreciate the unique offerings of Icelandic horses, we had a great time riding with the owners of the horse farm. They took us along the river and actually crossing the river on horsebacks! Sidenotes: I also fell off my horse because of loose saddle. Luckily I grabbed onto the horse&amp;rsquo;s mane before falling off completely. Also, taking pictures on horseback is a challenge. My iPhone fell off my hand. The horses took pity on me and didn&amp;rsquo;t stepped on it.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/horseriding.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;day-8-g√≥√∞afoss-grj√≥tagj√°-myvatn-nature-baths:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Day 8 - G√≥√∞afoss, Grj√≥tagj√°, Myvatn Nature Baths&lt;/h3&gt;

&lt;p&gt;On day 8, we drove to the Lake Myvatn area. The first stop is the G√≥√∞afoss, or the waterfall of the gods. It is one of the more spectacular waterfalls in Iceland due to the width of 30 meters! While the waterfall is great, the kids had more fun jumping from rock to rock.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/godafoss.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;The second stop is the Grj√≥tagj√° cave. It was a popular bathing place until the 1975-84 vulcanic eruptions at Krafla brought magma streams under the area resulting in a sharp rise in water temperature to nearly 60 degrees centigrade. Today the water is around 43-46 degrees. In the following picture you can see steam coming from the heated water. The water itself is extremely clear and even with a blue tint.&lt;/p&gt;

&lt;p&gt;It is also somewhat famous as it was featured in Game of Thrones where Jon Snow broke his vows in the cave (this is a kids friendly blog!) You can see A1 doing a bit of spelunking here.&lt;/p&gt;

&lt;p&gt;If you are going to this cave, don&amp;rsquo;t follow Google Maps. This is one of the very few occasions that Google Maps failed us. It&amp;rsquo;s actually pretty easy to find as it&amp;rsquo;s right on Road 860. Just turn into 860 from Highway 1 and you will see a small parking lot after driving a bit.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/grjotagja.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;The last stop of the day is to the &lt;a href=&#34;http://www.myvatnnaturebaths.is&#34;&gt;Myvatn Nature Baths&lt;/a&gt;. We chose to go to this one instead of the Blue Lagoon because it&amp;rsquo;s less touristy according to many who went there. Later on we were told that the Blue Lagoon doesn&amp;rsquo;t drain! (Not fact checked so take it with a grain of salt.)&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/naturebaths.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;day-9-dettifoss-driving-to-h√∂fn:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Day 9 - Dettifoss, Driving to H√∂fn&lt;/h3&gt;

&lt;p&gt;We departed the North (√ìlafsfj√∂r√∞ur, Akureyri, Lake Myvatn) on day 9 and started our journey to H√∂fn. However, we had to make one more stop at the Dettifoss waterfall, which is considered one of the most powerful waterfall in Europe, and the largest in Iceland by volume discharged. It is 100 metres (330 ft) wide and have a drop of 45 metres (150 ft) down to the J√∂kuls√°rglj√∫fur canyon, and have an average water flow of 193 m^3/second. Raincoat definitely recommended for this one.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/dettifoss.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;The drive to H√∂fn was made complicated because we were driving through heavy fog in several areas. In one case we drove probably for a good 20-30 minutes in heavy fog where we had a hard time seeing the car infront and the one behind. We also took the √ñxi pass which is a gravel road that has steep inclines and declines. The locals generally don&amp;rsquo;t recommend it as it doesn&amp;rsquo;t save much time and it&amp;rsquo;s closed during the winter.&lt;/p&gt;

&lt;p&gt;We stayed at the Dynjandi Guesthouse right outside of H√∂fn. The owner is a Icelandic native, and is extremely nice and very passionate about Iceland. She gave us a tour of her farm where she kept 35 horses and 40+ sheeps. Also explained many of the Icelandic traditions to us, as well as recommended several places to visit.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/dynjandiguesthouse.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;day-10-edge-of-glacier-ice-lagoon-zodiac-boat-tour-driving-to-vik:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Day 10 - Edge of Glacier, Ice Lagoon Zodiac Boat Tour, Driving to Vik&lt;/h3&gt;

&lt;p&gt;On the Dynjandi Guesthouse owner&amp;rsquo;s recommendation, we headed out in the morning to see the glacier by Hoffell. It took us a good 30 minutes to drive 5 kilometers of gravel road to finally get to the edge of the glacier (64.418780,-15.403394).&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/glacieredge.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;Day 10&amp;rsquo;s main event is the &lt;a href=&#34;http://icelagoon.is/zodiac-tours/&#34;&gt;Ice Lagoon Zodiac Boat Tour&lt;/a&gt;. It is by far a better tour compare to the Amphibian Boat Tour, if you can stomach the ride to the glacier wall, as the rides on high speed rafts can be quite bumpy. The tour actually doesn&amp;rsquo;t recommend bringing children under the age of 10, but A2 was 8 and was fine. She was grinning ear to ear while she bummed along for the long ride to the edge of the glacier.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/blueice.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;On the Zodiac we are able to cover large areas of the lagoon and get closer to the icebergs than on the amphibian. When possible the Zodiac goes almost all the way up to the glacier (as close as safe). Passengers are provided with flotation suites (very warm) and a life jacket.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/icelagoonglaciers.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;The kids also had a lot of fun playing by the lagoon and making ice stacks.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/icelagoon.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;After the lagoon, we drove straight to Vik.&lt;/p&gt;

&lt;h3 id=&#34;day-11-reynisfjara-vestmannaeyjum-seljalandsfoss-driving-to-reykjanesb√¶r:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Day 11 - Reynisfjara, Vestmannaeyjum, Seljalandsfoss, Driving to Reykjanesb√¶r&lt;/h3&gt;

&lt;p&gt;According to &lt;a href=&#34;https://guidetoiceland.is/travel-iceland/drive/reynisfjara&#34;&gt;Guide to Iceland&lt;/a&gt;,&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Reynisfjara is a black pebble beach and features an amazing cliff of regular basalt columns resembling a rocky step pyramid, which is called Gardar. Out in the sea are the spectacularly shaped basalt sea stacks Reynisdrangar. The area has a rich birdlife, including puffins, fulmars and guillemots.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;We went down to Reynisfjara on the morning of day 11 and spent some time there. The kids loved the beach and played in the water even though it was cold. The view was certainly magnificent.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/reynisfjara.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;After the beach, we took the ferry (Herjolfur) to Vestmannaeyjum, or the Westman Islands. According to &lt;a href=&#34;https://en.wikipedia.org/wiki/Vestmannaeyjar&#34;&gt;Wikipedia&lt;/a&gt;,&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Vestmannaeyjar is a town and archipelago off the south coast of Iceland. The largest island, Heimaey, has a population of 4,135. The other islands are uninhabited, although six have single hunting cabins.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;We spent most of our time there at the public pool and eating the best meal in Iceland.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/westman.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;p&gt;Our last attraction stop of the Iceland trip is the Seljalandsfoss waterfall which is interesting because visitors can go behind the waterfall via a small trail. Again, waterproof jacket highly recommended.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/iceland2016/seljalandsfoss.jpg&#34; width=&#34;800&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;day-12-shopping-departure:11208273a86a5c372f15c22e8b47f0c9&#34;&gt;Day 12 - Shopping, Departure&lt;/h3&gt;

&lt;p&gt;Day 12 and our final day in Iceland before heading back to the US. We did mostly shopping in the morning before returning the car to IceRentalCars and taking the shuttle to the airport.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;B Notes: We didn&amp;rsquo;t eat fermented shark or other exotic treats but we had an amazing time in beautiful Iceland. We are bequeathed with fond memories by vast and picturesque landscape as well as genersity of Icelanders. This trip has opened our hearts and taught us more things than we have ever expected.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Security Companies in Silicon Valley</title>
      <link>http://zhen.org/blog/security-companies-in-silicon-valley/</link>
      <pubDate>Fri, 10 Jun 2016 20:57:56 -0800</pubDate>
      
      <guid>http://zhen.org/blog/security-companies-in-silicon-valley/</guid>
      <description>&lt;p&gt;Here&amp;rsquo;s a Google map of the security companies in Silicon Valley.&lt;/p&gt;

&lt;iframe src=&#34;https://www.google.com/maps/d/embed?mid=1fxzcNT38ZFENib2OAtSvO3X0f08&#34; width=&#34;1024&#34; height=&#34;768&#34;&gt;&lt;/iframe&gt;
</description>
    </item>
    
    <item>
      <title>A Modern App Developer and An Old School System Developer Walk Into a Bar</title>
      <link>http://zhen.org/blog/two-developers-walk-into-a-bar/</link>
      <pubDate>Sun, 14 Feb 2016 10:57:56 -0800</pubDate>
      
      <guid>http://zhen.org/blog/two-developers-walk-into-a-bar/</guid>
      <description>

&lt;p&gt;Note: Thanks for all the great comments and feedback here and on &lt;a href=&#34;https://news.ycombinator.com/item?id=11099925&#34;&gt;Hacker News&lt;/a&gt;. Please keep them coming. I learned a ton and I am sure others will also.&lt;/p&gt;

&lt;p&gt;&lt;i class=&#34;fa fa-heart&#34;&gt;&lt;/i&gt; &lt;i class=&#34;fa fa-heart&#34;&gt;&lt;/i&gt; Happy Valentine&amp;rsquo;s Day! &lt;i class=&#34;fa fa-heart&#34;&gt;&lt;/i&gt; &lt;i class=&#34;fa fa-heart&#34;&gt;&lt;/i&gt;&lt;/p&gt;

&lt;p&gt;A modern app developer and an old school system developer walk into a bar. They had a couple drinks and started talking about the current state of security on the Internet. In a flash of genius, they both decided it would be useful to map the Internet and see what IPs have vulnerable ports open. After some discussion, they decided on the following&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;They will port scan all of the IPv4 address (2^32=4,294,967,296) on a monthly basis&lt;/li&gt;
&lt;li&gt;They will focus on a total of 20 ports including some well-known ports such as FTP (20, 21), telnet (23), ssh (22), SMTP (25), etc&lt;/li&gt;
&lt;li&gt;They will use nmap to scan the IPs and ports&lt;/li&gt;
&lt;li&gt;They need to store the port states as &lt;a href=&#34;https://nmap.org/book/man-port-scanning-basics.html&#34;&gt;open, closed, filtered, unfiltered, openfiltered and closedfiltered&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;They also need to store whether the host is up or down. One of the following two conditions must be met for a host to be &amp;ldquo;up&amp;rdquo;:

&lt;ul&gt;
&lt;li&gt;If the host has any of the ports open, it would be considered up&lt;/li&gt;
&lt;li&gt;If the host responds to ping, it would be considered up&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;They will store the results so they can post process to generate reports, e.g.,

&lt;ul&gt;
&lt;li&gt;Count the Number of &amp;ldquo;Up&amp;rdquo; Hosts&lt;/li&gt;
&lt;li&gt;Determine the Up/Down State of a Specific Host&lt;/li&gt;
&lt;li&gt;Determine Which Hosts are &amp;ldquo;Up&amp;rdquo; in a Particular /24 Subnet&lt;/li&gt;
&lt;li&gt;Count the Number of Hosts That Have Each of the Ports Open&lt;/li&gt;
&lt;li&gt;How Many Total Hosts Were Seen as &amp;ldquo;Up&amp;rdquo; in the Past 3 Months?&lt;/li&gt;
&lt;li&gt;How Many Hosts Changed State This Month (was &amp;ldquo;up&amp;rdquo; but now &amp;ldquo;down&amp;rdquo;, or was &amp;ldquo;down&amp;rdquo; but now &amp;ldquo;up&amp;rdquo;)&lt;/li&gt;
&lt;li&gt;How Many Hosts Were &amp;ldquo;Down&amp;rdquo; Last Month But Now It&amp;rsquo;s &amp;ldquo;Up&amp;rdquo;&lt;/li&gt;
&lt;li&gt;How Many Hosts Were &amp;ldquo;Up&amp;rdquo; Last Month But Now It&amp;rsquo;s &amp;ldquo;Down&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;modern-app-developer-vs-old-school-developer:81495eb0cd198863461f6e4666c91616&#34;&gt;Modern App Developer vs Old School Developer&lt;/h2&gt;

&lt;p&gt;Let&amp;rsquo;s assume 300 million IPs are up, and has an average of 3 ports open.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;How would you architect this?&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;Which approach is faster for each of these tasks?&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;Which approach is easier to extend, e.g., add more ports?&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;Which approach is more resource (cpu, memory, disk) intensive?&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Disclaimer: I don&amp;rsquo;t know ElasticSearch all that well, so feel free to correct me on any of the following.&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&#34;choose-a-language:81495eb0cd198863461f6e4666c91616&#34;&gt;Choose a Language&lt;/h3&gt;

&lt;p&gt;Modern App Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I will use Python. It&amp;rsquo;s quick to get started and easy to understaind/maintain.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Old School Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I will use Go. It&amp;rsquo;s fast, performant, and easy to understand/maintain!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;store-the-host-and-port-states:81495eb0cd198863461f6e4666c91616&#34;&gt;Store the Host and Port States&lt;/h3&gt;

&lt;p&gt;Modern App Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I will use JSON! It&amp;rsquo;s human-readable, easy to parse (i.e., built in libraries), and everyone knows it!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;pre&gt;&lt;code&gt;{
	&amp;quot;ip&amp;quot;: &amp;quot;10.1.1.1&amp;quot;,
	&amp;quot;state&amp;quot;: &amp;quot;up&amp;quot;,
	&amp;quot;ports&amp;quot;: {
		&amp;quot;20&amp;quot;: &amp;quot;closed&amp;quot;,
		&amp;quot;21&amp;quot;: &amp;quot;closed&amp;quot;,
		&amp;quot;22&amp;quot;: &amp;quot;open&amp;quot;,
		&amp;quot;23&amp;quot;: &amp;quot;closed&amp;quot;,
		.
		.
		.
	}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;
&lt;p&gt;For each host, I will need approximately 400 bytes to represent the host, the up/down state and the 20 port states.&lt;/p&gt;

&lt;p&gt;For 300 million IPs, it will take me about 112GB of space to store all host and port states.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Old School System Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I will use one bit array (memory mapped file) to store the host state, with 1 bit per host. If the bit is 1, then the host up; if it&amp;rsquo;s 0, then the host is down.&lt;/p&gt;

&lt;p&gt;Given there are 2^32 IPv4 addresses, the bit array will be 2^32 / 8=536,870,912 or 512MBs&lt;/p&gt;

&lt;p&gt;I don&amp;rsquo;t need to store the IP address separately since the IPv4 address will convert into a number, which can then be used to index into the bit array.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;I will then use a second bit array (memory mapped file) to store the port states. Given there are 6 port states, I will use 3 bits to represent each port state, and 60 bits to represent the 20 port states. I will basically use one uint64 to represent the port states for each host.&lt;/p&gt;

&lt;p&gt;For all 4B IPs, I will need approximately 32GB of space to store the port states. Together, it will take me about 33GB of space to store all host and port states.&lt;/p&gt;

&lt;p&gt;I can probably use &lt;a href=&#34;http://zhen.org/blog/bitmap-compression-using-ewah-in-go/&#34;&gt;EWAH bitmap compression&lt;/a&gt;
 to gain some space efficiency, but let&amp;rsquo;s assume we are not compressing for now. Also if I do EWAH bitmap compression, I may lose out on the ability to do population counting (see below).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;count-the-number-of-up-hosts:81495eb0cd198863461f6e4666c91616&#34;&gt;Count the Number of &amp;ldquo;Up&amp;rdquo; Hosts&lt;/h3&gt;

&lt;p&gt;Modern App Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This is a big data problem. Let&amp;rsquo;s use Hadoop!&lt;/p&gt;

&lt;p&gt;I will write a map/reduce hadoop job to process all 300 million host JSON results (documents), and count all the IPs that are &amp;ldquo;up&amp;rdquo;.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Maybe this is a search problem. Let&amp;rsquo;s use ElasticSearch!&lt;/p&gt;

&lt;p&gt;I will index all 300M JSON documents with ElasticSearch (ES) on the &amp;ldquo;state&amp;rdquo; field. Then I can just run a query that counts the results of the search where &amp;ldquo;state&amp;rdquo; is &amp;ldquo;up&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;I do realize there&amp;rsquo;s additional storage required for the ES index. Let&amp;rsquo;s assume it&amp;rsquo;s &lt;sup&gt;1&lt;/sup&gt;&amp;frasl;&lt;sub&gt;8&lt;/sub&gt; of the original document sizes. This means there&amp;rsquo;s possibly another 14GB of index data, bringing the total to 126GB.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Old School System Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This is a &lt;a href=&#34;https://github.com/zhenjl/bitmap/blob/master/ewah/bitcounter.go#L69&#34;&gt;bit counting&lt;/a&gt;, or &lt;em&gt;popcount()&lt;/em&gt;, problem. It&amp;rsquo;s just simple math. I can iterate through the array of uint64&amp;rsquo;s (~8.4M uint64&amp;rsquo;s), count the bits for each, and add them up!&lt;/p&gt;

&lt;p&gt;I can also split the work by creating multiple goroutines (assuming Go), similar to map/reduce, to gain faster calculation.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;determine-the-up-down-state-of-a-specific-host:81495eb0cd198863461f6e4666c91616&#34;&gt;Determine the Up/Down State of a Specific Host&lt;/h3&gt;

&lt;p&gt;Modern App Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I know, this is a search problem. Let&amp;rsquo;s use ElasticSearch!&lt;/p&gt;

&lt;p&gt;I will have ElasticSearch index the &amp;ldquo;ip&amp;rdquo; field, in addition to the &amp;ldquo;state&amp;rdquo; field from earlier. Then for any IP, I can search for the document where &amp;ldquo;ip&amp;rdquo; equals the requested IP. From that document, I can then find the value of the &amp;ldquo;state&amp;rdquo;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Old School System Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This should be easy. I just need to index into the bit array using the integer value of the IPv4, and find out if the bit value is 1 or 0.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;determine-which-hosts-are-up-in-a-particular-24-subnet:81495eb0cd198863461f6e4666c91616&#34;&gt;Determine Which Hosts are &amp;ldquo;Up&amp;rdquo; in a Particular /24 Subnet&lt;/h3&gt;

&lt;p&gt;Modern App Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This is similar to searching for a single IP. I will search for documents where IP is in the subnet (using CIDR notation search in ES) AND the &amp;ldquo;state&amp;rdquo; is &amp;ldquo;up&amp;rdquo;. This will return a list of search results which I can then iterate and retrieve the host IP.&lt;/p&gt;

&lt;p&gt;Or&lt;/p&gt;

&lt;p&gt;This is a map reduce job that I can write to process the 300 million JSON documents and return all the host IPs that are &amp;ldquo;up&amp;rdquo; in that /24 subnet.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Old School System Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This is just another bit iteration problem. I will use the first IP address of the subnet to determine where in the bit array I should start. Then I calculate the number of IPs in that subnet. From there, I just iterate through the bit array and for every bit that&amp;rsquo;s 1, I convert the index of that bit into an IPv4 address and add to the list of &amp;ldquo;Up&amp;rdquo; hosts.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;count-the-number-of-hosts-that-have-each-of-the-ports-open:81495eb0cd198863461f6e4666c91616&#34;&gt;Count the Number of Hosts That Have Each of the Ports Open&lt;/h3&gt;

&lt;p&gt;For example, the report could simply be:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;20: 3,023
21: 3,023
22: 1,203,840
.
.
.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Modern App Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This is a big data problem. I will use Hadoop and write a map/reduce job. The job will return the host count for each of the port.&lt;/p&gt;

&lt;p&gt;This can probably also be done with ElasticSearch. It would require the port state to be index, which will increase the index size. I can then count the results for the search for ports 22 = &amp;ldquo;open&amp;rdquo;, and repeat for each port.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Old School System Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This is a simple counting problem. I will walk through the host state bit array, and for every host that&amp;rsquo;s up, I will use the bit index to index into the port state uint64 array and get the uint64 that represents all the port states for that host. I will then walk through each of the 3-bit bundles for the ports, and add up the counts if the port is &amp;ldquo;open&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;Again, this can easily be paralleized by creating multiple goroutines (assuming Go).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;how-many-total-hosts-were-seen-as-up-in-the-past-3-months:81495eb0cd198863461f6e4666c91616&#34;&gt;How Many Total Hosts Were Seen as &amp;ldquo;Up&amp;rdquo; in the Past 3 Months&lt;/h3&gt;

&lt;p&gt;Modern App Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I can retrieve the &amp;ldquo;Up&amp;rdquo; host list for each month, and then go through all 3 lists and dedup into a single list. This would require quite a bit of processing and iteration.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Old School System Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I can perform a simple OR operation on the 3 monthly bit arrays, and then count the number of &amp;ldquo;1&amp;rdquo; bits.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;_Note: I fixed the original AND to OR based on a &lt;a href=&#34;https://news.ycombinator.com/item?id=11100213&#34;&gt;comment from HN&lt;/a&gt;. Not sure what I was thinking when I typed AND&amp;hellip;duh!&lt;/p&gt;

&lt;h3 id=&#34;how-many-hosts-changed-state-this-month-was-up-but-now-down-or-was-down-but-now-up:81495eb0cd198863461f6e4666c91616&#34;&gt;How Many Hosts Changed State This Month (was &amp;ldquo;up&amp;rdquo; but now &amp;ldquo;down&amp;rdquo;, or was &amp;ldquo;down&amp;rdquo; but now &amp;ldquo;up&amp;rdquo;)&lt;/h3&gt;

&lt;p&gt;Modern App Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Hm&amp;hellip;I am not sure how to do that easily. I guess I can just iterate through last month&amp;rsquo;s hosts, and for each host check to see if it changed state this month. Then for each host that I haven&amp;rsquo;t checked this month, iterate and check that list against last month&amp;rsquo;s result.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Old School System Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I can perform a simple XOR operation on the bit arrays from this and last month. Then count the number of &amp;ldquo;1&amp;rdquo; bits of the resulting bit array.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;how-many-hosts-were-up-last-month-but-now-it-s-down:81495eb0cd198863461f6e4666c91616&#34;&gt;How Many Hosts Were &amp;ldquo;Up&amp;rdquo; Last Month But Now It&amp;rsquo;s &amp;ldquo;Down&amp;rdquo;&lt;/h3&gt;

&lt;p&gt;Modern App Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I can retrieve the &amp;ldquo;Up&amp;rdquo; hosts from last month from ES, then for each &amp;ldquo;Up&amp;rdquo; host, search for it with the state equals to &amp;ldquo;Down&amp;rdquo; this month, and accumulate the results.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Old School System Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I can perform this opeartion: &lt;code&gt;(this_month XOR last_month) AND last_month&lt;/code&gt;. This will return a bit array that has the bit set if the host was &amp;ldquo;up&amp;rdquo; last month but now it&amp;rsquo;s &amp;ldquo;down&amp;rdquo;. Then count the number of &amp;ldquo;1&amp;rdquo; bits of the resulting bit array.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;how-many-hosts-were-down-last-month-but-now-it-s-up:81495eb0cd198863461f6e4666c91616&#34;&gt;How Many Hosts Were &amp;ldquo;Down&amp;rdquo; Last Month But Now It&amp;rsquo;s &amp;ldquo;Up&amp;rdquo;&lt;/h3&gt;

&lt;p&gt;Modern App Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I can retrieve the &amp;ldquo;Down&amp;rdquo; hosts from last month from ES, then for each &amp;ldquo;Down&amp;rdquo; host, search for it with the state equals to &amp;ldquo;Up&amp;rdquo; this month, and accumulate the results.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Old School System Developer:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I can perform this opeartion: &lt;code&gt;(this_month XOR last_month) XOR this_month&lt;/code&gt;. This will return a bit array that has the bit set if the host was &amp;ldquo;down&amp;rdquo; last month but now it&amp;rsquo;s &amp;ldquo;up&amp;rdquo;. Then count the number of &amp;ldquo;1&amp;rdquo; bits of the resulting bit array.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>2016: Analyzing Security Trends Using RSA Exhibitor Descriptions</title>
      <link>http://zhen.org/blog/2016-analyzing-security-trends-using-rsa-exhibitor-descriptions/</link>
      <pubDate>Fri, 05 Feb 2016 10:57:56 -0800</pubDate>
      
      <guid>http://zhen.org/blog/2016-analyzing-security-trends-using-rsa-exhibitor-descriptions/</guid>
      <description>

&lt;p&gt;&lt;strong&gt;The data used for this post is available &lt;a href=&#34;https://github.com/zhenjl/rsaconf&#34;&gt;here&lt;/a&gt;. A word of warning, I only have complete data set for 2014-2016. For 2008-2013, I have what I consider to be representative samples. So please take the result set with a big bucket of salt.&lt;/strong&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Continuing my &lt;a href=&#34;http://zhen.org/blog/analyzing-security-trends-using-rsa-exhibitor-descriptions/&#34;&gt;analysis from last year&lt;/a&gt;, this post analyzes the exhibitors&amp;rsquo; descriptions from the annual security conference, &lt;a href=&#34;http://www.rsaconference.com/events/us16&#34;&gt;RSA 2016&lt;/a&gt;. Intuitively, the vendor marketing messages should have a high degree of correlation to what customers care about, even if the messages trail the actual pain points slightly.&lt;/p&gt;

&lt;p&gt;Some interesting findings:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The word &lt;em&gt;hunt&lt;/em&gt; has appeared for the first time since 2008. It only appeared 6 times and ranked pretty low, but that&amp;rsquo;s a first nonetheless.&lt;/li&gt;
&lt;li&gt;The word &lt;em&gt;iot&lt;/em&gt; jumped 881 spots to 192 in 2016, after showing up for the first time in 2015. This may indicate the strong interest in IoT security.&lt;/li&gt;
&lt;li&gt;There&amp;rsquo;s no mention of &lt;em&gt;docker&lt;/em&gt; in any of the years, and only 5 mentions of container in 2016. This is a bit of a surprise given the noise docker/container is making. This is likely due to most customers care more about management for new technologies than security.&lt;/li&gt;
&lt;li&gt;The word &lt;em&gt;firewall&lt;/em&gt; dropped 151 spots in 2016. I want to speculate that it is due to the dissolving of perimeters, but I can&amp;rsquo;t be sure of that.&lt;/li&gt;
&lt;li&gt;As much as noise as &lt;em&gt;blockchain&lt;/em&gt; is making, there&amp;rsquo;s no mention of the word.&lt;/li&gt;
&lt;li&gt;The word &lt;em&gt;behavior&lt;/em&gt; (as in behavioral analysis) has also gained drastically over the past few years, going from #370 in 2012 to #78 in 2016.&lt;/li&gt;
&lt;li&gt;See other findings below.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;top-words:bb7656c12180a6a78a8c54c60f6a51ce&#34;&gt;Top Words&lt;/h3&gt;

&lt;p&gt;The top words that vendors use to describe themselves haven&amp;rsquo;t changed much. The following table shows the top 10 words used in RSA conference exhibitor descriptions since 2008. You can find the complete word list &lt;a href=&#34;https://github.com/zhenjl/rsaconf&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;right&#34;&gt;#&lt;/th&gt;
&lt;th&gt;2008&lt;/th&gt;
&lt;th&gt;2009&lt;/th&gt;
&lt;th&gt;2010&lt;/th&gt;
&lt;th&gt;2011&lt;/th&gt;
&lt;th&gt;2012&lt;/th&gt;
&lt;th&gt;2013&lt;/th&gt;
&lt;th&gt;2014&lt;/th&gt;
&lt;th&gt;2015&lt;/th&gt;
&lt;th&gt;2016&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;3&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;4&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;5&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;protect&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;service&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;threat&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;6&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;information&lt;/td&gt;
&lt;td&gt;more&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;protect&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;7&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;company&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;information&lt;/td&gt;
&lt;td&gt;software&lt;/td&gt;
&lt;td&gt;software&lt;/td&gt;
&lt;td&gt;protect&lt;/td&gt;
&lt;td&gt;threat&lt;/td&gt;
&lt;td&gt;protect&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;8&lt;/td&gt;
&lt;td&gt;product&lt;/td&gt;
&lt;td&gt;service&lt;/td&gt;
&lt;td&gt;organization&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;td&gt;information&lt;/td&gt;
&lt;td&gt;threat&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;9&lt;/td&gt;
&lt;td&gt;technology&lt;/td&gt;
&lt;td&gt;software&lt;/td&gt;
&lt;td&gt;information&lt;/td&gt;
&lt;td&gt;technology&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;td&gt;service&lt;/td&gt;
&lt;td&gt;service&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;10&lt;/td&gt;
&lt;td&gt;application&lt;/td&gt;
&lt;td&gt;busy&lt;/td&gt;
&lt;td&gt;risk&lt;/td&gt;
&lt;td&gt;product&lt;/td&gt;
&lt;td&gt;more&lt;/td&gt;
&lt;td&gt;customer&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;td&gt;service&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Here&amp;rsquo;s a word cloud that shows the &lt;a href=&#34;http://zhen.org/images/rsaconf/rsa2016.png&#34;&gt;2016&lt;/a&gt; top words. You can also find word clouds for
&lt;a href=&#34;http://zhen.org/images/rsaconf/rsa2008.png&#34;&gt;2008&lt;/a&gt;,
&lt;a href=&#34;http://zhen.org/images/rsaconf/rsa2009.png&#34;&gt;2009&lt;/a&gt;,
&lt;a href=&#34;http://zhen.org/images/rsaconf/rsa2010.png&#34;&gt;2010&lt;/a&gt;,
&lt;a href=&#34;http://zhen.org/images/rsaconf/rsa2011.png&#34;&gt;2011&lt;/a&gt;,
&lt;a href=&#34;http://zhen.org/images/rsaconf/rsa2012.png&#34;&gt;2012&lt;/a&gt;,
&lt;a href=&#34;http://zhen.org/images/rsaconf/rsa2013.png&#34;&gt;2013&lt;/a&gt;,
&lt;a href=&#34;http://zhen.org/images/rsaconf/rsa2014.png&#34;&gt;2014&lt;/a&gt;,
&lt;a href=&#34;http://zhen.org/images/rsaconf/rsa2015.png&#34;&gt;2015&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/rsaconf/rsa2016.png&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;endpoint-vs-network:bb7656c12180a6a78a8c54c60f6a51ce&#34;&gt;Endpoint vs. Network&lt;/h3&gt;

&lt;p&gt;While the word &lt;em&gt;network&lt;/em&gt; has mostly maintained its top 10 position (except 2013 when it fell to #11), the big gainer is the word &lt;em&gt;endpoint&lt;/em&gt;, which improved drastically from #266 in 2012 to 2016&amp;rsquo;s #50. This may indicate that enterprises are much more accepting of endpoint technologies.&lt;/p&gt;

&lt;p&gt;I also speculate that there might be a correlation between the increase in &lt;em&gt;cloud&lt;/em&gt; and the increase in &lt;em&gt;endpoint&lt;/em&gt;. As the perimeters get dissolved due to the move to cloud, it&amp;rsquo;s much more difficult to use network security technologies. So enterprises are looking at &lt;em&gt;endpoint&lt;/em&gt; technologies to secure their critical assets.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/rsaconf/2016/endpoint-network.png&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;compliance-vs-threat:bb7656c12180a6a78a8c54c60f6a51ce&#34;&gt;Compliance vs. Threat&lt;/h3&gt;

&lt;p&gt;Not surprisingly, the use of the word &lt;em&gt;compliance&lt;/em&gt; continues to go down, and the word &lt;em&gt;threat&lt;/em&gt; continues to go up.&lt;/p&gt;

&lt;p&gt;The number of mentions for &lt;em&gt;threat intelligence&lt;/em&gt; remained at 22 for both 2015 and 2016, after jumping from 12 in 2014.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/rsaconf/2016/compliance-threat.png&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;mobile-cloud-virtual-and-iot:bb7656c12180a6a78a8c54c60f6a51ce&#34;&gt;Mobile, Cloud, Virtual and IoT&lt;/h3&gt;

&lt;p&gt;While the words &lt;em&gt;mobile&lt;/em&gt; and &lt;em&gt;cloud&lt;/em&gt; maintained their relative positioning in 2016, we can also see &lt;em&gt;virtual&lt;/em&gt; continues its slight downward trend.&lt;/p&gt;

&lt;p&gt;Interestingly, the word &lt;em&gt;iot&lt;/em&gt; made a big jump, going from position #1073 in 2015 to #193 in 2016. This potentially indicates a strong interest in security for internet of things. In general, the IoT space has seen some major activities, including &lt;a href=&#34;http://techcrunch.com/2016/02/03/cisco-buys-jasper-technologies-for-1-4-billion/&#34;&gt;Cisco&amp;rsquo;s recent acquisition of Jasper&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/rsaconf/2016/mobile-cloud.png&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;cyber-malware-and-phishing:bb7656c12180a6a78a8c54c60f6a51ce&#34;&gt;Cyber, Malware and Phishing&lt;/h3&gt;

&lt;p&gt;The word &lt;em&gt;cyber&lt;/em&gt; continues to gain popularity in the past 4 years; however, the word &lt;em&gt;malware&lt;/em&gt; has fell below the top 100, a position it maintained since 2010.&lt;/p&gt;

&lt;p&gt;The word &lt;em&gt;phishing&lt;/em&gt; made drastic gains since 2014, jumping from #807 to #193 in 2016. This may indicate that enterprises are seeing more attacks from phishing, and vendors are targeting that specific attack vector.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/rsaconf/2016/cyber-malware.png&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;it-s-all-about-behavior:bb7656c12180a6a78a8c54c60f6a51ce&#34;&gt;It&amp;rsquo;s all about Behavior!&lt;/h3&gt;

&lt;p&gt;The word &lt;em&gt;behavior&lt;/em&gt; (as in behavioral analysis) has also gained drastically over the past few years, going from #370 in 2012 to #78 in 2016.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/rsaconf/2016/behavior.png&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;credits:bb7656c12180a6a78a8c54c60f6a51ce&#34;&gt;Credits&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;The word clouds and word rankings are generated using &lt;a href=&#34;http://timdream.org/wordcloud&#34;&gt;Word Cloud&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;The actual vendor descriptions are gathered from the RSA web site as well as press releases from Business Wire and others.&lt;/li&gt;
&lt;li&gt;Charts are generated using Excel, which continues to be one of the best friends for data analysts (not that I consider myself one).&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Installing Windows 7 on Macbook Late 2008</title>
      <link>http://zhen.org/blog/installing-windows7-on-macbook-late-2008/</link>
      <pubDate>Mon, 20 Apr 2015 21:32:57 -0700</pubDate>
      
      <guid>http://zhen.org/blog/installing-windows7-on-macbook-late-2008/</guid>
      <description>&lt;p&gt;Over the weekend I wanted to install Windows in a bootcamp partition so the kids can use it to do their Chinese homework. The Chinese homework CD unfortunately only works in Windows so I had no choice!! I guess I could have taken other routes, like installing Windows in a VM or something, but I figure that Mac has this awesome tool called bootcamp, why not use that?&lt;/p&gt;

&lt;p&gt;Well, how wrong I was! I went through a whole day of head-scratching, temper-inducing, word-cussing, USB-swapping and machine-rebooting exercise of getting Windows installed in the bootcamp partition. I almost went as far as buying a replacement superdrive for the macbook, but at the end I finally was able to get Windows 7 onto the Macbook.&lt;/p&gt;

&lt;p&gt;To start, my laptop is a Macbook, Aluminum, Late 2008 (MB467LL/A) with a busted optical drive (superdrive). I originally had Mavericks running on it but before this exercise I wiped it clean and installed Yosemite on it. Because the optical drive is busted, I cannot use the Windows 7 DVD, so I had to do this using a USB flash drive.&lt;/p&gt;

&lt;p&gt;Below are the steps I took to make this work. I can&amp;rsquo;t guarantee that these steps will work for you, but it&amp;rsquo;s probably good as a reference. Having seen a ton of articles on the problems people had with bootcamp, I hope no one has to go through the troubles I went through.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;It took me a while to figure this out (after reading numerous online posts), if your Mac has an optical drive, Boot Camp Assistant will NOT create a USB flash drive-based install disk. The only way to trick the system to do that is to do the following: (Though it turns out at the end that this step is quite useless, since the USB install disk created by Boot Camp Assistant couldn&amp;rsquo;t boot! So you could really skip this step.)

&lt;ol&gt;
&lt;li&gt;Modify Boot Camp Assistant&amp;rsquo;s Info.plist as described &lt;a href=&#34;http://forums.macrumors.com/showthread.php?t=1488322&#34;&gt;here&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;After the modification, you need to resign Boot Camp Assistant, or else it will keep crashing. To do that, following the instructions &lt;a href=&#34;https://discussions.apple.com/thread/5479879?start=30&#34;&gt;here&lt;/a&gt;. For the impatient, run the command &lt;code&gt;sudo codesign -fs - /Applications/Utilities/Boot\ Camp\ Assistant.app&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;Start &amp;ldquo;Boot Camp Assistant&amp;rdquo;, and select the options &amp;ldquo;Download the latest Windows Support&amp;rdquo;, and &amp;ldquo;Install Windows 7 or later versions&amp;rdquo;.

&lt;ul&gt;
&lt;li&gt;Note I am not selecting the option to create a Windows install disk. It turned out the USB install disk didn&amp;rsquo;t boot. I keep getting the &amp;ldquo;non-system disk, press any key to continue&amp;rdquo; error, and basically that&amp;rsquo;s the end.&lt;/li&gt;
&lt;li&gt;In any case, these two tasks should download the bootcamp drivers onto a USB drive, and also partition the Mac&amp;rsquo;s HD into two partitions. One of the parititions is the BOOTCAMP partition, which will be used to install Windows 7.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Once that&amp;rsquo;s done, I needed to create a bootable Windows 7 USB Flash drive.

&lt;ul&gt;
&lt;li&gt;If you search the web, you will find that most people run into two problems. The first is the bootcamp-created flash drive giving the &amp;ldquo;non-system disk&amp;rdquo; error, and the second is the boot up hangs with a blank screen and a flash underscore cursor at the top left corner. I&amp;rsquo;ve ran into both. You will also find some articles that explain how to make the flash drives bootable using fdisk, but that didn&amp;rsquo;t work for me either.&lt;/li&gt;
&lt;li&gt;Finally I found &lt;a href=&#34;http://www.tonymacx86.com/windows/97075-windows-7-usb-install-stuck-black-screen.html&#34;&gt;a post online&lt;/a&gt; that pointed to the &lt;a href=&#34;http://wudt.codeplex.com/&#34;&gt;Windows USB/DVD Download Tool&lt;/a&gt;. It&amp;rsquo;s a Windows program that can create a bootable USB flash drive from a Windows 7 or 8 ISO file.&lt;/li&gt;
&lt;li&gt;Note though, not all the USB flash drives are created equal. The PNY 16GB drive I used didn&amp;rsquo;t work. WUDT ended with an error that says it couldn&amp;rsquo;t run bootsect to create the boot sectors on the flash drive. The one that worked for me was Kingston Data Traveler 4GB.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Now that I have the bootable USB flash drive, I plugged that into the Mac and started it up. This time the installation process got started.&lt;/li&gt;
&lt;li&gt;When Boot Camp Assistant created the BOOTCAMP partition, it did not format it to NTFS. So the first thing I noticed was that when I select the BOOTCAMP partition, the installer said it cannot be used because it&amp;rsquo;s not NTFS.

&lt;ul&gt;
&lt;li&gt;The option to format the partition is not immediately obvious, but I had to click on &amp;ldquo;Drive options (advanced)&amp;rdquo; and select the option to format the partition.&lt;/li&gt;
&lt;li&gt;Once that&amp;rsquo;s done, I encountered another error that says the drive may not be bootable and I need to change the BIOS setting. Yeah at this point I was pretty ticked and the computer heard a few choice words from me. Doesn&amp;rsquo;t matter what I do it doesn&amp;rsquo;t seem to let me pass this point.&lt;/li&gt;
&lt;li&gt;I did a bunch more readings and research, but nothing seem to have worked. I finally decided to turn the computer off and come back to it. Magically it worked the second time I tried to install it. I was no longer getting the non-bootable disk error. My guess is that after the NTFS formatting, the installer needs to be completely restarted.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;In any case, at this point, it was fairly smooth sailing. The installation process took a bit of time but overall everything seemed to have worked.&lt;/li&gt;
&lt;li&gt;After the installation, I plugged int the bootcamp flash drive with the WindowsSupport files, and installed them.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I am still not a 100% yet. The trackpad still doesn&amp;rsquo;t behave like when it&amp;rsquo;s on the Mac. For example, I can&amp;rsquo;t use the two finger drag to scroll the windows, and for the life of me, I cannot figure out how to easily (and correctly) set the brightness of display. But at least now I have a working Windows 7 laptop!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Analyzing Security Trends Using RSA Exhibitor Descriptions</title>
      <link>http://zhen.org/blog/analyzing-security-trends-using-rsa-exhibitor-descriptions/</link>
      <pubDate>Sun, 22 Mar 2015 09:57:56 -0800</pubDate>
      
      <guid>http://zhen.org/blog/analyzing-security-trends-using-rsa-exhibitor-descriptions/</guid>
      <description>

&lt;p&gt;&lt;strong&gt;The data used for this post is available &lt;a href=&#34;https://github.com/topclouds/rsaconf&#34;&gt;here&lt;/a&gt;. A word of warning, I only have complete data set for 2014 and 2015. For 2008-2013, I have what I consider to be representative samples. So please take the result set with a big bucket of salt.&lt;/strong&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;After going through this analysis, the big question I wonder out loud is:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;How can vendors differentiate from each other and stand above the crowd when everyone is using the same words to describe themselves?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;The annual security conference, &lt;a href=&#34;http://www.rsaconference.com/events/us15&#34;&gt;RSA 2015&lt;/a&gt;, is right around the corner. Close to 30,000 attendees will descend into &lt;a href=&#34;http://moscone.com&#34;&gt;San Francisco Moscone Center&lt;/a&gt; to attend 400+ sessions, listen to 600+ speakers and talk to close to 600 vendors and exhibitors.&lt;/p&gt;

&lt;p&gt;For me, the most interesting aspect of RSA is walking the expo floor, and listening to how vendors describe their products. Intuitively, the vendor marketing messages should have a high degree of correlation to what customers care about, even if the messages trail the actual pain points slightly.&lt;/p&gt;

&lt;p&gt;This post highlights some of the unsurprising findings from analyzing 8 years worth of RSA Conference exihibitor descriptions.&lt;/p&gt;

&lt;p&gt;It is interesting how almost all vendor descriptions use the same set of words to describe themselves, and these words mostly haven&amp;rsquo;t changed over the past 8 years. For example, the following table shows the top 10 words used in RSA conference exhibitor descriptions for the past 8 years. You can find the complete word list at &amp;hellip;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;right&#34;&gt;#&lt;/th&gt;
&lt;th&gt;2008&lt;/th&gt;
&lt;th&gt;2009&lt;/th&gt;
&lt;th&gt;2010&lt;/th&gt;
&lt;th&gt;2011&lt;/th&gt;
&lt;th&gt;2012&lt;/th&gt;
&lt;th&gt;2013&lt;/th&gt;
&lt;th&gt;2014&lt;/th&gt;
&lt;th&gt;2015&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;td&gt;secure&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;td&gt;solution&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;3&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;4&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;5&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;protect&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;service&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;6&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;td&gt;network&lt;/td&gt;
&lt;td&gt;provide&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;information&lt;/td&gt;
&lt;td&gt;more&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;protect&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;7&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;company&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;information&lt;/td&gt;
&lt;td&gt;software&lt;/td&gt;
&lt;td&gt;software&lt;/td&gt;
&lt;td&gt;protect&lt;/td&gt;
&lt;td&gt;threat&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;8&lt;/td&gt;
&lt;td&gt;product&lt;/td&gt;
&lt;td&gt;service&lt;/td&gt;
&lt;td&gt;organization&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;td&gt;information&lt;/td&gt;
&lt;td&gt;threat&lt;/td&gt;
&lt;td&gt;manage&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;9&lt;/td&gt;
&lt;td&gt;technology&lt;/td&gt;
&lt;td&gt;software&lt;/td&gt;
&lt;td&gt;information&lt;/td&gt;
&lt;td&gt;technology&lt;/td&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;td&gt;service&lt;/td&gt;
&lt;td&gt;service&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;right&#34;&gt;10&lt;/td&gt;
&lt;td&gt;application&lt;/td&gt;
&lt;td&gt;busy&lt;/td&gt;
&lt;td&gt;risk&lt;/td&gt;
&lt;td&gt;product&lt;/td&gt;
&lt;td&gt;more&lt;/td&gt;
&lt;td&gt;customer&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;td&gt;enterprise&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Here&amp;rsquo;s a word cloud that shows the &lt;a href=&#34;https://github.com/topclouds/rsaconf/blob/master/rsa2015.png&#34;&gt;2015&lt;/a&gt; top words. You can also find word clouds for
&lt;a href=&#34;https://github.com/topclouds/rsaconf/blob/master/rsa2008.png&#34;&gt;2008&lt;/a&gt;,
&lt;a href=&#34;https://github.com/topclouds/rsaconf/blob/master/rsa2009.png&#34;&gt;2009&lt;/a&gt;,
&lt;a href=&#34;https://github.com/topclouds/rsaconf/blob/master/rsa2010.png&#34;&gt;2010&lt;/a&gt;,
&lt;a href=&#34;https://github.com/topclouds/rsaconf/blob/master/rsa2011.png&#34;&gt;2011&lt;/a&gt;,
&lt;a href=&#34;https://github.com/topclouds/rsaconf/blob/master/rsa2012.png&#34;&gt;2012&lt;/a&gt;,
&lt;a href=&#34;https://github.com/topclouds/rsaconf/blob/master/rsa2013.png&#34;&gt;2013&lt;/a&gt;,
&lt;a href=&#34;https://github.com/topclouds/rsaconf/blob/master/rsa2014.png&#34;&gt;2014&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/rsaconf/rsa2015.png&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;compliance-down-threats-up:b082a5c20b5449f4372a8955a4b5d0dd&#34;&gt;Compliance Down, Threats Up&lt;/h3&gt;

&lt;p&gt;While the macro trend has not changed dramatically for the exhibitor descriptions, there have been some micro trends. Here are a couple of examples.&lt;/p&gt;

&lt;p&gt;First, the use of the word &lt;em&gt;compliance&lt;/em&gt; has gone down over the years, while the word &lt;em&gt;threat&lt;/em&gt; has gone up. After 2013, they changed places with each other.&lt;/p&gt;

&lt;p&gt;This finding is probably not surprising. At the end of 2013, one of the biggest breaches, Target, happened. And over the next two years we&amp;rsquo;ve seen major breaches of Sony, Anthem, Home Depot, Premera and many others. Threats to both the corporate infrastructure as well as top executive jobs (just ask &lt;a href=&#34;http://www.forbes.com/sites/ericbasu/2014/06/15/target-ceo-fired-can-you-be-fired-if-your-company-is-hacked/&#34;&gt;Target‚Äôs CEO Gregg Steinhafel&lt;/a&gt;, or &lt;a href=&#34;http://abcnews.go.com/Entertainment/wireStory/sony-chief-amy-pascal-acknowledges-fired-28918607&#34;&gt;Sony&amp;rsquo;s Co-Chairwoman Amy Pascal&lt;/a&gt;) are becoming real. So it seems natural for the marketers to start using the word &lt;em&gt;threat&lt;/em&gt; to highlight their solutions.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Compliance&lt;/em&gt; was a big use case in security for many years, and many vendors have leveraged the need for compliance to build their company and revenue pipeline since the mid-2000s. However, use cases can only remain in fashion for so long before customers get sick of hearing about them, and vendors need new ways of selling their wares to customers. So it looks like &lt;em&gt;compliance&lt;/em&gt; is finally out of fashion around 2011 and started declining in exhibitor descriptions.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/rsaconf/compliance-threat.png&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;mobile-and-cloud-up:b082a5c20b5449f4372a8955a4b5d0dd&#34;&gt;Mobile and Cloud Up&lt;/h3&gt;

&lt;p&gt;The words &lt;em&gt;mobile&lt;/em&gt; and &lt;em&gt;cloud&lt;/em&gt; has gained dramatically in rankings over past 8 years. In fact, it&amp;rsquo;s been consistently one of the top words used in the last 4. For anyone who hasn&amp;rsquo;t been hiding under a rock in the past few years, this is completely unsurprising.&lt;/p&gt;

&lt;p&gt;The &lt;em&gt;cloud&lt;/em&gt; war started to heat up back in 2009 when most major service providers have felt the Amazon Web Services threat and all wanted to build their own clouds. In fact, I joined VMware in 2009 to build out their emerging cloud infrastructure group to specifically help service providers build their cloud infrastructures. Eventually, in 2011, VMware decided to get into the game and I built the initial product and engineering team that developed what it&amp;rsquo;s now known as vCloud Air (still have no idea why this name is chosen).&lt;/p&gt;

&lt;p&gt;As more and more workloads move to the cloud, requirements for protecting cloud workloads quickly appeared, and vendors natually started to position their products for the cloud. So the rise in &lt;em&gt;cloud&lt;/em&gt; rankings matches what I&amp;rsquo;ve experiened.&lt;/p&gt;

&lt;p&gt;About the same time (2010, 2011 or so), more and more corporations are providing their employees smartphones, and workers are becoming more and more mobile. The need for mobile security became a major requirement, and a whole slueth of mobile security startup came into the scene. So natually the &lt;em&gt;mobile&lt;/em&gt; word rose in rankings.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/rsaconf/mobile-cloud.png&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;virtual-and-real-time-regaining-ground:b082a5c20b5449f4372a8955a4b5d0dd&#34;&gt;Virtual and Real-Time Regaining Ground&lt;/h3&gt;

&lt;p&gt;The words &lt;em&gt;virtual&lt;/em&gt; and &lt;em&gt;real-time&lt;/em&gt; dropped dramatically in rankings for a couple of years (2010, 2011) but have since regained all the lost ground and more. I have no precise reasons on why that&amp;rsquo;s the case but I have some theories. These theories are probably completely wrong, and if you have better explanations I would love to hear from you.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Virtual&lt;/em&gt; lost to &lt;em&gt;cloud&lt;/em&gt; during that timeframe as every vendor is trying to position their products for the cloud era. However, &lt;em&gt;virtual&lt;/em&gt; infrastructures haven&amp;rsquo;t gone away and in fact continue to experience strong growth. So in the past couple of years, marketers are covering their basis and starting to message both &lt;em&gt;virtual&lt;/em&gt; and &lt;em&gt;cloud&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;The drop in rankings for &lt;em&gt;real-time&lt;/em&gt; is potentially due to the peak of &lt;em&gt;compliance&lt;/em&gt; use case, which is usually report-based and does not have &lt;em&gt;real-time&lt;/em&gt; requirements. Also, I suspect another reason is that SIEM, which &lt;em&gt;real-time&lt;/em&gt; is critical, is going out of fashion somewhat due to the high cost of ownership and lack of trust in the tools. However, given the recent rise of &lt;em&gt;threats&lt;/em&gt;, natually &lt;em&gt;real-time&lt;/em&gt; becomes critical again.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/rsaconf/virtual-real-time.png&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;other-findings:b082a5c20b5449f4372a8955a4b5d0dd&#34;&gt;Other Findings&lt;/h3&gt;

&lt;p&gt;The word &lt;em&gt;cyber&lt;/em&gt; gained huge popularity in the past 3 years, likely due to the U.S. government&amp;rsquo;s focus on &lt;em&gt;cyber&lt;/em&gt; security. The word &lt;em&gt;malware&lt;/em&gt; has been fairly consistently at the top 100 words since 2010.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/rsaconf/cyber-malware.png&#34;&gt;&lt;/p&gt;

&lt;p&gt;The words &lt;em&gt;product&lt;/em&gt; and &lt;em&gt;service&lt;/em&gt; switched places in 2013, likely due to the increase in number of security software-as-a-service plays.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://zhen.org/images/rsaconf/product-service.png&#34;&gt;&lt;/p&gt;

&lt;h3 id=&#34;credits:b082a5c20b5449f4372a8955a4b5d0dd&#34;&gt;Credits&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;The word clouds and word rankings are generated using &lt;a href=&#34;http://timdream.org/wordcloud&#34;&gt;Word Cloud&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;The actual vendor descriptions are gathered from the RSA web site as well as press releases from Business Wire and others.&lt;/li&gt;
&lt;li&gt;Charts are generated using Excel, which continues to be one of the best friends for data analysts (not that I consider myself one).&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Papers I Read: 2015 Week 8</title>
      <link>http://zhen.org/blog/papers-i-read-2015-week-8/</link>
      <pubDate>Sun, 22 Feb 2015 19:57:56 -0800</pubDate>
      
      <guid>http://zhen.org/blog/papers-i-read-2015-week-8/</guid>
      <description>

&lt;h3 id=&#34;random-ramblings:29724b4ec2d333ad12e89fd98257dccd&#34;&gt;Random Ramblings&lt;/h3&gt;

&lt;p&gt;Another week, another report of hacks. This time, &lt;a href=&#34;http://securelist.com/blog/research/68732/the-great-bank-robbery-the-carbanak-apt/&#34;&gt;The Great Bank Robbery&lt;/a&gt;, where up to 100 financial institutions have been hit.Total financial losses could be as a high as $1bn. You can download the &lt;a href=&#34;http://25zbkz3k00wn2tp5092n6di7b5k.wpengine.netdna-cdn.com/files/2015/02/Carbanak_APT_eng.pdf&#34;&gt;full report&lt;/a&gt; and learn all about it.&lt;/p&gt;

&lt;p&gt;Sony spent $15M to clean up and remediate their hack. I wonder how much these banks are going to spend on tracing the footsteps of their intruders and trying to figure out exactly where they have gone, what they have done and what they have taken.&lt;/p&gt;

&lt;p&gt;I didn&amp;rsquo;t make much progress this week on either &lt;a href=&#34;https://github.com/strace/sequence&#34;&gt;sequence&lt;/a&gt; or &lt;a href=&#34;https://github.com/surgemq/surgemq&#34;&gt;surgemq&lt;/a&gt; because of busy work schedule and my son getting sick AGAIN!! But I did merge the few surgemq &lt;a href=&#34;https://github.com/surgemq/surgemq/pulls?q=is%3Apr+is%3Aclosed&#34;&gt;pull requests&lt;/a&gt; that the community has graciously contributed. One of them actually got it tested on Raspberry! That&amp;rsquo;s pretty cool.&lt;/p&gt;

&lt;p&gt;I also did manage to finish up the &lt;a href=&#34;https://github.com/strace/sequence/commit/713979f70d6025308e434205973249aa3138e58e&#34;&gt;experimental json scanner&lt;/a&gt; that I&amp;rsquo;ve been working on for the past couple of weeks. I will write more about it in the next &lt;a href=&#34;http://strace.io/sequence&#34;&gt;sequence&lt;/a&gt; article.&lt;/p&gt;

&lt;p&gt;Actually I am starting to feel a bit overwhelmed by having both projects. Both of them are very interesting and I can see both move forward in very positive ways. Lots of ideas in my head but not enough time to do them. Now that I am getting feature requests, issues and pull requests, I feel even worse because I haven&amp;rsquo;t spent enough time on them. &amp;lt;sigh&amp;gt;&lt;/p&gt;

&lt;h3 id=&#34;papers-i-read:29724b4ec2d333ad12e89fd98257dccd&#34;&gt;Papers I Read&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.pdl.cmu.edu/PDL-FTP/HECStorage/git-cercs-12-08.pdf&#34;&gt;Memory-Efficient GroupBy-Aggregate using Compressed Buffer Trees&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Memory is rapidly becoming a precious resource in many data processing environments. This paper introduces
a new data structure called a Compressed Buffer Tree (CBT). Using a combination of buffering, compression,
and lazy aggregation, CBTs can improve the memoryefficiency of the GroupBy-Aggregate abstraction which
forms the basis of many data processing models like MapReduce and databases. We evaluate CBTs in the
context of MapReduce aggregation, and show that CBTs can provide significant advantages over existing hashbased
aggregation techniques: up to 2√ó less memory and 1.5√ó the throughput, at the cost of 2.5√ó CPU.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.usenix.org/system/files/conference/atc14/atc14-paper-hu.pdf&#34;&gt;ELF: Efficient Lightweight Fast Stream Processing at Scale&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Stream processing has become a key means for gaining rapid insights from webserver-captured data. Challenges
include how to scale to numerous, concurrently running streaming jobs, to coordinate across those jobs to share
insights, to make online changes to job functions to adapt to new requirements or data characteristics, and for each job, to efficiently operate over different time windows. The ELF stream processing system addresses these new challenges. Implemented over a set of agents enriching the web tier of datacenter systems, ELF obtains scalability by using a decentralized ‚Äúmany masters‚Äù architecture where for each job, live data is extracted directly from webservers, and placed into memory-efficient compressed buffer trees (CBTs) for local parsing and temporary storage, followed by subsequent aggregation using shared reducer trees (SRTs) mapped to sets of worker processes. Job masters at the roots of SRTs can dynamically customize worker actions, obtain aggregated results for end user delivery and/or coordinate with other jobs.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.kernel.org/pub/linux/kernel/people/paulmck/perfbook/perfbook.html&#34;&gt;Is Parallel Programming Hard, And, If So, What Can You Do About It?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Not just a paper, it&amp;rsquo;s a whole book w/ 800+ pages.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The purpose of this book is to help you program shared-memory parallel machines without risking your sanity.1 We hope that this book‚Äôs design principles will help you avoid at least some parallel-programming pitfalls. That said, you should think of this book as a foundation on which to build, rather than as a completed cathedral. Your mission, if you choose to accept, is to help make further progress in the exciting field of parallel programming‚Äîprogress that will in time render this book obsolete. Parallel programming is not as hard as some say, and we hope that this book makes your parallel-programming projects easier and more fun.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>Papers I Read: 2015 Week 7</title>
      <link>http://zhen.org/blog/papers-i-read-2015-week-7/</link>
      <pubDate>Sun, 15 Feb 2015 19:57:56 -0800</pubDate>
      
      <guid>http://zhen.org/blog/papers-i-read-2015-week-7/</guid>
      <description>

&lt;h2 id=&#34;random-ramblings:10248ddcf524aa32198bc5cded1aa098&#34;&gt;Random Ramblings&lt;/h2&gt;

&lt;p&gt;Well, another week, &lt;a href=&#34;http://www.nytimes.com/2015/02/05/business/hackers-breached-data-of-millions-insurer-says.html&#34;&gt;another big data breach&lt;/a&gt;. This time is Anthem, one of the nation‚Äôs largest health insurers. Ok, maybe it was last week that it happend. But this week they revealed that &lt;a href=&#34;http://consumerist.com/2015/02/13/anthem-says-data-from-as-far-back-as-2004-exposed-during-hack-offering-free-identity-theft-protection/&#34;&gt;hackers had access &amp;hellip; going back as far as 2004&lt;/a&gt;. WSJ blamed Anthem for &lt;a href=&#34;http://www.wsj.com/articles/investigators-eye-china-in-anthem-hack-1423167560&#34;&gt;not encrypting the data&lt;/a&gt;. Though I have to agree with Rich Mogull over at Securosis that &amp;ldquo;&lt;a href=&#34;https://securosis.com/blog/even-if-anthem-encrypted-it-probably-wouldnt-have-mattered&#34;&gt;even if Anthem had encrypted, it probably wouldn‚Äôt have helped&lt;/a&gt;&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;I feel bad for saying this but there&amp;rsquo;s one positive side effect from all these data breaches. Security is now officially a boardroom topic. Anthem&amp;rsquo;s CEO, Joseph Swedish, is now &lt;a href=&#34;http://www.latimes.com/business/la-fi-anthem-hack-ceo-20150213-story.html#page=1&#34;&gt;under the gun&lt;/a&gt; because top level executives are no longer immune to major security breaches that affect the company&amp;rsquo;s top line. Just ask &lt;a href=&#34;http://www.forbes.com/sites/ericbasu/2014/06/15/target-ceo-fired-can-you-be-fired-if-your-company-is-hacked/&#34;&gt;Target‚Äôs CEO Gregg Steinhafel&lt;/a&gt;, or &lt;a href=&#34;http://abcnews.go.com/Entertainment/wireStory/sony-chief-amy-pascal-acknowledges-fired-28918607&#34;&gt;Sony&amp;rsquo;s Co-Chairwoman Amy Pascal&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Brian Krebs wrote a &lt;a href=&#34;http://krebsonsecurity.com/2015/02/anthem-breach-may-have-started-in-april-2014/&#34;&gt;detailed piece&lt;/a&gt; analyzing the various pieces of information available relating to the Anthem hack. Quite an interesting read.&lt;/p&gt;

&lt;p&gt;One chart in the artile that Brian referred to is the time difference between the ‚Äútime to compromise‚Äù and the ‚Äútime to discovery&amp;rdquo;, taken from &lt;a href=&#34;http://www.verizonenterprise.com/DBIR/2014/&#34;&gt;Verizon‚Äôs 2014 Data Breach Investigations Report&lt;/a&gt;. As Brian summaries, &amp;ldquo;TL;DR: That gap is not improving, but instead is widening.&amp;rdquo;&lt;/p&gt;

&lt;p&gt;What this really says is that, &lt;strong&gt;you will get hacked&lt;/strong&gt;. So how do you shorten the time between getting hacked, and finding out that you are hacked so you can quickly remediate the problem before worse things happen?&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://krebsonsecurity.com/wp-content/uploads/2015/02/timetocompromise.png&#34; alt=&#34;The time difference between the ‚Äútime to compromise‚Äù and the ‚Äútime to discovery.‚Äù&#34; /&gt;&lt;/p&gt;

&lt;p&gt;With all these data breaches as backdrop, this week we also saw &amp;ldquo;President Barack Obama signed an executive order on Friday designed to spur businesses and the Federal Government to share with each other information related to cybersecurity, hacking and data breaches for the purpose of safeguarding U.S. infrastructure, economics and citizens from cyber attacks.&amp;rdquo; (&lt;a href=&#34;https://gigaom.com/2015/02/13/obamas-executive-order-calls-for-sharing-of-security-data/&#34;&gt;Gigaom&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;In general I don&amp;rsquo;t really think government mandates like this will work. The industry has to feel the pain enough that they are willing to participate, otherwise it&amp;rsquo;s just a waste of paper and ink. Facebook seems to be taking a lead in security information sharing and &lt;a href=&#34;https://www.facebook.com/notes/protect-the-graph/threatexchange-sharing-for-a-safer-internet/1566584370248375&#34;&gt;launched their ThreatExchange security framework&lt;/a&gt; this week. along with Pinterest, Tumblr, Twitter, and Yahoo. Good for them! I hope this is not a temporary PR thing, and that they keep funding and supporting the framework.&lt;/p&gt;

&lt;h2 id=&#34;papers-i-read:10248ddcf524aa32198bc5cded1aa098&#34;&gt;Papers I Read&lt;/h2&gt;

&lt;p&gt;Another great resource of computer science papers is Adrian Coyler&amp;rsquo;s &lt;a href=&#34;http://blog.acolyer.org/&#34;&gt;the morning paper&lt;/a&gt;. He selects and summarizes &amp;ldquo;an interesting/influential/important paper from the world of CS every weekday morning&amp;rdquo;.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.cs.put.poznan.pl/dweiss/site/publications/download/fsacomp.pdf&#34;&gt;Smaller Representation of Finite State Automata&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I read this paper when I was trying to figure out how to make the FSAs smaller for the &lt;a href=&#34;https://github.com/surge/xparse/tree/master/etld&#34;&gt;Effective TLD matcher&lt;/a&gt; I created. The FSM I generated is 212,294 lines long. That&amp;rsquo;s just absolutely crazy. This paper seems to present an interesting way of compressing them.&lt;/p&gt;

&lt;p&gt;I am not exactly sure if &lt;a href=&#34;https://godoc.org/golang.org/x/net/publicsuffix&#34;&gt;PublicSuffix&lt;/a&gt; uses a similar representation but it basically represents a FSA as an array of bytes, and then walk the bytes like a binary search tree. It&amp;rsquo;s interesting for sure.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This paper is a follow-up to Jan Daciuk‚Äôs experiments on space-efficient finite state automata representation that can be used directly for traversals in main memory [4]. We investigate several techniques of reducing the memory footprint of minimal automata, mainly exploiting the fact that transition labels and transition pointer offset values are not evenly distributed and so are suitable for compression. We achieve a size gain of around 20‚Äì30% compared to the original representation given in [4]. This result is comparable to the state-of-the-art dictionary compression techniques like the LZ-trie [12] method, but remains
memory and CPU efficient during construction.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://arxiv.org/pdf/1409.5942v1.pdf&#34;&gt;IP Tracing and Active Network Response&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;This work presents integrated model for active security response model. The proposed model introduces Active Response Mechanism (ARM) for tracing anonymous attacks in the network back to their source. This work is motivated by the increased frequency and sophistication of denial-of-service attacks and by the difficulty in tracing packets with incorrect, or ‚Äúspoofed‚Äù, source addresses. This paper presents within the proposed model two tracing approaches based on:
‚Ä¢ Sleepy Watermark Tracing (SWT) for unauthorized access attacks.
‚Ä¢ Probabilistic Packet Marking (PPM) in the network for Denial of Service
(DoS) and Distributed Denial of Service (DDoS) attacks.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://static.googleusercontent.com/media/research.google.com/en/us/pubs/archive/36356.pdf&#34;&gt;Dapper, a Large-Scale Distributed Systems Tracing Infrastructure&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Here we introduce the design of Dapper, Google‚Äôs production distributed systems tracing infrastructure, and describe how our design goals of low overhead, application-level transparency, and ubiquitous deployment on a very large scale system were met. Dapper shares conceptual similarities with other tracing systems, particularly Magpie [3] and X-Trace [12], but certain design
choices were made that have been key to its success in our environment, such as the use of sampling and restricting the instrumentation to a rather small number of common libraries.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.confluent.io/2015/01/29/making-sense-of-stream-processing/&#34;&gt;STREAM PROCESSING, EVENT SOURCING, REACTIVE, CEP‚Ä¶ AND MAKING SENSE OF IT ALL&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Not a paper, but a good write up nonetheless.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Some people call it stream processing. Others call it Event Sourcing or CQRS. Some even call it Complex Event Processing. Sometimes, such self-important buzzwords are just smoke and mirrors, invented by companies who want to sell you stuff. But sometimes, they contain a kernel of wisdom which can really help us design better systems. In this talk, we will go in search of the wisdom behind the buzzwords. We will discuss how event streams can help make your application more scalable, more reliable and more maintainable.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>Sequence: Optimizing Go For the High Performance Log Scanner</title>
      <link>http://zhen.org/blog/sequence-optimizing-go-for-high-performance-log-scanner/</link>
      <pubDate>Fri, 13 Feb 2015 01:03:08 -0800</pubDate>
      
      <guid>http://zhen.org/blog/sequence-optimizing-go-for-high-performance-log-scanner/</guid>
      <description>

&lt;p&gt;Information here maybe outdated. Please visit &lt;a href=&#34;http://sequencer.io&#34;&gt;http://sequencer.io&lt;/a&gt; for latest.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;This is part 3 of the &lt;a href=&#34;http://sequencer.io&#34;&gt;sequence&lt;/a&gt; series.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://zhen.org/blog/sequence-high-performance-sequential-semantic-log--parser/&#34;&gt;Part 1&lt;/a&gt; is about the high performance parser that can parse 100,000-200,000 MPs.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://zhen.org/blog/sequence-automated-analyzer-for-reducing-100k-messages-to-10s-of-patterns/&#34;&gt;Part 2&lt;/a&gt; is about automating the process of reducing 100 of 1000&amp;rsquo;s of log messages down to dozens of unique patterns.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://zhen.org/blog/sequence-optimizing-go-for-high-performance-log-scanner/&#34;&gt;Part 3&lt;/a&gt; is about optimizing Go to achieve very high performance (200,000 - 500,000 MPS depending on message size and core count) for scanning and tokenizing log messages&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I would love to learn more about the state-of-the-art approaches that log vendors are using. These attempts are about scratching my own itch and trying to realize ideas I&amp;rsquo;ve had in my mind. Given some of these ideas are 5 to 10 years old, they may already be outdated. Personally I just haven&amp;rsquo;t heard of any groundbreaking approaches.&lt;/p&gt;

&lt;p&gt;In any case, if you know of some of the more innovative ways people are approaching these problems, please please please comment below as I would love to hear from you.&lt;/p&gt;

&lt;h3 id=&#34;tl-dr:cb54f18a9944e1962d3fe8e3f09ea809&#34;&gt;tl;dr&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;sequence&lt;/code&gt; scanner is designed to tokenize free-form log messages.

&lt;ul&gt;
&lt;li&gt;It can scan between 200K to 500K log messages per second depending on message size and core count.&lt;/li&gt;
&lt;li&gt;It recognizes time stamps, hex strings, IP (v4, v6) addresses, URLs, MAC addresses, integers and floating point numbers.&lt;/li&gt;
&lt;li&gt;The design is based mostly on finite-state machines.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;The performance was achieved by the following techniques:

&lt;ol&gt;
&lt;li&gt;Go Through the String Once and Only Once&lt;/li&gt;
&lt;li&gt;Avoid Indexing into the String&lt;/li&gt;
&lt;li&gt;Reduce Heap Allocation&lt;/li&gt;
&lt;li&gt;Reduce Data Copying&lt;/li&gt;
&lt;li&gt;Mind the Data Struture&lt;/li&gt;
&lt;li&gt;Avoid Interfaces If Possible&lt;/li&gt;
&lt;li&gt;Find Ways to Short Circuit Checks&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;background:cb54f18a9944e1962d3fe8e3f09ea809&#34;&gt;Background&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;In computer science, lexical analysis is the process of converting a sequence of characters into a sequence of tokens, i.e. meaningful character strings. A program or function that performs lexical analysis is called a lexical analyzer, lexer, tokenizer, or scanner. - &lt;a href=&#34;http://en.wikipedia.org/wiki/Lexical_analysis&#34;&gt;Wikipedia&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;One of the most critical functions in the &lt;code&gt;sequence&lt;/code&gt; parser is the message tokenization. At a very high level, message tokenization means taking a single log message and breaking it into a list of tokens.&lt;/p&gt;

&lt;h3 id=&#34;functional-requirements:cb54f18a9944e1962d3fe8e3f09ea809&#34;&gt;Functional Requirements&lt;/h3&gt;

&lt;p&gt;The challenge is knowing where the token break points are. Most log messages are free-form text, which means there&amp;rsquo;s no common structure to them.&lt;/p&gt;

&lt;p&gt;As an example, the following log message can be tokenized into the sequence of tokens below. As you can see, one cannot depend on white spaces to tokenize, as the timestamp would be broken into 3 parts; nor can one use punctuations like &amp;ldquo;;&amp;rdquo; or &amp;ldquo;:&amp;ldquo;, as they would break the log mesage into useless parts.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;jan 14 10:15:56 testserver sudo:    gonner : tty=pts/3 ; pwd=/home/gonner ; user=root ; command=/bin/su - ustream

  #   0: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%ts%&amp;quot;, Value=&amp;quot;jan 14 10:15:56&amp;quot; }
  #   1: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;testserver&amp;quot; }
  #   2: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;sudo&amp;quot; }
  #   3: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;:&amp;quot; }
  #   4: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;gonner&amp;quot; }
  #   5: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;:&amp;quot; }
  #   6: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;tty&amp;quot; }
  #   7: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;=&amp;quot; }
  #   8: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;pts/3&amp;quot; }
  #   9: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;;&amp;quot; }
  #  10: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;pwd&amp;quot; }
  #  11: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;=&amp;quot; }
  #  12: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;/home/gonner&amp;quot; }
  #  13: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;;&amp;quot; }
  #  14: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;user&amp;quot; }
  #  15: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;=&amp;quot; }
  #  16: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;root&amp;quot; }
  #  17: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;;&amp;quot; }
  #  18: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;command&amp;quot; }
  #  19: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;=&amp;quot; }
  #  20: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;/bin/su&amp;quot; }
  #  21: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;-&amp;quot; }
  #  22: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;ustream&amp;quot; }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;So a log message &lt;em&gt;scanner&lt;/em&gt; or &lt;em&gt;tokenizer&lt;/em&gt; (we will use these terms interchangeably) must understand common components such as timestamp, URL, hex strings, IP addresses (v4 or v6), and mac addresses, so it can break the messages into &lt;em&gt;meaningful components&lt;/em&gt;.&lt;/p&gt;

&lt;h3 id=&#34;performance-requirements:cb54f18a9944e1962d3fe8e3f09ea809&#34;&gt;Performance Requirements&lt;/h3&gt;

&lt;p&gt;From a performance requirements perspective, I really didn&amp;rsquo;t start out with any expectations. However, after achieving 100-200K MPS for parsing (not just tokenizing), I have a strong desire to keep the performance at that level. So the more I can optimize the scanner to tokenize faster, the more head room I have for parsing.&lt;/p&gt;

&lt;p&gt;One may ask, who can POSSIBLY use such performance? Many organizations that I know are generating between 50-100M messages per second (MPS), that&amp;rsquo;s only 1,200 MPS. Some larger organizations I know are generating 60GB of Bluecoat logs per day, &lt;strong&gt;8 years ago&lt;/strong&gt;!! That&amp;rsquo;s a good 3,000 MPS assuming an average of 250 bytes per message. Even if log rate grows at 15%, that&amp;rsquo;s still only 10K MPS today.&lt;/p&gt;

&lt;p&gt;To run through an example, &lt;a href=&#34;http://www.covert.io/research-papers/security/Beehive%20-%20Large-Scale%20Log%20Analysis%20for%20Detecting%20Suspicious%20Activity%20in%20Enterprise%20Networks.pdf&#34;&gt;at EMC, 1.4 billion log messages are generated daily on average, at a rate of one terabyte a day&lt;/a&gt;. That&amp;rsquo;s 16,200 messages per second, and about 714 bytes per message. (Btw, what system can possibly generate messages that are 714 bytes long? That&amp;rsquo;s crazy and completely inefficient!) These EMC numbers are from 2013, so they have likely increased by now.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;sequence&lt;/code&gt; parser, with a single CPU core, can process about 270,000 MPS for messages averaging 98 bytes. Assuming the performance is linear compare to the message size (which is pretty close to the truth), we can process 37,000 MPS for messages averaging 714 bytes. That&amp;rsquo;s just enough to parse the 16,2000 MPS, with a little head room to do other types of analysis or future growth.&lt;/p&gt;

&lt;p&gt;Obviously one can throw more hardware at solving the scale problem, but then again, why do that if you don&amp;rsquo;t need to. Just because you have the hardware doesn&amp;rsquo;t mean you should waste the money! Besides, there are much more interesting analytics problems your hardware can be used for than just tokenizing a message.&lt;/p&gt;

&lt;p&gt;In any case, I want to squeeze every oz of performance out of the scanner so I can have more time in the back to parse and analyze. So let&amp;rsquo;s set a goal of keeping at least 200,000 MPS for 100 bytes per message (BPM).&lt;/p&gt;

&lt;p&gt;Yes, go ahead and tell me I shouldn&amp;rsquo;t worry about micro-optimization, because this post is all about that. :)&lt;/p&gt;

&lt;h2 id=&#34;sequence-scanner:cb54f18a9944e1962d3fe8e3f09ea809&#34;&gt;Sequence Scanner&lt;/h2&gt;

&lt;p&gt;In the &lt;code&gt;sequence&lt;/code&gt; package, we implemented a general log message scanner, called &lt;a href=&#34;https://github.com/strace/sequence/blob/master/scanner.go&#34;&gt;GeneralScanner&lt;/a&gt;. GeneralScanner is a sequential lexical analyzer that breaks a log message into a sequence of tokens. It is sequential because it goes through log message sequentially tokentizing each part of the message, without the use of regular expressions. The scanner currently recognizes time stamps, hex strings, IP (v4, v6) addresses, URLs, MAC addresses, integers and floating point numbers.&lt;/p&gt;

&lt;p&gt;This implementation was able to achieve both the functional and performance requirements. The following performance benchmarks are run on a single 4-core (2.8Ghz i7) MacBook Pro, although the tests were only using 1 or 2 cores. The first file is a bunch of sshd logs, averaging 98 bytes per message. The second is a Cisco ASA log file, averaging 180 bytes per message. Last is a mix of ASA, sshd and sudo logs, averaging 136 bytes per message.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  $ ./sequence bench scan -i ../../data/sshd.all
  Scanned 212897 messages in 0.78 secs, ~ 272869.35 msgs/sec

  $ ./sequence bench scan -i ../../data/allasa.log
  Scanned 234815 messages in 1.43 secs, ~ 163827.61 msgs/sec

  $ ./sequence bench scan -i ../../data/allasassh.log
  Scanned 447745 messages in 2.27 secs, ~ 197258.42 msgs/sec
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Performance can be improved by adding more cores:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  $ GOMAXPROCS=2 ./sequence bench scan -i ../../data/sshd.all -w 2
  Scanned 212897 messages in 0.43 secs, ~ 496961.52 msgs/sec

  $ GOMAXPROCS=2 ./sequenceo bench scan -i ../../data/allasa.log -w 2
  Scanned 234815 messages in 0.80 secs, ~ 292015.98 msgs/sec

  $ GOMAXPROCS=2 ./sequence bench scan -i ../../data/allasassh.log -w 2
  Scanned 447745 messages in 1.20 secs, ~ 373170.45 msgs/sec
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;concepts:cb54f18a9944e1962d3fe8e3f09ea809&#34;&gt;Concepts&lt;/h3&gt;

&lt;p&gt;To understand the scanner, you have to understand the following concepts that are part of the package.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;A &lt;em&gt;Token&lt;/em&gt; is a piece of information extracted from the original log message. It is a struct that contains fields for &lt;em&gt;TokenType&lt;/em&gt;, &lt;em&gt;FieldType&lt;/em&gt;, and &lt;em&gt;Value&lt;/em&gt;.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;A &lt;em&gt;TokenType&lt;/em&gt; indicates whether the token is a literal string (one that does not change), a variable string (one that could have different values), an IPv4 or IPv6 address, a MAC address, an integer, a floating point number, or a timestamp.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;A &lt;em&gt;FieldType&lt;/em&gt; indicates the semantic meaning of the token. For example, a token could be a source IP address (%srcipv4%), or a user (%srcuser% or %dstuser%), an action (%action%) or a status (%status%).&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;A &lt;em&gt;Sequence&lt;/em&gt; is a list of Tokens. It is the key data structure consumed and returned by the &lt;em&gt;Scanner&lt;/em&gt;, &lt;em&gt;Analyzer&lt;/em&gt;, and the &lt;em&gt;Parser&lt;/em&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Basically, the scanner takes a log message string, tokenizes it and returns a &lt;em&gt;Sequence&lt;/em&gt; with the recognized &lt;em&gt;TokenType&lt;/em&gt; marked. This &lt;em&gt;Sequence&lt;/em&gt; is then fed into the analyzer or parser, and the analyzer or parser in turn returns another &lt;em&gt;Sequence&lt;/em&gt; that has the recognized &lt;em&gt;FieldType&lt;/em&gt; marked.&lt;/p&gt;

&lt;h3 id=&#34;design:cb54f18a9944e1962d3fe8e3f09ea809&#34;&gt;Design&lt;/h3&gt;

&lt;p&gt;Tokenizers or scanners are usually implemented using finite-state machines. Each FSM (or FSA, finite state automata) understands a specific sequences of characters that make up a type of token.&lt;/p&gt;

&lt;p&gt;In the &lt;code&gt;sequence&lt;/code&gt; scanner, there are three FSMs: Time, HexString and General.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The Time FSM understands a list of &lt;a href=&#34;https://github.com/strace/sequence/blob/master/time.go&#34;&gt;time formats&lt;/a&gt;. This list of time formats are commonly seen in log messages. It is also fairly easy to add to this list if needed.&lt;/li&gt;
&lt;li&gt;The HexString FSM is designed to understand IPv6 addresses (dead:beef:1234:5678:223:32ff:feb1:2e50 or f0f0:f::1), MAC addresses (00:04:c1:8b:d8:82), fingerprints or signatures (de:ad:be:ef:74:a6:bb:45:45:52:71:de:b2:12:34:56).&lt;/li&gt;
&lt;li&gt;The General FSM that recognizes URLs, IPv4 addresses, and any literal or strings.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Each character in the log string are run through all three FSMs.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;If a time format is matched, that&amp;rsquo;s what it will be returned.&lt;/li&gt;
&lt;li&gt;Next if a hex string is matched, it is also returned.

&lt;ul&gt;
&lt;li&gt;We mark anything with 5 colon characters and no successive colons like &amp;ldquo;::&amp;rdquo; to be a MAC address.&lt;/li&gt;
&lt;li&gt;Anything that has 7 colons and no successive colons are marked as IPv6 address.&lt;/li&gt;
&lt;li&gt;Anything that has less than 7 colons but has only 1 set of successive colons like &amp;ldquo;::&amp;rdquo; are marked as IPv6 address.&lt;/li&gt;
&lt;li&gt;Everything else is just a literal.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Finally if neither of the above matched, we return what the general FSM has matched.

&lt;ul&gt;
&lt;li&gt;The general FSM recognizes these quote characters: &amp;ldquo;, &amp;lsquo; and &amp;lt;. If these characters are encountered, then it will consider anything between the quotes to be a single token.&lt;/li&gt;
&lt;li&gt;Anything that starts with http:// or https:// are considered URLs.&lt;/li&gt;
&lt;li&gt;Anything that matches 4 integer octets are considered IP addresses.&lt;/li&gt;
&lt;li&gt;Anything that matches two integers with a dot in between are considered floats.&lt;/li&gt;
&lt;li&gt;Anything that matches just numbers are considered integers.&lt;/li&gt;
&lt;li&gt;Everything else are literals.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;performance:cb54f18a9944e1962d3fe8e3f09ea809&#34;&gt;Performance&lt;/h3&gt;

&lt;p&gt;To achieve the performance requirements, the following rules and optimizations are followed. Some of these are Go specific, and some are general recommendations.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1. Go Through the String Once and Only Once&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;This is a hard requirement, otherwise we can&amp;rsquo;t call this project a &lt;em&gt;sequential&lt;/em&gt; parser. :)&lt;/p&gt;

&lt;p&gt;This is probably a pretty obvious technique. The more times you loop through loop through a string, the lower the performance. If you used regular expressions to parse logs, you will likely go through parts of the log message multiple times due to back tracking or look forward, etc.&lt;/p&gt;

&lt;p&gt;I took great pain to ensure that I don&amp;rsquo;t need to look forward or look backward in the log string to determine the current token type, and I think the effort paid off.&lt;/p&gt;

&lt;p&gt;In reality though, while I am only looping through the log string once, and only once, I do run each character through three different FSMs. However, it is still much less expensive than looping through three times, each time checking a single FSM. However, the more FSMs I run the characters through, the slower it gets.&lt;/p&gt;

&lt;p&gt;This was apparently when I &lt;a href=&#34;https://github.com/strace/sequence/commit/a5447814f43b4b9b7e804b14dde38e88fd53e6d0&#34;&gt;updated the scanner to support IPv6 and hex strings&lt;/a&gt;. I tried a couple of different approaches. First, I added an IPv6 specific FSM. So in addition to the original time, mac and general FSMs, there are now 4. That dropped performance by like 15%!!! That&amp;rsquo;s just unacceptable.&lt;/p&gt;

&lt;p&gt;The second approach, which is the one I checked in, combines the MAC, IPv6 and general hex strings into a single FSM. That helped somewhat. I was able to regain about 5% of the performance hit. However, because I can no longer short circuit the MAC address check (by string length and colon positions), I was still experiencing a 8-10% hit.&lt;/p&gt;

&lt;p&gt;What this means is that for most tokens, instead of checking just 2 FSMs because I can short circuit the MAC check pretty early, I have to now check all 3 FSMs.&lt;/p&gt;

&lt;p&gt;So the more FSMs, the more comlicated the FSMs, the more performance hits there will be.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2. Avoid Indexing into the String&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;This is really a Go-specific recommentation. Each time you index into a slice or string, Go will perform bounds checking for you, which means there&amp;rsquo;s extra operations it&amp;rsquo;s doing, and also means lower performance. As an example, here are results from two benchmark runs. The first is with bounds checking enabled, which is default Go behavior. The second disables bounds checking.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  $ go run ./sequence.go bench scan -i ../../data/sshd.all
  Scanned 212897 messages in 0.79 secs, ~ 268673.91 msgs/sec

  $ go run -gcflags=-B ./sequence.go bench scan -i ../../data/sshd.all
  Scanned 212897 messages in 0.77 secs, ~ 277479.58 msgs/sec
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The performance difference is approximately 3.5%! However, while it&amp;rsquo;s fun to see the difference, I would never recommend disable bounds checking in production. So the next best thing is to remove as many operations that index into a string or slice as possible. Specifically:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Use &amp;ldquo;range&amp;rdquo; in the loops, e.g. &lt;code&gt;for i, r := range str&lt;/code&gt; instead of &lt;code&gt;for i := 0; i &amp;lt; len(str); i++ { if str[i] == ... }&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;If you are checking a specific character in the string/slice multiple times, assign it to a variable and use the variable instead. This will avoid indexing into the slice/string multiple times.&lt;/li&gt;
&lt;li&gt;If there are multiple conditions in an &lt;code&gt;if&lt;/code&gt; statement, try to move (or add) the non-indexing checks to the front of the statement. This sometimes will help short circuit the checks and avoid the slice-indexing checks.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;One might question if this is worth optimizing, but like I said, I am trying to squeeze every oz of performance so 3.5% is still good for me. Unfornately I do know I won&amp;rsquo;t get 3.5% since I can&amp;rsquo;t remove every operation that index into slice/string.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3. Reduce Heap Allocation&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;This is true for all languages (where you can have some control of stack vs heap allocation), and it&amp;rsquo;s even more true in Go. Mainly in Go, if you allocate a new slice, Go will &amp;ldquo;zero&amp;rdquo; out the allocated memory. This is great from a safety perspective, but it does add to the overhead.&lt;/p&gt;

&lt;p&gt;As an example, in the scanner I originally allocated a new &lt;em&gt;Sequence&lt;/em&gt; (slice of &lt;em&gt;Token&lt;/em&gt;) for every new message. However, when i changed it to re-use the existing slice, the performance increased by over 10%!&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  $ go run ./sequence.go bench scan -i ../../data/sshd.all
  Scanned 212897 messages in 0.87 secs, ~ 246027.12 msgs/sec

  $ go run ./sequence.go bench scan -i ../../data/sshd.all
  Scanned 212897 messages in 0.77 secs, ~ 275038.83 msgs/sec
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The best thing to do is to run Go&amp;rsquo;s builtin CPU profiler, and look at the numbers for Go internal functions such as &lt;code&gt;runtime.makeslice&lt;/code&gt;, &lt;code&gt;runtime.markscan&lt;/code&gt;, and &lt;code&gt;runtime.memclr&lt;/code&gt;. Large percentages and numbers for these internal functions are dead giveaway that you are probably allocating too much stuff on the heap.&lt;/p&gt;

&lt;p&gt;I religiously go through the SVGs generated from the Go profiler to help me identify hot spots where I can optimize.&lt;/p&gt;

&lt;p&gt;Here&amp;rsquo;s also a couple of tips I picked up from the &lt;a href=&#34;https://groups.google.com/forum/#!topic/golang-nuts/baU4PZFyBQQ&#34;&gt;go-nuts mailing list&lt;/a&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Maps are bad&amp;ndash;even if they&amp;rsquo;re storing integers or other non-pointer structs. The implementation appears to have lots of pointers inside which must be evaluated and followed during mark/sweep GC.  Using structures with pointers magnifies the expense.&lt;/li&gt;
&lt;li&gt;Slices are surprisingly bad (including strings and substrings of existing strings). A slice is a pointer to the backing array with a length and capacity. It would appear that the internal pointer that causes the trouble because GC wants to inspect it.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;4. Reduce Data Copying&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Data copying is expensive. It means the run time has to allocate new space and copy the data over. It&amp;rsquo;s even more expensive when you can&amp;rsquo;t have do &lt;code&gt;memcpy&lt;/code&gt; of a slice in Go like you can in C. Again, direct memory copying is not Go&amp;rsquo;s design goal. It is also much safer if you can prevent users from playing with memory directly too much. However, it is still a good idea to avoid any copying of data, whether it&amp;rsquo;s string or slice.&lt;/p&gt;

&lt;p&gt;As much as I can, I try to do in place processing of the data. Every &lt;em&gt;Sequence&lt;/em&gt; is worked on locally and I try not to copy &lt;em&gt;Sequence&lt;/em&gt; or string unless I absolutely have to.&lt;/p&gt;

&lt;p&gt;Unfortunately I don&amp;rsquo;t have any comparison numbers for this one, because I learned from &lt;a href=&#34;http://zhen.org/blog/surgemq-mqtt-message-queue-750k-mps/&#34;&gt;previous projects&lt;/a&gt; that I should avoid copying as much as possible.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;5. Mind the Data Struture&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;If there&amp;rsquo;s one thing I learned over the past year, is to use the right data structure for the right job. I&amp;rsquo;ve written about other data structures such as &lt;a href=&#34;http://zhen.org/blog/ring-buffer-variable-length-low-latency-disruptor-style/&#34;&gt;ring buffer&lt;/a&gt;, &lt;a href=&#34;http://zhen.org/blog/benchmarking-bloom-filters-and-hash-functions-in-go/&#34;&gt;bloom filters&lt;/a&gt;, and &lt;a href=&#34;http://zhen.org/blog/go-skiplist/&#34;&gt;skiplist&lt;/a&gt; before.&lt;/p&gt;

&lt;p&gt;However, &lt;a href=&#34;http://en.wikipedia.org/wiki/Finite-state_machine&#34;&gt;finite-state automata or machine&lt;/a&gt; is my latest love and I&amp;rsquo;ve been using it at various projects such as my &lt;a href=&#34;http://zhen.org/blog/generating-porter2-fsm-for-fun-and-performance/&#34;&gt;porter2&lt;/a&gt; and &lt;a href=&#34;https://github.com/surge/xparse/tree/master/etld&#34;&gt;effective TLD&lt;/a&gt;. Ok, technical FSM itself is not a data structure and can be implemented in different ways. In the &lt;code&gt;sequence&lt;/code&gt; project, I used both a tree representation as well as a bunch of switch-case statements. For the &lt;a href=&#34;http://zhen.org/blog/generating-porter2-fsm-for-fun-and-performance/&#34;&gt;porter2&lt;/a&gt; FSMs, I used switch-case to implement them.&lt;/p&gt;

&lt;p&gt;Interestingly, swtich-case doesn&amp;rsquo;t always win. I tested the time FSM using both tree and switch-case implementations, and the tree actually won out. (Below, 1 is tree, 2 is switch-case.) So guess which one is checked in?&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;BenchmarkTimeStep1   2000000         696 ns/op
BenchmarkTimeStep2   2000000         772 ns/op
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Writing this actually reminds me that in the parser, I am currently using a tree to parse the sequences. While parsing, there could be multiple paths that the sequence will match. Currently I walk all the matched paths fully, before choosing one that has the highest score. What I should do is to do a weighted walk, and always walk the highest score nodes first. If at the end I get a perfect score, I can just return that path and not have to walk the other paths. (Note to self, more parser optimization to do).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;6. Avoid Interfaces If Possible&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;This is probably not a great advice to give to Go developers. Interface is probably one of the best Go features and everyone should learn to use it. However, if you want high performane, avoid interfaces as it provides additional layers of indirection. I don&amp;rsquo;t have performance numbers for the &lt;code&gt;sequence&lt;/code&gt; project since I tried to avoid interfaces in high performance areas from the start. However, previous in the &lt;a href=&#34;http://zhen.org/blog/ring-buffer-variable-length-low-latency-disruptor-style/&#34;&gt;ring buffer&lt;/a&gt; project, the version that uses interface is 140% slower than the version that didn&amp;rsquo;t.&lt;/p&gt;

&lt;p&gt;I don&amp;rsquo;t have the direct link but someone on the go-nuts mailing list also said:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If you really want high performance, I would suggest avoiding interfaces and, in general, function calls like the plague, since they are quite expensive in Go (compared to C). We have implemented basically the same for our internal web framework (to be released some day) and we&amp;rsquo;re almost 4x faster than encoding/json without doing too much optimization. I&amp;rsquo;m sure we could make this even faster.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;7. Find Ways to Short Circuit Checks&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Find ways to quickly eliminate the need to run a section of the code has been tremendously helpful to improve performance. For example, here are a couple of place where I tried to do that.&lt;/p&gt;

&lt;p&gt;In &lt;a href=&#34;https://github.com/strace/sequence/blob/master/scanner.go#L223&#34;&gt;this first example&lt;/a&gt;, I simply added &lt;code&gt;l == 1&lt;/code&gt; before the actual equality check of the string values. The first output is before the add, the second is after. The difference is about 2% performance increase.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  $ go run ./sequence.go bench scan -i ../../data/sshd.all
  Scanned 212897 messages in 0.78 secs, ~ 272303.79 msgs/sec

  $ go run ./sequence.go bench scan -i ../../data/sshd.all
  Scanned 212897 messages in 0.76 secs, ~ 278433.34 msgs/sec
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In &lt;a href=&#34;https://github.com/strace/sequence/blob/master/scanner.go#L282&#34;&gt;the second example&lt;/a&gt;, I added a quick check to make sure the remaining string is at least as long as the shortest time format. If there&amp;rsquo;s not enough characters, then don&amp;rsquo;t run the time FSM. The performance difference is about 2.5%.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  $ go run ./sequence.go bench scan -i ../../data/sshd.all
  Scanned 212897 messages in 0.78 secs, ~ 272059.04 msgs/sec

  $ go run ./sequence.go bench scan -i ../../data/sshd.all
  Scanned 212897 messages in 0.76 secs, ~ 279388.47 msgs/sec
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;So by simply adding a couple of checks, I&amp;rsquo;ve increased perfromance by close to 5%.&lt;/p&gt;

&lt;h2 id=&#34;conclusion:cb54f18a9944e1962d3fe8e3f09ea809&#34;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;At this point I think I have squeezed every bit of performance out of the scanner, to the extend of my knowledge. It&amp;rsquo;s performing relatively well and it&amp;rsquo;s given the parser plenty of head room to do other things. I hope some of these lessons are helpful to whatever you are doing.&lt;/p&gt;

&lt;p&gt;Feel free to take a look at the &lt;a href=&#34;https://github.com/strace/sequence&#34;&gt;sequence&lt;/a&gt; project and try it out if you. If you have any issues/comments, please don&amp;rsquo;t hestiate to &lt;a href=&#34;https://github.com/strace/sequence/issues&#34;&gt;open a github issue&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Sequence: Automated Analyzer for Reducing 100,000&#39;s of Log Messages to 10&#39;s of Patterns</title>
      <link>http://zhen.org/blog/sequence-automated-analyzer-for-reducing-100k-messages-to-10s-of-patterns/</link>
      <pubDate>Tue, 10 Feb 2015 06:40:20 -0800</pubDate>
      
      <guid>http://zhen.org/blog/sequence-automated-analyzer-for-reducing-100k-messages-to-10s-of-patterns/</guid>
      <description>

&lt;p&gt;Information here maybe outdated. Please visit &lt;a href=&#34;http://sequencer.io&#34;&gt;http://sequencer.io&lt;/a&gt; for latest.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;This is part 2 of the &lt;a href=&#34;http://sequencer.io&#34;&gt;sequence&lt;/a&gt; series.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://zhen.org/blog/sequence-high-performance-sequential-semantic-log--parser/&#34;&gt;Part 1&lt;/a&gt; is about the high performance parser that can parse 100,000-200,000 MPs.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://zhen.org/blog/sequence-automated-analyzer-for-reducing-100k-messages-to-10s-of-patterns/&#34;&gt;Part 2&lt;/a&gt; is about automating the process of reducing 100 of 1000&amp;rsquo;s of log messages down to dozens of unique patterns.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://zhen.org/blog/sequence-optimizing-go-for-high-performance-log-scanner/&#34;&gt;Part 3&lt;/a&gt; is about optimizing Go to achieve very high performance (200,000 - 500,000 MPS depending on message size) for scanning and tokenizing log messages&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;background:61b1adc09fb9bc31a28d4faabfef3631&#34;&gt;Background&lt;/h2&gt;

&lt;p&gt;This post really takes me down the memory lane. Back in 2005, while I was at LogLogic, we envisioned an automated approach to tagging, or labeling, log messages. More specifically, we wanted to automatically tag specific components within the log messages with their semantic label, such as a source IP address, or a target user.&lt;/p&gt;

&lt;p&gt;At the time, much like it is still today, the message parsing process is performed manually. This means someone has to manually look at the object and decided that the object should be labeled ‚Äúuser‚Äù or ‚ÄútargetUser.‚Äù An  analyst has to go through the log data, create a regular expression that extracts the useful strings out, and then finally assigning these to a specific label. This is extremely time consuming and error-prone.&lt;/p&gt;

&lt;p&gt;At that time, the vision was to provide an automated approach to universally parse and analyze ANY log data. The key phrase being ‚Äúautomated approach.‚Äù This means the users should only need to provide minimum guidance to the system, if any, for the platforms to be able to analyze the log data. LogLogic never did much with this, unfortunately.&lt;/p&gt;

&lt;p&gt;However, the tagging concept was later on adopted by (and I know how this got into CEE :) the &lt;a href=&#34;http://cee.mitre.org/&#34;&gt;Common Event Expression, or CEE&lt;/a&gt; effort by Mitre. This idea of tags also inspired &lt;a href=&#34;http://www.liblognorm.com/&#34;&gt;liblognorm&lt;/a&gt; to develop their &lt;a href=&#34;http://www.libee.org/&#34;&gt;libee&lt;/a&gt; library and &lt;a href=&#34;http://www.liblognorm.com/news/log-classification-with-liblognorm/&#34;&gt;tagging system&lt;/a&gt;. Rsyslog&amp;rsquo;s &lt;a href=&#34;http://www.rsyslog.com/doc/mmnormalize.html&#34;&gt;mmnormalize&lt;/a&gt; module is based on liblognorm.&lt;/p&gt;

&lt;p&gt;And then there&amp;rsquo;s Fedora&amp;rsquo;s &lt;a href=&#34;https://fedorahosted.org/lumberjack/&#34;&gt;Project Lumberjack&lt;/a&gt;, which &amp;ldquo;is an open-source project to update and enhance the event log architecture&amp;rdquo; and &amp;ldquo;aims to improve the creation and standardize the content of event logs by implementing the concepts and specifications proposed by the ‚ÄãCommon Event Expression (CEE).&amp;rdquo;&lt;/p&gt;

&lt;p&gt;Then finally &lt;a href=&#34;http://logstash.net/&#34;&gt;logstash&lt;/a&gt; has their &lt;a href=&#34;http://logstash.net/docs/1.4.2/filters/grok&#34;&gt;grok filter&lt;/a&gt; that basically does similar extraction of unstructured data into a structured and queryable format. However, it seems like there might be some &lt;a href=&#34;http://ghost.frodux.in/logstash-grok-speeds/&#34;&gt;performance bottlenecks&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;However, none of these efforts attempted to solve the automated tagging/labeling problem. They mostly just try to provide a parser for log messages.&lt;/p&gt;

&lt;p&gt;Also, it looks like many of these efforts have all been abandoned or put in hibernation, and haven&amp;rsquo;t been updated since 2012 or 2013. liblognrom did put out &lt;a href=&#34;http://www.liblognorm.com/news/&#34;&gt;a couple of updates&lt;/a&gt; in the past couple of years. Logstash&amp;rsquo;s grok obviously is being maintained and developed with the &lt;a href=&#34;http://www.elasticsearch.com/&#34;&gt;Elasticsearch&lt;/a&gt; backing.&lt;/p&gt;

&lt;p&gt;It is understandable, unfortunately. Log parsing is &lt;strong&gt;BORING&lt;/strong&gt;. I mean, who wants to sit there and stare at logs all day and try to come up with regular expressions or other types of parsing rules? LogLogic used to have a team of LogLabs analysts that did that, and I have to say I truly appreciated their effort and patience, because I cannot do that.&lt;/p&gt;

&lt;h3 id=&#34;the-end-result:61b1adc09fb9bc31a28d4faabfef3631&#34;&gt;The End Result&lt;/h3&gt;

&lt;p&gt;So instead of writing rules all day long, I decided to create an analyzer that can help us get at least 75% of the way there. The end result is the &lt;code&gt;Analyzer&lt;/code&gt;, written in &lt;a href=&#34;http://golang.org&#34;&gt;Go&lt;/a&gt;, in the &lt;a href=&#34;https://github.com/strace/sequence&#34;&gt;sequence&lt;/a&gt; project I created. Here are some preliminary results. Below, we analyzed 2 files. The first is a file with over 200,000 sshd messages. The second is a file with a mixture of ASA, sshd, sudo and su log messages. It contains almost 450,000 messages.&lt;/p&gt;

&lt;p&gt;By running the analyzer over these logs, the pure sshd log file returned 45 individual patterns, and the second returned 103 unique patterns.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ go run sequence.go analyze -i ../../data/sshd.all -o sshd.analyze
Analyzed 212897 messages, found 45 unique patterns, 45 are new.

$ go run sequence.go analyze -i ../../data/asasshsudo.log -o asasshsudo.analyze
Analyzed 447745 messages, found 103 unique patterns, 103 are new.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And the output file has entries such as:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;%msgtime% %apphost% %appname% [ %sessionid% ] : %status% %method% for %srcuser% from %srcipv4% port %srcport% ssh2
# Jan 15 19:39:26 irc sshd[7778]: Accepted password for jlz from 108.61.8.124 port 57630 ssh2

%msgtime% %appipv4% %appname% : %action% outbound %protocol% connection %sessionid% for %string% : %srcipv4% / %srcport% ( %ipv4% / %integer% ) to %string% : %dstipv4% / %dstport% ( %ipv4% / %integer% )
# 2012-04-05 18:46:18   172.23.0.1  %ASA-6-302013: Built outbound TCP connection 1424575 for outside:10.32.0.100/80 (10.32.0.100/80) to inside:172.23.73.72/2522 (10.32.0.1/54702)

%msgtime% %apphost% %appname% : %string% : tty = %string% ; pwd = %string% ; user = %srcuser% ; command = %command% - %string%
# Jan 15 14:09:11 irc sudo:    jlz : TTY=pts/1 ; PWD=/home/jlz ; USER=root ; COMMAND=/bin/su - irc
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;As you can see, the output is not 100%, but it gets us pretty close. Once the analyst goes through and updates the rules, he/she can re-run the analyzer anytime with any file to determine if there&amp;rsquo;s new patterns. For example, below, we ran the sshd log file with an existing pattern file, and got 4 new log patterns.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ go run sequence.go analyze -i ../../data/sshd.all -p ../../patterns/sshd.txt -o sshd.analyze
Analyzed 212897 messages, found 39 unique patterns, 4 are new.
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;parser-quick-review:61b1adc09fb9bc31a28d4faabfef3631&#34;&gt;Parser - Quick Review&lt;/h3&gt;

&lt;p&gt;I wrote about the &lt;a href=&#34;http://zhen.org/blog/sequence-high-performance-sequential-semantic-log--parser/&#34;&gt;sequence parser&lt;/a&gt; a couple of weeks back. It is a &lt;em&gt;high performance sequential log parser&lt;/em&gt;. It &lt;em&gt;sequentially&lt;/em&gt; goes through a log message, &lt;em&gt;parses&lt;/em&gt; out the meaningful parts, without the use regular expressions. It can achieve &lt;em&gt;high performance&lt;/em&gt; parsing of &lt;strong&gt;100,000 - 200,000 messages per second (MPS)&lt;/strong&gt; without the need to separate parsing rules by log source type. Underneath the hood, the &lt;code&gt;sequence&lt;/code&gt; parser basically constructs a tree based on the sequential rules, walks the tree to identify all the possible paths, and returns the path that has the best match (highest weight) for the message.&lt;/p&gt;

&lt;p&gt;While the analyzer is about reducing a large corupus of raw log messages down to a small set of unique patterns, the parser is all about matching log messages to an existing set of patters and determining whether a specific pattern has matched. Based on the pattern, it returns a sequence of tokens that basically extracts out the important pieces of information from the logs. The analysts can then take this sequence and perform other types of analysis.&lt;/p&gt;

&lt;p&gt;The approach taken by the &lt;code&gt;sequence&lt;/code&gt; parser is pretty much the same as liblognorm or other tree-based approaches.&lt;/p&gt;

&lt;h2 id=&#34;sequence-analyzer:61b1adc09fb9bc31a28d4faabfef3631&#34;&gt;Sequence Analyzer&lt;/h2&gt;

&lt;p&gt;In the following section I will go through additional details of how the &lt;code&gt;sequence&lt;/code&gt; analyzer reduces 100 of 1000&amp;rsquo;s of raw log messages down to just 10&amp;rsquo;s of unique patterns, and then determining how to label the individual tokens.&lt;/p&gt;

&lt;h3 id=&#34;identifying-unique-patterns:61b1adc09fb9bc31a28d4faabfef3631&#34;&gt;Identifying Unique Patterns&lt;/h3&gt;

&lt;p&gt;Analyzer builds an analysis tree that represents all the Sequences from messages. It can be used to determine all of the unique patterns for a large body of messages.&lt;/p&gt;

&lt;p&gt;It&amp;rsquo;s based on a single basic concept, that for multiple log messages, if tokens in the same position shares one same parent and one same child, then the tokens in that position is likely variable string, which means it&amp;rsquo;s something we can extract. For example, take a look at the following two messages:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Jan 12 06:49:42 irc sshd[7034]: Accepted password for root from 218.161.81.238 port 4228 ssh2
Jan 12 14:44:48 jlz sshd[11084]: Accepted publickey for jlz from 76.21.0.16 port 36609 ssh2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The first token of each message is a timestamp, and the 3rd token of each message is the literal &amp;ldquo;sshd&amp;rdquo;. For the literals &amp;ldquo;irc&amp;rdquo; and &amp;ldquo;jlz&amp;rdquo;, they both share a common parent, which is a timestamp. They also both share a common child, which is &amp;ldquo;sshd&amp;rdquo;. This means token in between these, the 2nd token in each message, likely represents a variable token in this message type. In this case, &amp;ldquo;irc&amp;rdquo; and &amp;ldquo;jlz&amp;rdquo; happens to
represent the syslog host.&lt;/p&gt;

&lt;p&gt;Looking further down the message, the literals &amp;ldquo;password&amp;rdquo; and &amp;ldquo;publickey&amp;rdquo; also share a common parent, &amp;ldquo;Accepted&amp;rdquo;, and a common child, &amp;ldquo;for&amp;rdquo;. So that means the token in this position is also a variable token (of type TokenString).&lt;/p&gt;

&lt;p&gt;You can find several tokens that share common parent and child in these two messages, which means each of these tokens can be extracted. And finally, we can determine that the single pattern that will match both is:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;%time% %string% sshd [ %integer% ] : Accepted %string% for %string% from %ipv4% port %integer% ssh2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If later we add another message to this mix:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Jan 12 06:49:42 irc sshd[7034]: Failed password for root from 218.161.81.238 port 4228 ssh2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The Analyzer will determine that the literals &amp;ldquo;Accepted&amp;rdquo; in the 1st message, and &amp;ldquo;Failed&amp;rdquo; in the 3rd message share a common parent &amp;ldquo;:&amp;rdquo; and a common child &amp;ldquo;password&amp;rdquo;, so it will determine that the token in this position is also a variable token. After all three messages are analyzed, the final pattern that will match all three
messages is:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;%time% %string% sshd [ %integer% ] : %string% %string% for %string% from %ipv4% port %integer% ssh2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;By applying this concept, we can effectively identify all the unique patterns in a log file.&lt;/p&gt;

&lt;h3 id=&#34;determining-the-correct-labels:61b1adc09fb9bc31a28d4faabfef3631&#34;&gt;Determining the Correct Labels&lt;/h3&gt;

&lt;p&gt;Now that we have the unique patterns, we will scan the tokens to determine which labels we should apply to them.&lt;/p&gt;

&lt;p&gt;System and network logs are mostly free form text. There&amp;rsquo;s no specific patterns to any of them. So it&amp;rsquo;s really difficult to determine how to label specific parts of the log message automatically. However, over the years, after looking at so many system and network log messages, some patterns will start to emerge.&lt;/p&gt;

&lt;p&gt;There&amp;rsquo;s no &amp;ldquo;machine learning&amp;rdquo; here. This section is all about codifying these human learnings. I&amp;rsquo;ve created the following 6 rules to help label tokens in the log messages. By no means are these rules perfect. They are at best just guesses on how to label. But hopefully they can get us 75% of the way there and we human can just take it the rest of the way.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;0. Parsing Email and Hostname Formats&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;This is technically not a labeling step. Before we actually start the labeling process, we wanted to first parse out a couple more formats like email and host names. The message tokenizer doesn&amp;rsquo;t recognize these because they are difficult to parse and will slow down the tokenizer. These specific formats are also not needed by the parser. So because the analyzer doesn&amp;rsquo;t care about performance as much, we can do this as post-processing step.&lt;/p&gt;

&lt;p&gt;To recognize the hostname, we try to match the &amp;ldquo;effective TLD&amp;rdquo; using the &lt;a href=&#34;https://github.com/surge/xparse/tree/master/etld&#34;&gt;xparse/etld&lt;/a&gt; package. It is an effective TLD matcher that returns the length of the effective domain name for the given string. It uses the data set from &lt;a href=&#34;https://www.publicsuffix.org/list/effective_tld_names.dat&#34;&gt;https://www.publicsuffix.org/list/effective_tld_names.dat&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1. Recognizing Syslog Headers&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;First we will try to see if we can regonize the syslog headers. We try to recogize both RFC5424 and RFC3164 syslog headers:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	// RFC5424
	// - &amp;quot;1 2003-10-11T22:14:15.003Z mymachine.example.com evntslog - ID47 ...&amp;quot;
	// - &amp;quot;1 2003-08-24T05:14:15.000003-07:00 192.0.2.1 myproc 8710 - ...&amp;quot;
	// - &amp;quot;1 2003-10-11T22:14:15.003Z mymachine.example.com su - ID47 ...&amp;quot;
	// RFC3164
	// - &amp;quot;Oct 11 22:14:15 mymachine su: ...&amp;quot;
	// - &amp;quot;Aug 24 05:34:00 CST 1987 mymachine myproc[10]: ...&amp;quot;
	// - &amp;quot;jan 12 06:49:56 irc last message repeated 6 times&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If the sequence pattern matches any of the above sequence, then we assume the first few tokens belong to the syslog header.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2. Marking Key and Value Pairs&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The next step we perform is to mark known &amp;ldquo;keys&amp;rdquo;. There are two types of keys. First, we identify any token before the &amp;ldquo;=&amp;rdquo; as a key. For example, the message &lt;code&gt;fw=TOPSEC priv=6 recorder=kernel type=conn&lt;/code&gt; contains 4 keys: &lt;code&gt;fw&lt;/code&gt;, &lt;code&gt;priv&lt;/code&gt;, &lt;code&gt;recorder&lt;/code&gt; and &lt;code&gt;type&lt;/code&gt;. These keys should be considered string literals, and should not be extracted. However, they can be used to determine how the value part should be labeled.&lt;/p&gt;

&lt;p&gt;The second types of keys are determined by keywords that often appear in front of other tokens, I call these &lt;strong&gt;prekeys&lt;/strong&gt;. For example, we know that the prekey &lt;code&gt;from&lt;/code&gt; usually appears in front of any source host or IP address, and the prekey &lt;code&gt;to&lt;/code&gt; usually appears in front of any destination host or IP address. Below are some examples of these prekeys.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;from 		= [ &amp;quot;%srchost%&amp;quot;, &amp;quot;%srcipv4%&amp;quot; ]
port 		= [ &amp;quot;%srcport%&amp;quot;, &amp;quot;%dstport%&amp;quot; ]
proto		= [ &amp;quot;%protocol%&amp;quot; ]
sport		= [ &amp;quot;%srcport%&amp;quot; ]
src 		= [ &amp;quot;%srchost%&amp;quot;, &amp;quot;%srcipv4%&amp;quot; ]
to 			= [ &amp;quot;%dsthost%&amp;quot;, &amp;quot;%dstipv4%&amp;quot;, &amp;quot;%dstuser%&amp;quot; ]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To help identify these prekeys, I wrote a quick program that goes through many of the logs I have to help identify what keywords appears before IP address, mac addresses, and other non-literal tokens. The result is put into the &lt;a href=&#34;https://github.com/strace/sequence/blob/master/keymaps.go&#34;&gt;keymaps.go&lt;/a&gt; file. It&amp;rsquo;s not comprehensive, but it&amp;rsquo;s also not meant to be. We just need enough hints to help with labeling.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3. Labeling &amp;ldquo;Values&amp;rdquo; by Their Keys&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Once the keys are labeled, we can label the values based on the mapping described above. For key/value pairs, we try to recognize both &lt;code&gt;key=value&lt;/code&gt; or &lt;code&gt;key=&amp;quot;value&amp;quot;&lt;/code&gt; formats (or other quote characters like &amp;lsquo; or &amp;lt;).&lt;/p&gt;

&lt;p&gt;For the prekeys, we try to find the value token within 2 tokens of the key token. That means sequences such as &lt;code&gt;from 192.168.1.1&lt;/code&gt; and &lt;code&gt;from ip 192.168.1.1&lt;/code&gt; will identify &lt;code&gt;192.168.1.1&lt;/code&gt; as the &lt;code&gt;%srcipv4%&lt;/code&gt; based on the above mapping, but we will miss &lt;code&gt;from ip address 192.168.1.1&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;4. Identifying Known Keywords&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Within most log messages, there are certain keywords that would indicate what actions were performed, what the state/status of the action was, and what objects the actions were performed on. CEE had a list that it identified, so I copied the list and added some of my own.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;action = [
	&amp;quot;access&amp;quot;,
	&amp;quot;alert&amp;quot;,
	&amp;quot;allocate&amp;quot;,
	&amp;quot;allow&amp;quot;,
	.
	.
	.
]

status = [
	&amp;quot;accept&amp;quot;,
	&amp;quot;error&amp;quot;,
	&amp;quot;fail&amp;quot;,
	&amp;quot;failure&amp;quot;,
	&amp;quot;success&amp;quot;
]

object = [
	&amp;quot;account&amp;quot;,
	&amp;quot;app&amp;quot;,
	&amp;quot;bios&amp;quot;,
	&amp;quot;driver&amp;quot;,
	.
	.
	.
]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In our labeling process, we basically goes through and identify all the string literals that are NOT marked as keys, and perform a &lt;a href=&#34;https://github.com/surge/porter2&#34;&gt;porter2 stemming operation&lt;/a&gt; on the literal, then compare to the above list (which is also porter2 stemmed).&lt;/p&gt;

&lt;p&gt;If a literal matches one of the above lists, then the corresponding label (&lt;code&gt;action&lt;/code&gt;, &lt;code&gt;status&lt;/code&gt;, &lt;code&gt;object&lt;/code&gt;, &lt;code&gt;srcuser&lt;/code&gt;, &lt;code&gt;method&lt;/code&gt;, or &lt;code&gt;protocol&lt;/code&gt;) is applied.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;5. Determining Positions of Specific Types&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;In this next step, we are basically looking at the position of where some of the token types appear. Specifically, we are looking for &lt;code&gt;%time%&lt;/code&gt;, &lt;code&gt;%url%&lt;/code&gt;, &lt;code&gt;%mac%&lt;/code&gt;, &lt;code&gt;%ipv4%&lt;/code&gt;, &lt;code&gt;%host%&lt;/code&gt;, and &lt;code&gt;%email%&lt;/code&gt; tokens. Assuming the labels have not already been taken with the previous rules, the rules are as follows:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The first %time% token is labeled as %msgtime%&lt;/li&gt;
&lt;li&gt;The first %url% token is labeled as %object%&lt;/li&gt;
&lt;li&gt;The first %mac% token is labeled as %srcmac% and the second is labeld as %dstmac%&lt;/li&gt;
&lt;li&gt;The first %ipv4% token is labeled as %srcipv4% and the second is labeld as %dstipv4%&lt;/li&gt;
&lt;li&gt;The first %host% token is labeled as %srchost% and the second is labeld as %dsthost%&lt;/li&gt;
&lt;li&gt;The first %email% token is labeled as %srcemail% and the second is labeld as %dstemail%&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;6. Scanning for ip/port or ip:port Pairs&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Finally, after all that, we scan through the sequence again, and identify any numbers that follow an IP address, but separated by either a &amp;ldquo;/&amp;rdquo; or &amp;ldquo;:&amp;ldquo;. Then we label these numbers as either &lt;code&gt;%srcport%&lt;/code&gt; or &lt;code&gt;%dstport%&lt;/code&gt; based on how the previous IP address is labeled.&lt;/p&gt;

&lt;h3 id=&#34;summary:61b1adc09fb9bc31a28d4faabfef3631&#34;&gt;Summary&lt;/h3&gt;

&lt;p&gt;There are some limitations to the &lt;code&gt;sequence&lt;/code&gt; parser and analyzer. For example, currently &lt;code&gt;sequence&lt;/code&gt; does not handle multi-line logs. Each log message must appear as a single line. So if there&amp;rsquo;s multi-line logs, they must be first be converted into a single line. Also, &lt;code&gt;sequence&lt;/code&gt; has been only tested with a limited set of system (Linux, AIX, sudo, ssh, su, dhcp, etc etc), network (ASA, PIX, Neoteris, CheckPoint, Juniper Firewall) and infrastructure application (apache, bluecoat, etc) logs.&lt;/p&gt;

&lt;p&gt;Documentation is available at godoc: &lt;a href=&#34;http://godoc.org/github.com/strace/sequence&#34;&gt;package&lt;/a&gt;, &lt;a href=&#34;http://godoc.org/github.com/strace/sequence/cmd/sequence&#34;&gt;command&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;There are some pattern files developed for ASA, Sudo and SSH in the &lt;code&gt;patterns&lt;/code&gt; directory. The goal is to continue to develop a set of patterns for the various log messages, and along the way add additional features to the parser that can help make it even easier to parse log messages.&lt;/p&gt;

&lt;p&gt;If you have a set of logs you would like me to test out, please feel free to &lt;a href=&#34;https://github.com/strace/sequence/issues&#34;&gt;open an issue&lt;/a&gt; and we can arrange a way for me to download and test your logs.&lt;/p&gt;

&lt;p&gt;Stay tuned for more log patterns&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Papers I Read: 2015 Week 6</title>
      <link>http://zhen.org/blog/papers-i-read-2015-week-6/</link>
      <pubDate>Sun, 08 Feb 2015 19:57:56 -0800</pubDate>
      
      <guid>http://zhen.org/blog/papers-i-read-2015-week-6/</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;http://paperswelove.org/&#34;&gt;Papers We Love&lt;/a&gt; has been making rounds lately and a lot of people are excited about it. I also think it&amp;rsquo;s kind of cool since I&amp;rsquo;ve been reading a lot of research papers over the past year or so. I have been killing some trees because of that.&lt;/p&gt;

&lt;p&gt;My interests have been mostly around data analytics, but the specific focus areas have changed a few times. I have read papers on data structures (bloom filters, skiplist, bitmap compression, etc), security analytics, consumer behavioral analysis, loyalty analytics, and now back to security analytics. In fact, recently I started reading a few security research papers that I found on &lt;a href=&#34;http://www.covert.io/&#34;&gt;covert.io&lt;/a&gt;, put together by Jason Trost.&lt;/p&gt;

&lt;p&gt;In any case, I thought it might be an interesting idea to share some of the papers I read/scan/skim on weekly basis. This way I can also track what I read over time.&lt;/p&gt;

&lt;h3 id=&#34;random-ramblings:e2137c343047358d9912399632750231&#34;&gt;Random Ramblings&lt;/h3&gt;

&lt;p&gt;This week has been a disaster. I was the last one in the family to catch the cold, but probably lasted the longest. In fact I am still only about 50%. This whole week I have been having headaches, body aches, and haven&amp;rsquo;t been able to concentrate. My body must be trying to catch up on sleep or something. For a couple days I actually slept for almost 12 hours a night!&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ve been meaning to work on &lt;a href=&#34;https://github.com/strace/sequence&#34;&gt;sequence&lt;/a&gt; and finish updating the analyzer, but really had a hard time concentrating. Any non-working hours are basically spent in bed if I could.&lt;/p&gt;

&lt;p&gt;So this is probably the worst week to start the &amp;ldquo;Papers I Read&amp;rdquo; series since I only technically read 1 paper. But I am going to cheat a little, and list the papers I read over the past couple of weeks, pretty much all in my spare time.&lt;/p&gt;

&lt;p&gt;This week we also saw Sony&amp;rsquo;s accouncement that last year&amp;rsquo;s hack cost them &lt;a href=&#34;http://www.sony.net/SonyInfo/IR/financial/fr/150204_sony.pdf&#34;&gt;$15 million&lt;/a&gt; to investigate and remediate. It&amp;rsquo;s pretty crazy if you think about it.&lt;/p&gt;

&lt;p&gt;Let&amp;rsquo;s assume that they hired a bunch of high-priced consultants, say $250/hour, to help comb through the logs and clean the systems. And let&amp;rsquo;s say &lt;sup&gt;2&lt;/sup&gt;&amp;frasl;&lt;sub&gt;3&lt;/sub&gt; of the $15m is spent on these consultants. That&amp;rsquo;s &lt;code&gt;$10m / $250 = 40,000 hours&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Let&amp;rsquo;s say these consultants worked full time, non-stop, no weekends, no breaks, for 2 months since the announcement on Nov 24, 2014, that would be a team of 56 people (&lt;code&gt;40,000 hours / 60 days / 12 hours/day = 56&lt;/code&gt;) working 12 hour days!&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ll tell ya, these security guys are raking it in. They make money upfront by selling products/services to protect the company, then they make money in the back by selling forensic services to clean up after the hack.&lt;/p&gt;

&lt;p&gt;[Disclaimer: any mistake in my calculations/assumptions I blame on my drugged brain cells.]&lt;/p&gt;

&lt;h3 id=&#34;papers-i-read:e2137c343047358d9912399632750231&#34;&gt;Papers I Read&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.covert.io/research-papers/security/Beehive%20-%20Large-Scale%20Log%20Analysis%20for%20Detecting%20Suspicious%20Activity%20in%20Enterprise%20Networks.pdf&#34;&gt;Beehive: Large-Scale Log Analysis for Detecting Suspicious Activity in Enterprise Networks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;We present a novel system, Beehive, that attacks the problem of automatically mining and extracting knowledge from the dirty log data produced by a wide variety of security products in a large enterprise. We improve on signature-based approaches to detecting security incidents and instead identify suspicious host behaviors that Beehive reports as potential security incidents.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://minds.cs.umn.edu/publications/chapter.pdf&#34;&gt;Data Mining for Cyber Security&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;This chapter provides an overview of the Minnesota Intrusion Detection System (MINDS), which uses a suite of data mining based algorithms to address different aspects of cyber security. The various components of MINDS such as the scan detector, anomaly detector and the profiling module detect different types of attacks
and intrusions on a computer network.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.covert.io/research-papers/security/VAST-%20Network%20Visibility%20Across%20Space%20and%20Time.pdf&#34;&gt;VAST: Network Visibility Across Space and Time&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Key operational networking tasks, such as troubleshooting and defending against attacks, greatly benefit from attaining views of network activity that are unified across space and time. This means that data from heterogeneous devices and systems is treated in a uniformfashion, and that analyzing past activity and detecting future instances follow the same procedures. Based on previous ideas that formulated principles for comprehensive
network visibility [AKP+08], we present the design and architecture of Visibility Across Space and Time (VAST), an intelligent database that serves as a single vantage point into the network. The system is based on a generic event model to handle network data from disparate sources and provides a query architecture that allows operators or remote applications to extract events matching a given condition. We implemented a proof-of-principle prototype that can archive and index events from a wide range of sources. Moreover, we conducted a preliminary performance evaluation to verify that our implementation works efficient and as expected.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.covert.io/research-papers/security/Finding%20The%20Needle-%20Suppression%20of%20False%20Alarms%20in%20Large%20Intrusion%20Detection%20Data%20Sets.pdf&#34;&gt;Finding The Needle: Suppression of False Alarms in Large Intrusion Detection Data Sets&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Managed security service providers (MSSPs) must manage and monitor thousands of intrusion detection sensors.
The sensors often vary by manufacturer and software version, making the problem of creating generalized tools to separate true attacks from false positives particularly difficult. Often times it is useful from an operations perspective to know if a particular sensor is acting out of character. We propose a solution to this problem using anomaly detection techniques over the set of alarms produced by the sensors. Similar to the manner in which an anomaly based sensor detects deviations from normal user or system behavior, we establish the baseline
behavior of a sensor and detect deviations from this baseline. We show that departures from this profile by a sensor have a high probability of being artifacts of genuine attacks. We evaluate a set of time-based Markovian heuristics against a simple compression algorithm and show that we are able to detect the existence of all attacks which were manually identified by security personnel, drastically reduce the number of false positives, and identify attacks which were overlooked during manual evaluation.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://user.informatik.uni-goettingen.de/~krieck/docs/2013a-aisec.pdf&#34;&gt;A Close Look on n-Grams in Intrusion Detection: Anomaly Detection vs. Classification&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;Detection methods based on n-gram models have been widely studied for the identification of attacks and malicious software. These methods usually build on one of two learning schemes: anomaly detection, where a model of normality is constructed from n-grams, or classification, where a discrimination between benign and malicious n-grams is learned. Although successful in many security domains, previous work falls short of explaining why a particular scheme is used and more importantly what renders one favorable over the other for a given type of data. In this paper we provide a close look on n-gram models for intrusion detection. We specifically study anomaly detection and classification using n-grams and develop criteria for data being used in one or the other
scheme. Furthermore, we apply these criteria in the scope of web intrusion detection and empirically validate their effectiveness with different learning-based detection methods for client-side and service-side attacks.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.scalyr.com/2014/05/searching-20-gbsec-systems-engineering-before-algorithms/&#34;&gt;Searching 20 GB/sec: Systems Engineering Before Algorithms&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Ok, this is a blog post, not a research paper, but it&amp;rsquo;s somewhat interesting nonetheless.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This article describes how we met that challenge using an ‚Äúold school‚Äù, brute-force approach, by eliminating layers and avoiding complex data structures. There are lessons here that you can apply to your own engineering challenges.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>Sequence: A High Performance Sequential Semantic Log Parser at 175,000 MPS</title>
      <link>http://zhen.org/blog/sequence-high-performance-sequential-semantic-log--parser/</link>
      <pubDate>Sun, 01 Feb 2015 10:40:20 -0800</pubDate>
      
      <guid>http://zhen.org/blog/sequence-high-performance-sequential-semantic-log--parser/</guid>
      <description>

&lt;p&gt;Information here maybe outdated. Please visit &lt;a href=&#34;http://sequencer.io&#34;&gt;http://sequencer.io&lt;/a&gt; for latest.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;This is part 1 of the &lt;a href=&#34;http://sequencer.io&#34;&gt;sequence&lt;/a&gt; series.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://zhen.org/blog/sequence-high-performance-sequential-semantic-log--parser/&#34;&gt;Part 1&lt;/a&gt; is about the high performance parser that can parse 100,000-200,000 MPs.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://zhen.org/blog/sequence-automated-analyzer-for-reducing-100k-messages-to-10s-of-patterns/&#34;&gt;Part 2&lt;/a&gt; is about automating the process of reducing 100 of 1000&amp;rsquo;s of log messages down to dozens of unique patterns.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://zhen.org/blog/sequence-optimizing-go-for-high-performance-log-scanner/&#34;&gt;Part 3&lt;/a&gt; is about optimizing Go to achieve very high performance (200,000 - 500,000 MPS depending on message size) for scanning and tokenizing log messages&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;background:d4419a1968098b45153921045f06326c&#34;&gt;Background&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;sequence&lt;/code&gt; is a &lt;em&gt;high performance sequential log parser&lt;/em&gt;. It &lt;em&gt;sequentially&lt;/em&gt; goes through a log message, &lt;em&gt;parses&lt;/em&gt; out the meaningful parts, without the use regular expressions. It can achieve &lt;em&gt;high performance&lt;/em&gt; parsing of &lt;strong&gt;100,000 - 200,000 messages per second (MPS)&lt;/strong&gt; without the need to separate parsing rules by log source type.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;sequence&lt;/code&gt; is currently under active development and should be considered unstable until further notice.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;If you have a set of logs you would like me to test out, please feel free to &lt;a href=&#34;https://github.com/strace/sequence/issues&#34;&gt;open an issue&lt;/a&gt; and we can arrange a way for me to download and test your logs.&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&#34;motivation:d4419a1968098b45153921045f06326c&#34;&gt;Motivation&lt;/h3&gt;

&lt;p&gt;Log messages are notoriusly difficult to parse because they all have different formats. Industries (see Splunk, ArcSight, Tibco LogLogic, Sumo Logic, Logentries, Loggly, LogRhythm, etc etc etc) have been built to solve the problems of parsing, understanding and analyzing log messages.&lt;/p&gt;

&lt;p&gt;Let&amp;rsquo;s say you have a bunch of log files you like to parse. The first problem you will typically run into is you have no way of telling how many DIFFERENT types of messages there are, so you have no idea how much work there will be to develop rules to parse all the messages. Not only that, you have hundreds of thousands, if not  millions of messages, in front of you, and you have no idea what messages are worth parsing, and what&amp;rsquo;s not.&lt;/p&gt;

&lt;p&gt;The typical workflow is develop a set of regular expressions and keeps testing against the logs until some magical moment where all the logs you want parsed are parsed. Ask anyone who does this for a living and they will tell you this process is long, frustrating and error-prone.&lt;/p&gt;

&lt;p&gt;Even after you have developed a set of regular expressions that match the original set of messages, if new messages come in, you will have to determine which of the new messages need to be parsed. And if you develop a new set of regular expressions to parse those new messages, you still have no idea if the regular expressions will conflict with the ones you wrote before. If you write your regex parsers too liberally, it can easily parse the wrong messages.&lt;/p&gt;

&lt;p&gt;After all that, you will end up finding out the regex parsers are quite slow. It can typically parse several thousands messages per second. Given enough CPU resources on a large enough machine, regex parsers can probably parse tens of thousands of messages per second. Even to achieve this type of performance, you will likely need to limit the number of regular expressions the parser has. The more regex rules, the slower the parser will go.&lt;/p&gt;

&lt;p&gt;To work around this performance issue, companies have tried to separate the regex rules for different log message types into different parsers. For example, they will have a parser for Cisco ASA logs, a parser for sshd logs, a parser for Apache logs, etc etc. And then they will require the users to tell them which parser to use (usually by indicating the log source type of the originating IP address or host.)&lt;/p&gt;

&lt;p&gt;Sequence is developed to make analyzing and parsing log messages a lot easier and faster.&lt;/p&gt;

&lt;h3 id=&#34;performance:d4419a1968098b45153921045f06326c&#34;&gt;Performance&lt;/h3&gt;

&lt;p&gt;The following performance benchmarks are run on a single 4-core (2.8Ghz i7) MacBook Pro. The first file is a
bunch of sshd logs, averaging 98 bytes per message. The second is a Cisco ASA log file, averaging 180 bytes per message.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  $ ./sequence bench -p ../../patterns/sshd.txt -i ../../data/sshd.all
  Parsed 212897 messages in 1.69 secs, ~ 126319.27 msgs/sec

  $ ./sequence bench -p ../../patterns/asa.txt -i ../../data/allasa.log
  Parsed 234815 messages in 2.89 secs, ~ 81323.41 msgs/sec

  $ ./sequence bench -d ../patterns -i ../data/asasshsudo.log
  Parsed 447745 messages in 4.47 secs, ~ 100159.65 msgs/sec
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Performance can be improved by adding more cores:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  GOMAXPROCS=2 ./sequence bench -p ../../patterns/sshd.txt -i ../../data/sshd.all -w 2
  Parsed 212897 messages in 1.00 secs, ~ 212711.83 msgs/sec

  $ GOMAXPROCS=2 ./sequence bench -p ../../patterns/asa.txt -i ../../data/allasa.log -w 2
  Parsed 234815 messages in 1.56 secs, ~ 150769.68 msgs/sec

  $ GOMAXPROCS=2 ./sequence bench -d ../patterns -i ../data/asasshsudo.log -w 2
  Parsed 447745 messages in 2.52 secs, ~ 177875.94 msgs/sec
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;documentation:d4419a1968098b45153921045f06326c&#34;&gt;Documentation&lt;/h3&gt;

&lt;p&gt;Documentation is available at godoc: &lt;a href=&#34;http://godoc.org/github.com/strace/sequence&#34;&gt;package&lt;/a&gt;, &lt;a href=&#34;http://godoc.org/github.com/strace/sequence/sequence&#34;&gt;command&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;license:d4419a1968098b45153921045f06326c&#34;&gt;License&lt;/h3&gt;

&lt;p&gt;Copyright &amp;copy; 2014 Dataence, LLC. All rights reserved.&lt;/p&gt;

&lt;p&gt;Licensed under the Apache License, Version 2.0 (the &amp;ldquo;License&amp;rdquo;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.apache.org/licenses/LICENSE-2.0&#34;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &amp;ldquo;AS IS&amp;rdquo; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.&lt;/p&gt;

&lt;h3 id=&#34;roadmap-futures:d4419a1968098b45153921045f06326c&#34;&gt;Roadmap / Futures&lt;/h3&gt;

&lt;p&gt;There are some pattern files developed for ASA, Sudo and SSH in the &lt;code&gt;patterns&lt;/code&gt; directory. The goal is to continue to develop a set of patterns for the various log messages, and along the way add additional features to the parser that can help make it even easier to parse log messages. So currently there&amp;rsquo;s not a set roadmap.&lt;/p&gt;

&lt;h2 id=&#34;concepts:d4419a1968098b45153921045f06326c&#34;&gt;Concepts&lt;/h2&gt;

&lt;p&gt;The following concepts are part of the package:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;A &lt;em&gt;Token&lt;/em&gt; is a piece of information extracted from the original log message. It is a struct that contains fields for &lt;em&gt;TokenType&lt;/em&gt;, &lt;em&gt;FieldType&lt;/em&gt;, &lt;em&gt;Value&lt;/em&gt;, and indicators of whether it&amp;rsquo;s a key or value in the key=value pair.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;A &lt;em&gt;TokenType&lt;/em&gt; indicates whether the token is a literal string (one that does not change), a variable string (one that could have different values), an IPv4 or IPv6 address, a MAC address, an integer, a floating point number, or a timestamp.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;A &lt;em&gt;FieldType&lt;/em&gt; indicates the semantic meaning of the token. For example, a token could be a source IP address (%srcipv4%), or a user (%srcuser% or %dstuser%), an action (%action%) or a status (%status%).&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;A &lt;em&gt;Sequence&lt;/em&gt; is a list of Tokens. It is returned by the &lt;em&gt;Tokenizer&lt;/em&gt;, and the &lt;em&gt;Parser&lt;/em&gt;.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;A &lt;em&gt;Scanner&lt;/em&gt; is a sequential lexical analyzer that breaks a log message into a sequence of tokens. It is sequential because it goes through log message sequentially tokentizing each part of the message, without the use of regular expressions. The scanner currently recognizes time stamps, IPv4 addresses, URLs, MAC addresses,
integers and floating point numbers. It also recgonizes key=value or key=&amp;ldquo;value&amp;rdquo; or key=&amp;lsquo;value&amp;rsquo; or key=&lt;value&gt; pairs.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;A &lt;em&gt;Parser&lt;/em&gt; is a tree-based parsing engine for log messages. It builds a parsing tree based on pattern sequence supplied, and for each message sequence, returns the matching pattern sequence. Each of the message tokens will be marked with the semantic field types.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;sequence-command:d4419a1968098b45153921045f06326c&#34;&gt;Sequence Command&lt;/h2&gt;

&lt;p&gt;The &lt;code&gt;sequence&lt;/code&gt; command is developed to demonstrate the use of this package. You can find it in the &lt;code&gt;sequence&lt;/code&gt; directory. The &lt;code&gt;sequence&lt;/code&gt; command implements the &lt;em&gt;sequential semantic log parser&lt;/em&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;   Usage:
     sequence [command]

   Available Commands:
     scan                      scan will tokenize a log file or message and output a list of tokens
     parse                     parse will parse a log file and output a list of parsed tokens for each of the log messages
     bench                     benchmark the parsing of a log file, no output is provided
     help [command]            Help about any command
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;scan:d4419a1968098b45153921045f06326c&#34;&gt;Scan&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;  Usage:
    sequence scan [flags]

   Available Flags:
    -h, --help=false: help for scan
    -m, --msg=&amp;quot;&amp;quot;: message to tokenize
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Example&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  $ ./sequence scan -m &amp;quot;jan 14 10:15:56 testserver sudo:    gonner : tty=pts/3 ; pwd=/home/gonner ; user=root ; command=/bin/su - ustream&amp;quot;
  #   0: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%ts%&amp;quot;, Value=&amp;quot;jan 14 10:15:56&amp;quot; }
  #   1: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;testserver&amp;quot; }
  #   2: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;sudo&amp;quot; }
  #   3: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;:&amp;quot; }
  #   4: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;gonner&amp;quot; }
  #   5: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;:&amp;quot; }
  #   6: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;tty&amp;quot; }
  #   7: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;=&amp;quot; }
  #   8: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;pts/3&amp;quot; }
  #   9: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;;&amp;quot; }
  #  10: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;pwd&amp;quot; }
  #  11: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;=&amp;quot; }
  #  12: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;/home/gonner&amp;quot; }
  #  13: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;;&amp;quot; }
  #  14: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;user&amp;quot; }
  #  15: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;=&amp;quot; }
  #  16: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;root&amp;quot; }
  #  17: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;;&amp;quot; }
  #  18: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;command&amp;quot; }
  #  19: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;=&amp;quot; }
  #  20: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;/bin/su&amp;quot; }
  #  21: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;-&amp;quot; }
  #  22: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;ustream&amp;quot; }
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;parse:d4419a1968098b45153921045f06326c&#34;&gt;Parse&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;  Usage:
    sequence parse [flags]

   Available Flags:
    -h, --help=false: help for parse
    -i, --infile=&amp;quot;&amp;quot;: input file, required
    -o, --outfile=&amp;quot;&amp;quot;: output file, if empty, to stdout
    -d, --patdir=&amp;quot;&amp;quot;: pattern directory,, all files in directory will be used
    -p, --patfile=&amp;quot;&amp;quot;: initial pattern file, required
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The following command parses a file based on existing rules. Note that the
performance number (9570.20 msgs/sec) is mostly due to reading/writing to disk.
To get a more realistic performance number, see the benchmark section below.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  $ ./sequence parse -d ../../patterns -i ../../data/sshd.all  -o parsed.sshd
  Parsed 212897 messages in 22.25 secs, ~ 9570.20 msgs/sec
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This is an entry from the output file:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  Jan 15 19:39:26 jlz sshd[7778]: pam_unix(sshd:session): session opened for user jlz by (uid=0)
  #   0: { Field=&amp;quot;%createtime%&amp;quot;, Type=&amp;quot;%ts%&amp;quot;, Value=&amp;quot;jan 15 19:39:26&amp;quot; }
  #   1: { Field=&amp;quot;%apphost%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;jlz&amp;quot; }
  #   2: { Field=&amp;quot;%appname%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;sshd&amp;quot; }
  #   3: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;[&amp;quot; }
  #   4: { Field=&amp;quot;%sessionid%&amp;quot;, Type=&amp;quot;%integer%&amp;quot;, Value=&amp;quot;7778&amp;quot; }
  #   5: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;]&amp;quot; }
  #   6: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;:&amp;quot; }
  #   7: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;pam_unix&amp;quot; }
  #   8: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;(&amp;quot; }
  #   9: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;sshd&amp;quot; }
  #  10: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;:&amp;quot; }
  #  11: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;session&amp;quot; }
  #  12: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;)&amp;quot; }
  #  13: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;:&amp;quot; }
  #  14: { Field=&amp;quot;%object%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;session&amp;quot; }
  #  15: { Field=&amp;quot;%action%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;opened&amp;quot; }
  #  16: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;for&amp;quot; }
  #  17: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;user&amp;quot; }
  #  18: { Field=&amp;quot;%dstuser%&amp;quot;, Type=&amp;quot;%string%&amp;quot;, Value=&amp;quot;jlz&amp;quot; }
  #  19: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;by&amp;quot; }
  #  20: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;(&amp;quot; }
  #  21: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;uid&amp;quot; }
  #  22: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;=&amp;quot; }
  #  23: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%integer%&amp;quot;, Value=&amp;quot;0&amp;quot; }
  #  24: { Field=&amp;quot;%funknown%&amp;quot;, Type=&amp;quot;%literal%&amp;quot;, Value=&amp;quot;)&amp;quot; }
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;benchmark:d4419a1968098b45153921045f06326c&#34;&gt;Benchmark&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;  Usage:
    sequence bench [flags]

   Available Flags:
    -c, --cpuprofile=&amp;quot;&amp;quot;: CPU profile filename
    -h, --help=false: help for bench
    -i, --infile=&amp;quot;&amp;quot;: input file, required
    -d, --patdir=&amp;quot;&amp;quot;: pattern directory,, all files in directory will be used
    -p, --patfile=&amp;quot;&amp;quot;: pattern file, required
    -w, --workers=1: number of parsing workers
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The following command will benchmark the parsing of two files. First file is a
bunch of sshd logs, averaging 98 bytes per message. The second is a Cisco ASA
log file, averaging 180 bytes per message.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  $ ./sequence bench -p ../../patterns/sshd.txt -i ../../data/sshd.all
  Parsed 212897 messages in 1.69 secs, ~ 126319.27 msgs/sec

  $ ./sequence bench -p ../../patterns/asa.txt -i ../../data/allasa.log
  Parsed 234815 messages in 2.89 secs, ~ 81323.41 msgs/sec
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Performance can be improved by adding more cores:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  GOMAXPROCS=2 ./sequence bench -p ../../patterns/sshd.txt -i ../../data/sshd.all -w 2
  Parsed 212897 messages in 1.00 secs, ~ 212711.83 msgs/sec

  $ GOMAXPROCS=2 ./sequence bench -p ../../patterns/asa.txt -i ../../data/allasa.log -w 2
  Parsed 234815 messages in 1.56 secs, ~ 150769.68 msgs/sec
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Generating Porter2 FSM For Fun and Performance in Go</title>
      <link>http://zhen.org/blog/generating-porter2-fsm-for-fun-and-performance/</link>
      <pubDate>Wed, 21 Jan 2015 20:48:44 -0800</pubDate>
      
      <guid>http://zhen.org/blog/generating-porter2-fsm-for-fun-and-performance/</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;http://godoc.org/github.com/surgebase/porter2&#34;&gt;&lt;img src=&#34;http://godoc.org/github.com/surgebase/porter2?status.svg&#34; alt=&#34;GoDoc&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;tl-dr:cb3ebc7d4c620be4b494c5a79db4f68b&#34;&gt;tl;dr&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;This post describes the &lt;a href=&#34;https://github.com/surgebase/porter2&#34;&gt;Porter2&lt;/a&gt; package I implemented. It is written in Go (#golang).&lt;/li&gt;
&lt;li&gt;By using a &lt;a href=&#34;http://en.wikipedia.org/wiki/Finite-state_machine&#34;&gt;finite-state-machine&lt;/a&gt; approach to &lt;a href=&#34;http://snowball.tartarus.org/algorithms/english/stemmer.html&#34;&gt;Porter2&lt;/a&gt; &lt;a href=&#34;http://en.wikipedia.org/wiki/Stemming&#34;&gt;stemming&lt;/a&gt;, I was able to achieve 660% better performance compare to other Go implementations.&lt;/li&gt;
&lt;li&gt;FSM-based approach is great for known/fixed data set, but obviously not workable if the data set changes at runtime.&lt;/li&gt;
&lt;li&gt;Hand-coding FSM is a PITA!!! &lt;a href=&#34;https://github.com/surgebase/porter2/tree/master/cmd/suffixfsm&#34;&gt;Automate&lt;/a&gt; if possible.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;introduction:cb3ebc7d4c620be4b494c5a79db4f68b&#34;&gt;Introduction&lt;/h2&gt;

&lt;p&gt;In a personal project I am working on, I had the need to perform word stemming in two scenarios. First, I need to perform stemming for all the string literals in a LARGE corpus and then determine if the words are in a fixed set of literals. Second, I need to perform stemming for a subset of words in real-time, as messages stream in.&lt;/p&gt;

&lt;p&gt;In the first case, performance is important but not critical; in the second case, performance is a huge factor.&lt;/p&gt;

&lt;h3 id=&#34;stemming:cb3ebc7d4c620be4b494c5a79db4f68b&#34;&gt;Stemming&lt;/h3&gt;

&lt;p&gt;To start, according to &lt;a href=&#34;http://en.wikipedia.org/wiki/Stemming&#34;&gt;wikipedia&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Stemming is the term used in linguistic morphology and information retrieval to describe the process for reducing inflected (or sometimes derived) words to their word stem, base or root form‚Äîgenerally a written word form.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;As a quick example, the words &lt;em&gt;fail&lt;/em&gt;, &lt;em&gt;failed&lt;/em&gt;, and &lt;em&gt;failing&lt;/em&gt; all mean something has &lt;em&gt;failed&lt;/em&gt;. By stemming these three words, I will get a single form which is &lt;em&gt;fail&lt;/em&gt;. I can then just use &lt;em&gt;fail&lt;/em&gt; going forward instead of having to compare all three forms all the time.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&#34;http://tartarus.org/martin/PorterStemmer/def.txt&#34;&gt;Porter&lt;/a&gt; stemming algorithm is by far the most commonly used stemmer and also considered to be one of the most gentle stemmers. The Porter stemming algorithm (or ‚ÄòPorter stemmer‚Äô) works by removing the commoner morphological and inflexional endings from words in English. Its main use is as part of a term normalisation process that is usually done when setting up Information Retrieval systems. (&lt;a href=&#34;http://tartarus.org/martin/PorterStemmer/&#34;&gt;ref&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://snowball.tartarus.org/algorithms/english/stemmer.html&#34;&gt;Porter2&lt;/a&gt; is universally considered to be an enhancement over the original Porter algorithm. Porter2 has an improved set of rules and it&amp;rsquo;s widely used as well.&lt;/p&gt;

&lt;h2 id=&#34;implementation:cb3ebc7d4c620be4b494c5a79db4f68b&#34;&gt;Implementation&lt;/h2&gt;

&lt;p&gt;This package, &lt;a href=&#34;https://github.com/surgebase/porter2&#34;&gt;Porter2&lt;/a&gt;, implements the Porter2 stemmer. It is written completely using finite state machines to perform suffix comparison, rather than the usual string-based or tree-based approaches. As a result, it is 660% faster compare to string comparison-based approach written in the same (Go) language.&lt;/p&gt;

&lt;p&gt;This implementation has been successfully validated with the dataset from &lt;a href=&#34;http://snowball.tartarus.org/algorithms/english/&#34;&gt;http://snowball.tartarus.org/algorithms/english/&lt;/a&gt;, so it should be in a usable state. If you encounter any issues, please feel free to &lt;a href=&#34;https://github.com/surgebase/porter2/issues&#34;&gt;open an issue&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Usage is fairly simple:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;import &amp;quot;github.com/surgebase/porter2&amp;quot;

fmt.Println(porter2.Stem(&amp;quot;seaweed&amp;quot;)) // should get seawe
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;performance:cb3ebc7d4c620be4b494c5a79db4f68b&#34;&gt;Performance&lt;/h3&gt;

&lt;p&gt;This implementation by far has the highest performance of the various Go-based implementations, AFAICT. I tested a few of the implementations and the results are below.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Implementation&lt;/th&gt;
&lt;th&gt;Time&lt;/th&gt;
&lt;th&gt;Algorithm&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/surgebase/porter2&#34;&gt;surgebase&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;319.009358ms&lt;/td&gt;
&lt;td&gt;Porter2&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/dchest/stemmer&#34;&gt;dchest&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2.106912401s&lt;/td&gt;
&lt;td&gt;Porter2&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/kljensen/snowball&#34;&gt;kljensen&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;5.725917198s&lt;/td&gt;
&lt;td&gt;Porter2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;To run the test again, you can run &lt;a href=&#34;https://github.com/surgebase/porter2/tree/master/cmd/compare&#34;&gt;compare.go&lt;/a&gt; (&lt;code&gt;go run compare.go&lt;/code&gt;).&lt;/p&gt;

&lt;h3 id=&#34;state-machines:cb3ebc7d4c620be4b494c5a79db4f68b&#34;&gt;State Machines&lt;/h3&gt;

&lt;p&gt;Most of the implementations, like the ones in the table above, rely completely on suffix string comparison. Basically there&amp;rsquo;s a list of suffixes, and the code will loop through the list to see if there&amp;rsquo;s a match. Given most of the time you are looking for the longest match, so you order the list so the longest is the first one. So if you are luckly, the match will be early on the list. But regardless that&amp;rsquo;s a huge performance hit.&lt;/p&gt;

&lt;p&gt;This implementation is based completely on finite state machines to perform suffix comparison. You compare each chacter of the string starting at the last character going backwards. The state machines will determine what the longest suffix is.&lt;/p&gt;

&lt;p&gt;As an example, let&amp;rsquo;s look at the 3 suffixes from step0 of the porte2 algorithm. The goal, and it&amp;rsquo;s the same for all the other steps, it&amp;rsquo;s to find the longest matching suffix.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&#39;
&#39;s
&#39;s&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you were to build a non-space-optimized &lt;a href=&#34;http://en.wikipedia.org/wiki/Suffix_tree&#34;&gt;suffix tree&lt;/a&gt;, you would get this, where R is the root of the tree, and any node with * is designated as a final state:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;        R
       / \
      &#39;*  s
     /     \
    s       &#39;*
   /
  &#39;*
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This is a fairly easy tree to build, and we actually did that in the FSM generator we will talk about later. However, to build a working suffix tree in Go, we would need to use a &lt;code&gt;map[rune]*node&lt;/code&gt; structure at each of the nodes. And then search the map for each rune we encounter.&lt;/p&gt;

&lt;p&gt;To test the performance of using a switch statement vs using a map, I wrote a &lt;a href=&#34;https://github.com/surgebase/porter2/tree/master/cmd/switchvsmap&#34;&gt;quick test&lt;/a&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;switch: 4.956523ms
   map: 10.016601ms
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The test basically runs a switch statement and a map each for 1,000,000 times. So it seems like using a switch statement is faster than a map. Though I think the compiler basically builds a map for all the switch case statements.  (Maybe we should call this post &lt;em&gt;Microbenchmarking for fun and performance&lt;/em&gt;?)&lt;/p&gt;

&lt;p&gt;In any case, let&amp;rsquo;s go with the switch approach. We basically need to unroll the suffix tree into a finite state machine.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;        R0
       / \
      &#39;1* s2
     /     \
    s3      &#39;4*
   /
  &#39;5*
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To do that, we need to assign a state number to each of the nodes in the suffix tree, and output each of the states and the transitions based on the rune encountered. The tree above is the same as the one before, but now has a state number assigned to each node.&lt;/p&gt;

&lt;h3 id=&#34;generator:cb3ebc7d4c620be4b494c5a79db4f68b&#34;&gt;Generator&lt;/h3&gt;

&lt;p&gt;I actually started building all the porter2 FSMs manually with a completely different approach than what I am describing here. I won&amp;rsquo;t go into details here but needless to say, it was disastrous. Not only was hand coding state machines extremely error-prone, the approach I was taking also had a lot of potential for bugs. It took me MANY HOURS to hand build those FSMs but at the end, I was happy to abandon all of them for the approach I am taking now.&lt;/p&gt;

&lt;p&gt;To reduce errors and make updating the FSM easier, I wrote a quick tool called &lt;a href=&#34;https://github.com/surgebase/porter2/tree/master/cmd/suffixfsm&#34;&gt;suffixfsm&lt;/a&gt; to generate the FSMs. The tool basically takes a list of suffixes, creates a suffix tree as described above, and unrolls the tree into a set of states using the &lt;code&gt;switch&lt;/code&gt; statement.&lt;/p&gt;

&lt;p&gt;It took me just a couple hours to write and debug the tool, and I was well on my way to fixing other bugs!&lt;/p&gt;

&lt;p&gt;For example, running the command &lt;code&gt;go run suffixfsm.go step0.txt&lt;/code&gt; generated the following code. This is a complete function for step0 of the porter2 algorithm. The only thing missing is what to do with each of the final states, which are in the last &lt;code&gt;switch&lt;/code&gt; statement.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;var (
		l int = len(rs) // string length
		m int			// suffix length
		s int			// state
		f int			// end state of longgest suffix
		r rune			// current rune
	)

loop:
	for i := 0; i &amp;lt; l; i++ {
		r = rs[l-i-1]

		switch s {
		case 0:
			switch r {
			case &#39;\&#39;&#39;:
				s = 1
				m = 1
				f = 1
				// &#39; - final
			case &#39;s&#39;:
				s = 2
			default:
				break loop
			}
		case 1:
			switch r {
			case &#39;s&#39;:
				s = 4
			default:
				break loop
			}
		case 2:
			switch r {
			case &#39;\&#39;&#39;:
				s = 3
				m = 2
				f = 3
				// &#39;s - final
			default:
				break loop
			}
		case 4:
			switch r {
			case &#39;\&#39;&#39;:
				s = 5
				m = 3
				f = 5
				// &#39;s&#39; - final
			default:
				break loop
			}
		default:
			break loop
		}
	}

	switch f {
	case 1:
		// &#39; - final

	case 3:
		// &#39;s - final

	case 5:
		// &#39;s&#39; - final

	}

	return rs
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;finally:cb3ebc7d4c620be4b494c5a79db4f68b&#34;&gt;Finally&lt;/h2&gt;

&lt;p&gt;This is a technique that can probably be applied to any fixed data set. The performance may vary based on the size of the state machine so test it with both maps and FSM to see what works best.&lt;/p&gt;

&lt;p&gt;Happy Go&amp;rsquo;ing!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Go: From a Non-Programmer&#39;s Perspective</title>
      <link>http://zhen.org/blog/golang-from-a-non-programmers-perspective/</link>
      <pubDate>Tue, 13 Jan 2015 13:30:00 -0800</pubDate>
      
      <guid>http://zhen.org/blog/golang-from-a-non-programmers-perspective/</guid>
      <description>

&lt;p&gt;&lt;em&gt;Warning: Long Post. Over 3900 words according to &lt;code&gt;wc&lt;/code&gt;. So read at your own risk. :)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://golang.org/&#34;&gt;Go&lt;/a&gt; is a fairly recent programming language &lt;a href=&#34;http://golang.org/doc/faq#history&#34;&gt;created&lt;/a&gt; by Robert Griesemer, Rob Pike and Ken Thompson of Google. It has risen in popularity over the the past few years, especially since Go 1.0 was released.&lt;/p&gt;

&lt;p&gt;There are a ton of posts out there that talks about the pros and cons of Go, and why one would use it or not. In addition, there&amp;rsquo;s a bunch of posts out there written by different developers coming from different perspectives, such as Python, Ruby, Node, Rust, etc, etc. Recently I even read a couple of Chinese blog posts on why Go is popular in China, and why some of the Chinese developers have abandoned Go, which are quite interesting as well.&lt;/p&gt;

&lt;p&gt;This post is my perspective of Go, how I picked it up, and what I think of it after using it for a while. It is not a post about why Go is better or worse than other languages.&lt;/p&gt;

&lt;p&gt;In short, I like Go. It&amp;rsquo;s the first programming language I&amp;rsquo;ve used in recent years that I can actually build some interesting projects, e.g., &lt;a href=&#34;https://github.com/surge/surgemq&#34;&gt;SurgeMQ&lt;/a&gt; (&lt;a href=&#34;http://zhen.org/blog/surgemq-mqtt-message-queue-750k-mps/&#34;&gt;detailed post&lt;/a&gt;), in my limited spare time.&lt;/p&gt;

&lt;h2 id=&#34;my-background:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;My Background&lt;/h2&gt;

&lt;p&gt;I am not a programmer/developer. Not full-time, not part-time, not moonlight. I tell my colleagues and teams that &amp;ldquo;I am not technical.&amp;rdquo;&lt;/p&gt;

&lt;p&gt;But I do have a technical background. I have a MSCS degree from way back when, and have spent the first 6-7 years of my career performing security audits and penetration tests, and building one of the world&amp;rsquo;s largest managed security services (at least at the time).&lt;/p&gt;

&lt;p&gt;My programming langauge progression, when I was technical, has been BASIC (high school), Pascal and C (college), Perl, PHP, Java, and Javascript (during my technical career). I can&amp;rsquo;t claim to be an &amp;ldquo;expert&amp;rdquo; in any of these languages, but I consider myself quite proficient in each at the time I was using them.&lt;/p&gt;

&lt;p&gt;I was also reasonably network and system savvy, in the sense that I can get myself in and around the Solaris and Linux (UN*X) systems pretty well, and understand the networking stack sufficiently. I consider myself fairly proficient with the various system commands and tools.&lt;/p&gt;

&lt;p&gt;For the past 12 years, however, I have not been a developer, nor a systems guy, nor a networking guy. Instead, I have been running product management for various startups and large companies in the security and infrastructure space.&lt;/p&gt;

&lt;p&gt;Since the career change, I&amp;rsquo;ve not done any meaningful code development. I&amp;rsquo;ve written a script here and there, but nothing that I would consider to be &amp;ldquo;software.&amp;rdquo; However, I&amp;rsquo;ve managed engineering teams as part of my resonsibility, in addition to product management, to produce large scale software.&lt;/p&gt;

&lt;p&gt;In the past 12 years, my most used IDE is called Microsoft Office. So, in short, I am probably semi-technical, and know just enough to be dangerous.&lt;/p&gt;

&lt;h3 id=&#34;my-history-with-go:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;My History with Go&lt;/h3&gt;

&lt;p&gt;In &lt;sup&gt;2011&lt;/sup&gt;&amp;frasl;&lt;sub&gt;2012&lt;/sub&gt;, I had the responsibility of building a brand new engineering team (I was already running product management) at VMware to embark on a new strategic initiative. The nature of the product/service is not important now. However, at the time, because the team is brand new, we had some leeway in choosing a language for the project. VMware at the time was heavily Java, and specifically Spring given the &lt;a href=&#34;http://www.vmware.com/company/news/releases/springsource&#34;&gt;2009 acquisition of SpringSource&lt;/a&gt;. While the new team had mostly Java experience, there was desire to choose something less bloated, and something that had good support for the emerging patterns of distributed software.&lt;/p&gt;

&lt;h4 id=&#34;first-touch:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;First Touch&lt;/h4&gt;

&lt;p&gt;Some of the team members had experience with Scala, so that became an obvious option. I did some research on the web, and found some discussions of Go. At the time, Go hasn&amp;rsquo;t reached 1.0 yet, but there was already a buzz around it. I looked on Amazon, and found &lt;a href=&#34;http://www.amazon.com/gp/product/B0083RVAJW/ref=docs-os-doi_0&#34;&gt;The Way to Go&lt;/a&gt;, which was probably the only Go book around at the time. For $3 on the Kindle, it was well worth it. However, due to the nascent nature of Go (pre 1.0), it was not a comfortable choice so I didn&amp;rsquo;t put that as an option. But this was my &lt;strong&gt;first touch of Go and it felt relatively painless&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;At the end, the team chose Scala because of existing experience, and that in theory, people with Java experience should move fairly easily to Scala. We were the first team in VMware to use Scala and we were pretty excited about it.&lt;/p&gt;

&lt;p&gt;However, to this date, I am still not sure we made the right decision to move to Scala (not that it&amp;rsquo;s wrong either.) The learning curve I believe was higher than we originally anticipated. Many of the developers wrote Java code w/ Scala syntax. And hiring also became an issue. Basically every new developer that came onboard must be sent to Typesafe for training. It was simply not easy for most developers who came from a non-functional mindset to jump into a totally functional mindset. Lastly, the knowledge differences of new Scala developers and experienced ones made it more difficult for them to collaborate.&lt;/p&gt;

&lt;p&gt;I also tried to read up Scala and at least understand the concept. I even tried to take the online course on Coursera offered by Martin Odersky. However, I just could not get my non-functional mind to wrap around the functional Scala. And since I really didn&amp;rsquo;t need to code (nor the developers want me to), I gave up on learning Scala.&lt;/p&gt;

&lt;h4 id=&#34;second-touch:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;Second Touch&lt;/h4&gt;

&lt;p&gt;In any case, fast forward 2 years to Q3 of 2013. I had since left VMware and joined my current company, &lt;a href=&#34;http://jolata.com&#34;&gt;Jolata&lt;/a&gt;, to build a big data network analytics solutions for mobile carriers and high-frequency trading financial services firms. We are a small startup that&amp;rsquo;s trying to do a ton of things. So even though I run products, I have to get my hands dirty often.&lt;/p&gt;

&lt;p&gt;One of the things we had to do as a company is to build a repeatable demo environment. The goal is to have a prebuilt vagrant VM that we can run on our Macs, and we can demonstrate our product without connecting to the network. The requirement was that we had an interesting set of data in the database so we can walk through different scenarios.&lt;/p&gt;

&lt;p&gt;The data set we needed was network flow data. And to make the UI look realistic, interesting and non-blocky, we wanted to generate noisy data so the UI looks like it&amp;rsquo;s monitoring a real network. Because all of the developers are focused on feature development, I took on the task of building out the data set.&lt;/p&gt;

&lt;p&gt;By now, Go has released v1.1 and on its way to 1.2. It was then I started seriously considering Go as a candidate for this project. To build a tool that can generate the data set, we needed two libraries. The first is a &lt;a href=&#34;http://en.wikipedia.org/wiki/Perlin_noise&#34;&gt;Perlin Noise&lt;/a&gt; generator, and the second is &lt;a href=&#34;https://code.google.com/p/cityhash/&#34;&gt;Google&amp;rsquo;s Cityhash&lt;/a&gt;. Neither of these were available in Go (or not that I remember). I thought this would be a great opportunity to test out Go. The end results were my Go Learn Projects &lt;a href=&#34;https://github.com/dataence/perlinnoise&#34;&gt;#0 Perlin&lt;/a&gt;, and &lt;a href=&#34;https://github.com/dataence/cityhash&#34;&gt;#1 Cityhash&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Both of these projects were relatively simple since I didn&amp;rsquo;t have to spend a lot of time figuring out HOW to write them. Perlin Noise has well-established C libraries and algorithms, and Cityhash was written in C so it was easy to translate to Go. However, these projects gave me a good feel of how Go works.&lt;/p&gt;

&lt;p&gt;In the end, I wrote the data generator in Go (private repo) and got the first taste of goroutines. Again, &lt;strong&gt;this second touch with Go was also relatively painless&lt;/strong&gt;. The only confusion I had at the time was the Go source tree structure. Trying to understand $GOROOT, $GOPATH and other Go environment variables were all new to me. This was also the first time in 10 years that I really spent time writing a piece of software, so I just considered the confusion as my inexperience.&lt;/p&gt;

&lt;h4 id=&#34;third-touch-and-beyond:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;Third Touch and Beyond&lt;/h4&gt;

&lt;p&gt;Today, I no longer code at work as we have more developers now. Also, the Jolata product is mostly C/C++, Java and Node, so Go is also no longer in the mix. However, After getting a taste of Go in the first couple of Go projects, I&amp;rsquo;ve since spent a tremendous amount of my limited personal spare time working with it.&lt;/p&gt;

&lt;p&gt;I have since written various libraries for &lt;a href=&#34;https://github.com/dataence/bitmap&#34;&gt;bitmap compression&lt;/a&gt;, &lt;a href=&#34;https://github.com/dataence/encoding&#34;&gt;integer compression&lt;/a&gt;, &lt;a href=&#34;https://github.com/dataence/bloom&#34;&gt;bloom filters&lt;/a&gt;, &lt;a href=&#34;https://github.com/dataence/skiplist&#34;&gt;skiplist&lt;/a&gt;, and &lt;a href=&#34;https://github.com/dataence&#34;&gt;many others&lt;/a&gt;. And I have &lt;a href=&#34;http://zhen.org/blog/&#34;&gt;blogged my journey&lt;/a&gt; along the way as I learn. With these projects, I&amp;rsquo;ve learned how to use the Go toolchain, how to write idiomatic Go, how to write tests with Go, and more importantly, how to optimize Go.&lt;/p&gt;

&lt;p&gt;Interestingly, one of my most popular posts is &lt;a href=&#34;http://zhen.org/blog/go-vs-java-decoding-billions-of-integers-per-second/&#34;&gt;Go vs Java: Decoding Billions of Integers Per Second&lt;/a&gt;. This tells me that a lot of Java developers are potentially looking to adopt Go.&lt;/p&gt;

&lt;p&gt;All these have allowed me to learn Go enough to build a real project, &lt;a href=&#34;https://github.com/surge/surgemq&#34;&gt;SurgeMQ&lt;/a&gt;. It is by far my most popular project and one that I expect to continue developing.&lt;/p&gt;

&lt;h2 id=&#34;my-views-on-go:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;My Views on Go&lt;/h2&gt;

&lt;p&gt;Go is not just a langauge, it also has a very active community around it. The views are based on my observation over the past 1.5 years of using Go. My Go environment is primary Sublime Text 3 with GoSublime plugin.&lt;/p&gt;

&lt;h3 id=&#34;as-a-language:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;As a Language&amp;hellip;&lt;/h3&gt;

&lt;p&gt;I am not a language theorist, nor do I claim to be a language expert. In fact, prior to actually using Go, I&amp;rsquo;ve barely heard of generics, communicating sequential processes, and other &amp;ldquo;cool&amp;rdquo; and &amp;ldquo;advanced&amp;rdquo; concepts. I&amp;rsquo;ve heard of all the new cool programming languages such as Clojure and Rust, but have never looked at any of the code. So my view of Go is basically one of a developer n00b.&lt;/p&gt;

&lt;p&gt;In a way, I consider that to be an advantage coming in to a new programming language, in that I have no preconceived notion of how things &amp;ldquo;SHOULD&amp;rdquo; be. I can learn the language and use the constructs as they were intended, and not have to question WHY it was designed that way because it&amp;rsquo;s different than what I know.&lt;/p&gt;

&lt;p&gt;Others may consider this to be a huge disadvantage, since I don&amp;rsquo;t know any better. There maybe constructs in other languages that would make my work a lot easier, or make my code a lot simpler.&lt;/p&gt;

&lt;p&gt;However, as long as the language doesn&amp;rsquo;t slow me down, then I feel it&amp;rsquo;s serving my needs.&lt;/p&gt;

&lt;h4 id=&#34;go-is-simple:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;Go is Simple&lt;/h4&gt;

&lt;p&gt;As a language for a new deverloper, Go was very easy to pick up. Go&amp;rsquo;s design is fairly simple and minimalistic. You can sit down and read through the &lt;a href=&#34;https://golang.org/ref/spec&#34;&gt;Language Specification&lt;/a&gt; fairly quickly in an idle afternoon. I actually didn&amp;rsquo;t find the language reference until later. My first touch of Go was by scanning through the book &lt;em&gt;The Way To Go&lt;/em&gt;. Regardless, there&amp;rsquo;s not a lot to the language so it&amp;rsquo;s relatively easy for someone like myself to pick up the basics. (Btw, I&amp;rsquo;ve also never gone through the &lt;a href=&#34;https://tour.golang.org/&#34;&gt;Go Tour&lt;/a&gt;. I know it&amp;rsquo;s highly recommended to all new Go developers. I just never did it.)&lt;/p&gt;

&lt;p&gt;There are more advanced concepts in Go, such as interface, channel, and goroutine. Channel in general is a fairly straightforward concept. Most new programmers should be able to understand that quickly. You write stuff in, you read stuff out. It&amp;rsquo;s that simple. From there, you can slowly expand on the concept as you &lt;em&gt;go&lt;/em&gt; along by adding buffered channels, or ranging over channels, or checking if the read is ok, or using quit channels.&lt;/p&gt;

&lt;p&gt;For anyone coming from a language with threads, goroutine is not a difficult concept to understand. It&amp;rsquo;s basically a light-weight thread that can be executed concurrently. You can run any function as a goroutine.&lt;/p&gt;

&lt;p&gt;The more difficult concept is interface. That&amp;rsquo;s because it&amp;rsquo;s a &lt;strike&gt;fairly new concept that doesn&amp;rsquo;t really exist in&lt;/strike&gt; concept that&amp;rsquo;s fairly different than other languages. Once you understand what interfaces are, it&amp;rsquo;s fairly easy to start using them. However, designing your own interfaces is a different story.&lt;/p&gt;

&lt;p&gt;The one thing I&amp;rsquo;ve seen most developers complain about Go is the lack of generics. Egon made a nice &lt;a href=&#34;https://docs.google.com/document/d/1vrAy9gMpMoS3uaVphB32uVXX4pi-HnNjkMEgyAHX4N4&#34;&gt;Summary of Go Generics Discussions&lt;/a&gt; that you can read through. For me personally, I don&amp;rsquo;t know any better. I have never used generics and I haven&amp;rsquo;t found a situation where I strongly require it.&lt;/p&gt;

&lt;p&gt;As a language a team, the simplicity of Go is &lt;em&gt;HUGE&lt;/em&gt;. It allows develoeprs to quickly come up to speed and be productive in the shortest period of time. And in this case, time is literally money.&lt;/p&gt;

&lt;h4 id=&#34;go-is-opinionated:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;Go is Opinionated&lt;/h4&gt;

&lt;p&gt;Go is opinionated in many ways. For example, probably one of the most frustrating thing about Go is how to structure the code directory. Unlike other languages where you can just create a directory and get started, Go wants you to put things in $GOPATH. It took a few readings of &lt;a href=&#34;https://golang.org/doc/code.html&#34;&gt;How to Write Go Code&lt;/a&gt; for me to grasp what&amp;rsquo;s going on, and it took even longer for me to really get the hang of code organization, and how Go imports packages (e.g., &lt;code&gt;go get&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;If I go back and look at my first internal project, I would probably cry because it&amp;rsquo;s all organized in a non-idiomatic way. However, once I got the hang of how Go expects things to be organized, it no longer was a obstacle for me. &lt;strong&gt;Instead of fighting the way things should be organized in Go, I learned to &lt;em&gt;go&lt;/em&gt; with the flow.&lt;/strong&gt; At the end of the day, the $GOPATH organizational structure actually helps me track the different packages I import.&lt;/p&gt;

&lt;p&gt;Another way Go is opinionated is code formatting. Go, and Go developers, expect that all Go programs are formatted with &lt;a href=&#34;http://blog.golang.org/go-fmt-your-code&#34;&gt;&lt;code&gt;go fmt&lt;/code&gt;&lt;/a&gt;. A lot of developers hate it and some even listed it as a top reason for leaving Go. However, this is one of those things that you just have to learn to &lt;em&gt;go&lt;/em&gt; with the flow. Personally I love it.&lt;/p&gt;

&lt;p&gt;And as a team language it will save a ton of argument time. Again, time is money for a new team. When my new VMware team got started, we probably spent a good 30 person-hours debating code formatting. That&amp;rsquo;s $2700 at a $180K fully-burdened rate. And that&amp;rsquo;s not counting all the issues we will run into later trying to reformat code that&amp;rsquo;s not properly formatted.&lt;/p&gt;

&lt;p&gt;Go is also very opininated in terms of variable use and package import. If a variable is declared but not used, the Go compiler will complain. If a package is imported but not used, the Go compiler will complain. Personally, I like the compiler complaining about the unused variables. It keeps the code clean, and reduce the chance of unexpected bugs. I am less concerned about unused packages but have also learned to live with the compiler complains. I use &lt;a href=&#34;https://github.com/bradfitz/goimports&#34;&gt;goimports&lt;/a&gt; in Sublime Text 3 to effectively and quickly take care of the import statements. In fact, in 99% of the cases I don&amp;rsquo;t even need to type in the import statements myself.&lt;/p&gt;

&lt;h4 id=&#34;go-is-safe:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;Go is Safe&lt;/h4&gt;

&lt;p&gt;Go is safe for a couple of reasons. For a new developer, Go does not make it easy for you to be lazy. For example, Go is a statically typed language, which means every variable must explicitly have a type associated with it. The Go compiler does infer types under certain situations, but regardless, there&amp;rsquo;s a type for every variable. This may feel uncomfortable for developers coming from dynamic languages, but the benefit definitely outweighs the cost. I&amp;rsquo;ve experience first hand, as a product person waiting for bugs to be fixed, how long it takes to troubleshoot problems in Node. Having static types gives you a feeling of &amp;ldquo;correctness&amp;rdquo; after you have written the code.&lt;/p&gt;

&lt;p&gt;Another example of Go not allowing you to be lazy is that Go&amp;rsquo;s error handling is through the return of &lt;code&gt;error&lt;/code&gt; from functions. There has been a ton of discussions and debates on the merit of &lt;code&gt;error&lt;/code&gt; vs exception handling so I won&amp;rsquo;t go through it here. However, for a new programmer, it really requires your explicit attention to handle the errors. And I consider that to be a good thing as you know what to expect at each step of the program.&lt;/p&gt;

&lt;p&gt;Making things explicit and making it harder for developers to be lazy are a couple of the reasons that make Go safe.&lt;/p&gt;

&lt;p&gt;Another reason is that &lt;a href=&#34;http://golang.org/doc/faq#garbage_collection&#34;&gt;Go has a garbage collector&lt;/a&gt;. This makes it different from C/C++ as it no longer require developers to perform memory management. The difficulty in memory management is the single biggest source of memory leaks in C/C++ programs. Having a GC removes that burden from developers and makes the overall program much safer. Having said that, there&amp;rsquo;s much improvement to be made to the GC given its nascent state. And, as I learned over the past 1.5 years, to write high performance programs in Go today, developers need to make serious efforts to reduce GC pressure.&lt;/p&gt;

&lt;p&gt;Again, as a team langauge, the safety aspect is very important. The team will likely end up spending much less time dealing with memory bugs and focus more on feature development.&lt;/p&gt;

&lt;h4 id=&#34;go-is-powerful:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;Go is Powerful&lt;/h4&gt;

&lt;p&gt;What makes Go powerful are its simplicity, its high performance, and advanced concepts such as channels, goroutines, interfaces, type composition, etc. We have discussed all of these in previous sections.&lt;/p&gt;

&lt;p&gt;In addition to all that, one of the killer feature of Go is that all Go programs are statically compiled into a single binary. There&amp;rsquo;s no shared libraries to worry about. There&amp;rsquo;s no jar files to worry about. There&amp;rsquo;s no packages to bundle. It&amp;rsquo;s just a single binary. And that&amp;rsquo;s an extremely powerful feature from the deployment and maintenance perspectives. To deploy a Go program, you just need to copy a single Go binary over. To update it, copy a single Go binary over.&lt;/p&gt;

&lt;p&gt;In contrast, to deploy a Node.js application, you may end up downloading hundreds of little packages at deployment time. And you have to worry about whether all these packages are compatible. The Node community has obviously developed a lot of good tools to manage dependencies and version control. But still, every time I see a Node app get deployed on a new machine, and have to download literally hundreds of little packages, I die a little inside.&lt;/p&gt;

&lt;p&gt;Also, if you deploy C/C++ programs and depend on shared libraries, now you have to worry about OS and shared library version compatibility issues.&lt;/p&gt;

&lt;p&gt;Another powerful feature of Go is that you can mix C and assembly code with Go code in a single program. I haven&amp;rsquo;t used this extensively, but in my attempt to &lt;a href=&#34;http://zhen.org/blog/go-vs-java-decoding-billions-of-integers-per-second/&#34;&gt;optimize&lt;/a&gt; the &lt;a href=&#34;https://github.com/dataence/encoding&#34;&gt;integer compression&lt;/a&gt; library, I added different C and assembly snippets to try to squeeze the last ounce of performance out of Go. It was fairly easy and straightforward to do.&lt;/p&gt;

&lt;p&gt;One last thing, Go has a very large and complete standard library. It enables developers to do most, if not all, of their work quickly and efficiently. As the language matures and the community grows, there will be more and more 3rd party open source libraries one can leverage.&lt;/p&gt;

&lt;h3 id=&#34;as-a-community:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;As a Community&lt;/h3&gt;

&lt;p&gt;Today, Go has a very active community behind it. Specifically, the information sources I&amp;rsquo;ve followed and gotten help from include &lt;a href=&#34;https://botbot.me/freenode/go-nuts/&#34;&gt;#go-nuts IRC&lt;/a&gt;, &lt;a href=&#34;http://www.reddit.com/r/golang/search?q=golang&amp;amp;sort=new&amp;amp;restrict_sr=on&amp;amp;t=all&#34;&gt;golang subreddit&lt;/a&gt;, and obviously the &lt;a href=&#34;https://groups.google.com/forum/#!forum/golang-nuts&#34;&gt;golang-nuts mailing list&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I spent quite a bit of time in IRC when I first started. I&amp;rsquo;ve gotten help from quite a few people such as dsal, tv42, and others, and I am grateful for that. I am spending less time there now because of the limited time I have (remember, my day job is not development. :)&lt;/p&gt;

&lt;p&gt;There&amp;rsquo;s been some sentiments in the developer community that Go developers (gophers) are Google worshippers, don&amp;rsquo;t accept any feedbacks on language changes, harsh to new comers who come from different languages,  difficult to ask questions because the sample code is not on play.golang.org, etc etc.&lt;/p&gt;

&lt;p&gt;To be clear, I&amp;rsquo;ve never really spent much time with the different language communites, even when I was technical. So I have nothing else to compare to. So I can only speak from a human interaction level.&lt;/p&gt;

&lt;p&gt;I can see it from both perspectives. For example, developers coming from different language backgrounds sometimes have experience with a different way of doing things. When they want to perfrom the same tasks in Go, they ask the question by saying here&amp;rsquo;s how I solved this problem in language X, how do I translate that to Go?&lt;/p&gt;

&lt;p&gt;In some cases I&amp;rsquo;ve definitely seen people responding by saying that&amp;rsquo;s not how Go works and you are doing it wrong. That type of response can quickly create negative sentiment and kill the conversation.&lt;/p&gt;

&lt;p&gt;Another type of response I&amp;rsquo;ve seen is some developers telling the original poster (OP) that they are not asking questions the right way, and then promptly sending the OP a link to some web page on how to properly ask questions. Again, I can see how the OP can have a negative view on the matter.&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ve expereinced some of this myself. When I implemented a &lt;a href=&#34;https://github.com/dataence/bloom&#34;&gt;Bloom Filter&lt;/a&gt; package last year, I did a bunch of performance tests and wrote a &lt;a href=&#34;http://zhen.org/blog/benchmarking-bloom-filters-and-hash-functions-in-go/&#34;&gt;blog post&lt;/a&gt; about the it. As a newbie learning Go, I felt like I accomplished something and I was pretty happy with it. I posted the link to reddit, and the first comment I got was&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Downvoted because I dislike this pattern of learning a new language and then immediately publishing performance data about it, before you know how to write idiomatic or performant code in it.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;Ouch!!&lt;/strong&gt; As a new Go developer, this is not the response I expected. In the end though, the commenter also pointed out something that helped me improve the performance of the implementation. I was grateful for that. It was also then I realized how important it is to reduce the number of allocation in order to reduce the Go GC pressure.&lt;/p&gt;

&lt;p&gt;In hindsight, the comment has a very valid point. I can understand why some developers would feel annoyed about benchmarks from people who have no idea on what they are doing. Regardless, being nice is not a bad thing. Saying things like &amp;ldquo;WTF is wrong with you&amp;rdquo; (not related to the bloom filter post) will only push new developers away.&lt;/p&gt;

&lt;p&gt;I quickly got over the sting because I am just too old to care about what others think I should or should not do. I continued my learning process by writing and optimizing Go packages, and posting the results in my blog. In fact, the &lt;a href=&#34;http://zhen.org/blog/go-vs-java-decoding-billions-of-integers-per-second/&#34;&gt;Go vs Java: Decoding Billions of Integers Per Second&lt;/a&gt; post has many of the optimization techniques I tried to increase the performance of Go programs.&lt;/p&gt;

&lt;p&gt;Overall though, I felt I&amp;rsquo;ve learned a ton from the Go community. People have generally been helpful and are willing to offer solutions to problems. I have nothing to compare to, but I feel that the positives of the Go community far outweighs any negatives.&lt;/p&gt;

&lt;h2 id=&#34;conclusion:b5701f21733ea64a37f8a0bc7a6884f3&#34;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;In conclusion, it has been a tremendous 1.5 years of working with Go, and seeing Go grow both as a language and as a community has been very rewarding.&lt;/p&gt;

&lt;p&gt;My focus now, in my limited spare personal time, is to continue the development of &lt;a href=&#34;https://github.com/surge/surgemq&#34;&gt;SurgeMQ&lt;/a&gt;, which is a high performance MQTT broker and client library that aims to be fully compliant with MQTT 3.1 and 3.1.1 specs.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>PingMQ: A SurgeMQ-based ICMP Monitoring Tool</title>
      <link>http://zhen.org/blog/pingmq-a-surgemq-based-icmp-monitoring-tool/</link>
      <pubDate>Thu, 25 Dec 2014 00:00:33 -0800</pubDate>
      
      <guid>http://zhen.org/blog/pingmq-a-surgemq-based-icmp-monitoring-tool/</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;https://github.com/surge/surgemq/tree/master/cmd/pingmq&#34;&gt;pingmq&lt;/a&gt; is developed to demonstrate the different use cases one can use &lt;a href=&#34;//surgemq.com&#34;&gt;SurgeMQ&lt;/a&gt;, a high performance MQTT server and client library. In this simplified use case, a network administrator can setup server uptime monitoring system by periodically sending ICMP ECHO_REQUEST to all the IPs in their network, and send the results to SurgeMQ.&lt;/p&gt;

&lt;p&gt;Then multiple clients can subscribe to results based on their different needs. For example, a client maybe only interested in any failed ping attempts, as that would indicate a host might be down. After a certain number of failures the client may then raise some type of flag to indicate host down.&lt;/p&gt;

&lt;p&gt;There are three benefits of using SurgeMQ for this use case.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;First, with all the different monitoring tools out there that wants to know if hosts are up or down, they can all now subscribe to a single source of information. They no longer need to write their own uptime tools.&lt;/li&gt;
&lt;li&gt;Second, assuming there are 5 monitoring tools on the network that wants to ping each and every host, the small packets are going to congest the network. The company can save 80% on their uptime monitoring bandwidth by having a single tool that pings the hosts, and have the rest subscribe to the results.&lt;/li&gt;
&lt;li&gt;Third/last, the company can enhance their security posture by placing tighter restrictions on their firewalls if there&amp;rsquo;s only a single host that can send ICMP ECHO_REQUESTS to all other hosts.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The following commands will run pingmq as a server, pinging the 8.8.8.0/28 CIDR block, and publishing the results to /ping/success/{ip} and /ping/failure/{ip} topics every 30 seconds. &lt;code&gt;sudo&lt;/code&gt; is needed because we are using RAW sockets and that requires root privilege.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ go build
$ sudo ./pingmq server -p 8.8.8.0/28 -i 30
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The following command will run pingmq as a client, subscribing to /ping/failure/+ topic and receiving any failed ping attempts.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ./pingmq client -t /ping/failure/+
8.8.8.6: Request timed out for seq 1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The following command will run pingmq as a client, subscribing to /ping/failure/+ topic and receiving any failed ping attempts.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ./pingmq client -t /ping/success/+
8 bytes from 8.8.8.8: seq=1 ttl=56 tos=32 time=21.753711ms
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;One can also subscribe to a specific IP by using the following command.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ./pingmq client -t /ping/+/8.8.8.8
8 bytes from 8.8.8.8: seq=1 ttl=56 tos=32 time=21.753711ms
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;commands:2953f7aa0fe0aa3757fe6bf025e7fa57&#34;&gt;Commands&lt;/h3&gt;

&lt;p&gt;There are two builtin commands for &lt;code&gt;pingmq&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;pingmq server&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Usage:
  pingmq server [flags]

 Available Flags:
  -h, --help=false: help for server
  -i, --interval=60: ping interval in seconds
  -p, --ping=[]: Comma separated list of IPv4 addresses to ping
  -q, --quiet=false: print out ping results
  -u, --uri=&amp;quot;tcp://:5836&amp;quot;: URI to run the server on
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;pingmq client&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Usage:
  pingmq client [flags]

 Available Flags:
  -h, --help=false: help for client
  -s, --server=&amp;quot;tcp://127.0.0.1:5836&amp;quot;: PingMQ server to connect to
  -t, --topic=[]: Comma separated list of topics to subscribe to
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;ip-addresses:2953f7aa0fe0aa3757fe6bf025e7fa57&#34;&gt;IP Addresses&lt;/h3&gt;

&lt;p&gt;To list IPs you like to use with &lt;code&gt;pingmq&lt;/code&gt;, you can use the following formats:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;10.1.1.1      -&amp;gt; 10.1.1.1
10.1.1.1,2    -&amp;gt; 10.1.1.1, 10.1.1.2
10.1.1,2.1    -&amp;gt; 10.1.1.1, 10.1.2.1
10.1.1,2.1,2  -&amp;gt; 10.1.1.1, 10.1.1.2 10.1.2.1, 10.1.2.2
10.1.1.1-2    -&amp;gt; 10.1.1.1, 10.1.1.2
10.1.1.-2     -&amp;gt; 10.1.1.0, 10.1.1.1, 10.1.1.2
10.1.1.1-10   -&amp;gt; 10.1.1.1, 10.1.1.2 ... 10.1.1.10
10.1.1.1-     -&amp;gt; 10.1.1.1 ... 10.1.1.254, 10.1.1.255
10.1.1-3.1    -&amp;gt; 10.1.1.1, 10.1.2.1, 10.1.3.1
10.1-3.1-3.1  -&amp;gt; 10.1.1.1, 10.1.2.1, 10.1.3.1, 10.2.1.1, 10.2.2.1, 10.2.3.1, 10.3.1.1, 10.3.2.1, 10.3.3.1
10.1.1        -&amp;gt; 10.1.1.0, 10.1.1.1 ... 10.1.1.254, 10.1.1.255
10.1.1-2      -&amp;gt; 10.1.1.0, 10.1.1.1 ... 10.1.1.255, 10.1.2.0, 10.1.2.1 ... 10.1.2.255
10.1-2        -&amp;gt; 10.1.0.0, 10.1.0,1 ... 10.2.255.254, 10..2.255.255
10            -&amp;gt; 10.0.0.0 ... 10.255.255.255
10.1.1.2,3,4  -&amp;gt; 10.1.1.1, 10.1.1.2, 10.1.1.3, 10.1.1.4
10.1.1,2      -&amp;gt; 10.1.1.0, 10.1.1.1 ... 10.1.1.255, 10.1.2.0, 10.1.2.1 ... 10.1.2.255
10.1.1/28     -&amp;gt; 10.1.1.0 ... 10.1.1.255
10.1.1.0/28   -&amp;gt; 10.1.1.0 ... 10.1.1.15
10.1.1.0/30   -&amp;gt; 10.1.1.0, 10.1.1.1, 10.1.1.2, 10.1.1.3
10.1.1.128/25 -&amp;gt; 10.1.1.128 ... 10.1.1.255
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;topic-format:2953f7aa0fe0aa3757fe6bf025e7fa57&#34;&gt;Topic Format&lt;/h3&gt;

&lt;p&gt;TO subscribe to the &lt;code&gt;pingmq&lt;/code&gt; results, you can use the following formats:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/ping/#&lt;/code&gt; will subscribe to both success and failed pings for all IP addresses&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ping/success/+&lt;/code&gt; will subscribe to success pings for all IP addresses&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ping/failure/+&lt;/code&gt; will subscribe to failed pings for all IP addresses&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ping/+/8.8.8.8&lt;/code&gt; will subscribe to both success and failed pings for all IP 8.8.8.8&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;building:2953f7aa0fe0aa3757fe6bf025e7fa57&#34;&gt;Building&lt;/h3&gt;

&lt;p&gt;To build &lt;code&gt;pingmq&lt;/code&gt;, you need to have installed &lt;a href=&#34;http://golang.org&#34;&gt;Go 1.3.3 or 1.4&lt;/a&gt;. Then run the following:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# go get github.com/surge/surgemq
# cd surgemq/examples/pingmq
# go build
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;After that, you should see the &lt;code&gt;pingmq&lt;/code&gt; command in the pingmq directory.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>